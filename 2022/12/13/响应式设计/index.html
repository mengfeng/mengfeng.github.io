<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>响应式设计 |  艺术码畜</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G16F14RTRN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-G16F14RTRN');
</script>

 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?f5e6c5b5d28b6bff1c9eb1fcf7f6862b";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="艺术码畜" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-响应式设计"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  响应式设计
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/" class="article-date">
  <time datetime="2022-12-13T06:45:26.000Z" itemprop="datePublished">2022-12-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/">响应式设计</a> / <a class="article-category-link" href="/categories/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/">响应式设计</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">5.8k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">23 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="响应式设计"><a href="#响应式设计" class="headerlink" title="响应式设计"></a>响应式设计</h1><blockquote>
<p>自适应、响应式、弹性布局、屏幕适配，这是四个独立不同的概念。</p>
</blockquote>
<h3 id="一、区别"><a href="#一、区别" class="headerlink" title="一、区别"></a>一、区别</h3><p>自适应：多端请求时返回不同的页面，服务端需要准备多套程序或者多套模板。</p>
<p>响应式：主要是利用css媒体查询使得在不同屏幕大小下，页面有不同表现，主要是元素布局等变化。</p>
<p>弹性布局：主要是利用百分比设置元素宽度，浮动还有flex设置元素布局等等。</p>
<p>屏幕适配：主要是应用于对完美还原设计稿尺寸有要求的页面，主要是利用 rem、vm等技术。（类似于750px的设计稿是一张图片，这张图片无论怎么缩放，都能显示很好的效果，现在我们的网页也需要图片这种等比缩放的效果，这么说你应该能体会到了。当然了，这里还需要顺便解决高清屏显示的问题。）</p>
<h3 id="二、技术方案怎么选"><a href="#二、技术方案怎么选" class="headerlink" title="二、技术方案怎么选"></a>二、技术方案怎么选</h3><ol>
<li>简单 &amp; 对速度不敏感和对代码精简没要求 &amp; 预算紧张</li>
</ol>
<p>​      响应式，一套代码解决多端</p>
<p>​     展示阅读类 交互逻辑简单且少，且移动端与pc端内容差异不大，如新闻站，企业官网</p>
<ol start="2">
<li>复杂 &amp; 对精简代码和速度有要求 预算充足</li>
</ol>
<p>​      做两套 根据请求头自适应返回 web端 手机端 （后端可共用，也可不共用，如不同模块或者部署不同应用）</p>
<p>​     功能类，交互逻辑复杂且多，如电商，社交类</p>
<ol start="3">
<li>复杂 &amp; 有多终端适配要求 &amp; 对细节有一定要求 追求用户体验 &amp; 预算豪华</li>
</ol>
<p>​       做两套 移动端用适配做以满足不同移动终端</p>
<ol start="4">
<li>复杂 &amp; 细节要求和技术追求极高 &amp; 追求极致完美的用户体验 &amp; 不差钱 （艺术家、哲学家）</li>
</ol>
<p>​      多端 多套 响应式 适配 多技术相结合</p>
<h3 id="三、各种方案的详细讲解"><a href="#三、各种方案的详细讲解" class="headerlink" title="三、各种方案的详细讲解"></a>三、各种方案的详细讲解</h3><h4 id="1-媒体查询"><a href="#1-媒体查询" class="headerlink" title="1.媒体查询"></a>1.媒体查询</h4><p>要想实现css屏幕大小自适应，首先得引入 CSS3 @media 媒体查询器：</p>
<p>media的使用和规则：</p>
<p>　　①被链接文档将显示在什么设备上。</p>
<p>　　②用于为不同的媒介类型规定不同的样式。</p>
<p>语法： </p>
<pre><code class="css">@media 设备名 only （选取条件） not （选取条件） and（设备选取条件），设备二&#123;sRules&#125;
</code></pre>
<p>实例：</p>
<pre><code class="css">/* 这是匹配横屏的状态，横屏时的css代码 */

@media all and (orientation :landscape)&#123;&#125;

/* 这是匹配竖屏的状态，竖屏时的css代码 */

@media all and (orientation :portrait)&#123;&#125;

@media X and (min-width:200px)&#123;&#125;
/*X为媒体类型---&gt;比如print/screen/TV等等*/

/* 宽度大于600px小于960之间时，隐藏footer结构 */

@media all and (min-height:640px) and (max-height:960px)&#123;
   　　　footer&#123;display:none;&#125;
&#125;
</code></pre>
<p>在实际应用的时候，首先得在HTML的头文件<head>里上加入以下代码：</p>
<pre><code class="html">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;
</code></pre>
<p>解释：　　　</p>
<p>width &#x3D; device-width：宽度等于当前设备的宽度</p>
<p>initial-scale：初始的缩放比例（默认设置为1.0） </p>
<p>minimum-scale：允许用户缩放到的最小比例（默认设置为1.0）  </p>
<p>maximum-scale：允许用户缩放到的最大比例（默认设置为1.0） </p>
<p>user-scalable：用户是否可以手动缩放（默认设置为no，因为我们不希望用户放大缩小页面）</p>
<p>因为media的类型很多，这里就发MDN的对应链接了：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media">https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media</a></p>
<p>下面是media类型的screen（用于电脑屏幕，平板电脑，智能手机等）：</p>
<p><strong>css自适应屏幕大小大方法：</strong></p>
<pre><code class="css">@media screen and (min-width: 320px) and (max-width: 1156px)&#123;

              .site-bg-dl &#123;
              position: fixed;
              height: 100%;
              width: 100%;
              z-index: 0;
              background-image: url(bjxzfwzx/images/bj1.png);
              background-size: cover;
              background-repeat: no-repeat;
              background-attachment: fixed;
              background-size:100% 100%;
              -moz-background-size:100% 100%;
            &#125;
&#125;
</code></pre>
<p>解释：</p>
<p>告诉浏览器当屏幕大于320px，并小于1156px下执行此代码；</p>
<p>在css中添加如下内容 可以分别定制不同屏幕的显示样式：</p>
<pre><code class="css">/* 大屏幕 ：大于等于1200px*/
@media (min-width: 1200px) &#123; ... &#125;

/*默认*/
@media (min-width: 980px)&#123;...&#125;

/* 平板电脑和小屏电脑之间的分辨率 */
@media (min-width: 768px) and (max-width: 979px) &#123; ... &#125;

/* 横向放置的手机和竖向放置的平板之间的分辨率 */
@media (max-width: 767px) &#123; ... &#125;

/* 横向放置的手机及分辨率更小的设备 */
@media (max-width: 480px) &#123; ... &#125;
</code></pre>
<p>Media Queries Level 4 引入了一种新的范围语法，在测试接受范围的任何特性时允许更简洁的媒体查询，如下面的示例所示：</p>
<pre><code class="css">@media (height &gt; 600px) &#123;
  body &#123;
    line-height: 1.4;
  &#125;
&#125;

@media (400px &lt;= width &lt;= 700px) &#123;
  body &#123;
    line-height: 1.4;
  &#125;
&#125;
</code></pre>
<h4 id="2-如何选择屏幕大小分割点"><a href="#2-如何选择屏幕大小分割点" class="headerlink" title="2.如何选择屏幕大小分割点"></a>2.如何选择屏幕大小分割点</h4><p>如何确定媒体查询的分割点也是一个开发中会遇到的问题，下面是市场上的移动设备和电脑屏幕分辨率的分布情况，可以发现不同品牌和型号的设备屏幕分辨率一般都不一样</p>
<p><img src="/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/image-20221213140505623.png"></p>
<p>如果我们选择<code>600px</code>,<code>900px</code>,<code>1200px</code>,<code>1800px</code>作为分割点，可以适配到常见的14个机型：</p>
<p><img src="/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/image-20221213140556282.png"></p>
<p>而作为曾经典型的响应式布局框架，<code>Bootstrap</code>是怎么进行断点的呢？</p>
<p><img src="/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/image-20221213140637166.png"></p>
<p>上面的分割方案不一定满足项目中的实际需求，我们可以先用跨度大的分割点进行分割，如果出现不适配的情况可以再根据实际情况增加新的分割点。</p>
<h4 id="3-移动优先-or-PC优先"><a href="#3-移动优先-or-PC优先" class="headerlink" title="3.移动优先 or PC优先"></a>3.移动优先 or PC优先</h4><p>不管是移动优先还是PC优先，都是依据当随着屏幕宽度增大或减小的时候，后面的样式会覆盖前面的样式。因此，移动端优先首先使用的是<code>min-width</code>，PC端优先使用的<code>max-width</code>。</p>
<p>移动优先：</p>
<pre><code class="css">/* iphone6 7 8 */
body &#123;
    background-color: yellow;
&#125;
/* iphone 5 */
@media screen and (max-width: 320px) &#123;
    body &#123;
      background-color: red;
    &#125;
&#125;
/* iphoneX */
@media screen and (min-width: 375px) and (-webkit-device-pixel-ratio: 3) &#123;
    body &#123;
      background-color: #0FF000;
    &#125;
&#125;
/* iphone6 7 8 plus */
@media screen and (min-width: 414px) &#123;
    body &#123;
      background-color: blue;
    &#125;
&#125;
/* ipad */
@media screen and (min-width: 768px) &#123;
    body &#123;
      background-color: green;
    &#125;
&#125;
/* ipad pro */
@media screen and (min-width: 1024px) &#123;
    body &#123;
      background-color: #FF00FF;
    &#125;
&#125;
/* pc */
@media screen and (min-width: 1100px) &#123;
    body &#123;
      background-color: black;
    &#125;
&#125;
</code></pre>
<p>pc优先：</p>
<pre><code class="css">/* pc width &gt; 1024px */
    body &#123;
        background-color: yellow;
    &#125;
/* ipad pro */
@media screen and (max-width: 1024px) &#123;
    body &#123;
        background-color: #FF00FF;
    &#125;
&#125;
/* ipad */
@media screen and (max-width: 768px) &#123;
    body &#123;
        background-color: green;
    &#125;
&#125;
/* iphone6 7 8 plus */
@media screen and (max-width: 414px) &#123;
    body &#123;
        background-color: blue;
    &#125;
&#125;
/* iphoneX */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 3) &#123;
    body &#123;
        background-color: #0FF000;
    &#125;
&#125;
/* iphone6 7 8 */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 2) &#123;
    body &#123;
        background-color: #0FF000;
    &#125;
&#125;
/* iphone5 */
@media screen and (max-width: 320px) &#123;
    body &#123;
        background-color: #0FF000;
    &#125;
&#125;
</code></pre>
<h4 id="4-百分比布局"><a href="#4-百分比布局" class="headerlink" title="4.百分比布局"></a>4.百分比布局</h4><p>通过百分比单位，可以使得浏览器中组件的宽和高随着浏览器的高度的变化而变化，从而实现响应式的效果。Bootstrap里面的栅格系统就是利用百分比来定义元素的宽高，<code>CSS3</code>支持最大最小高，可以将百分比和<code>max(min)</code>一起结合使用来定义元素在不同设备下的宽高。</p>
<pre><code class="css">/* pc width &gt; 1100px */
html, body &#123; margin: 0;padding: 0;width: 100%;height: 100%;&#125;
aside &#123;
    width: 10%;
    height: 100%;
    background-color: red;
    float: left;
&#125;
main &#123;
    height: 100%;
    background-color: blue;
    overflow: hidden;
&#125;
/* ipad pro */
@media screen and (max-width: 1024px) &#123;
    aside &#123;
      width: 8%;
      background-color: yellow;
    &#125;
&#125;
/* ipad */
@media screen and (max-width: 768px) &#123;
    aside &#123;
      float: none;
      width: 100%;
      height: 10%;
      background-color: green;
    &#125;
    main &#123;
      height: calc(100vh - 10%);
      background-color: red;
    &#125;
&#125;
/* iphone6 7 8 plus */
@media screen and (max-width: 414px) &#123;
    aside &#123;
      float: none;
      width: 100%;
      height: 5%;
      background-color: yellow;
    &#125;
    main &#123;
      height: calc(100vh - 5%);
      background-color: red;
    &#125;
&#125;
/* iphoneX */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 3) &#123;
    aside &#123;
      float: none;
      width: 100%;
      height: 10%;
      background-color: blue;
    &#125;
    main &#123;
      height: calc(100vh - 10%);
      background-color: red;
    &#125;
&#125;
/* iphone6 7 8 */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 2) &#123;
    aside &#123;
      float: none;
      width: 100%;
      height: 3%;
      background-color: black;
    &#125;
    main &#123;
      height: calc(100vh - 3%);
      background-color: red;
    &#125;
&#125;
/* iphone5 */
@media screen and (max-width: 320px) &#123;
    aside &#123;
      float: none;
      width: 100%;
      height: 7%;
      background-color: green;
    &#125;
    main &#123;
      height: calc(100vh - 7%);
      background-color: red;
    &#125;
&#125;
</code></pre>
<p>但是我们必须要弄清楚css中子元素的百分比到底是相对谁的百分比。</p>
<p>子元素的<code>height</code>或<code>width</code>中使用百分比，是相对于子元素的直接父元素，<code>width</code>相对于父元素的<code>width</code>，<code>height</code>相对于父元素的<code>height</code>；子元素的<code>top</code>和<code>bottom</code>如果设置百分比，则相对于直接非<code>static</code>定位(默认定位)的父元素的高度，同样子元素的<code>left</code>和<code>right</code>如果设置百分比，则相对于直接非<code>static</code>定位(默认定位的)父元素的宽度；子元素的<code>padding</code>如果设置百分比，不论是垂直方向或者是水平方向，都相对于直接父亲元素的<code>width</code>，而与父元素的<code>height</code>无关。跟<code>padding</code>一样，<code>margin</code>也是如此，子元素的<code>margin</code>如果设置成百分比，不论是垂直方向还是水平方向，都相对于直接父元素的<code>width</code>；<code>border-radius</code>不一样，如果设置<code>border-radius</code>为百分比，则是相对于自身的宽度，除了<code>border-radius</code>外，还有比如<code>translate</code>、<code>background-size</code>等都是相对于自身的；</p>
<p>从上述对于百分比单位的介绍我们很容易看出如果全部使用百分比单位来实现响应式的布局，有明显的以下两个缺点：</p>
<ul>
<li>计算困难，如果我们要定义一个元素的宽度和高度，按照设计稿，必须换算成百分比单位。</li>
<li>可以看出，各个属性中如果使用百分比，相对父元素的属性并不是唯一的。比如<code>width</code>和<code>height</code>相对于父元素的<code>width</code>和<code>height</code>，而<code>margin</code>、<code>padding</code>不管垂直还是水平方向都相对比父元素的宽度、<code>border-radius</code>则是相对于元素自身等等，造成我们使用百分比单位容易使布局问题变得复杂。</li>
</ul>
<h4 id="5-rem布局"><a href="#5-rem布局" class="headerlink" title="5.rem布局"></a>5.rem布局</h4><p><code>REM</code>是<code>CSS3</code>新增的单位，并且移动端的支持度很高，Android2.x+,ios5+都支持。<code>rem</code>单位都是相对于根元素html的<code>font-size</code>来决定大小的,根元素的<code>font-size</code>相当于提供了一个基准，当页面的size发生变化时，只需要改变<code>font-size</code>的值，那么以<code>rem</code>为固定单位的元素的大小也会发生响应的变化。 因此，如果通过<code>rem</code>来实现响应式的布局，只需要根据视图容器的大小，动态的改变<code>font-size</code>即可（而<code>em</code>是相对于父元素的）。</p>
<p><strong>rem响应式的布局思想：</strong></p>
<ul>
<li>一般不要给元素设置具体的宽度，但是对于一些小图标可以设定具体宽度值</li>
<li>高度值可以设置固定值，设计稿有多大，我们就严格有多大</li>
<li>所有设置的固定值都用<code>rem</code>做单位（首先在HTML总设置一个基准值：<code>px</code>和<code>rem</code>的对应比例，然后在效果图上获取<code>px</code>值，布局的时候转化为<code>rem</code>值)</li>
<li>js获取真实屏幕的宽度，让其除以设计稿的宽度，算出比例，把之前的基准值按照比例进行重新的设定，这样项目就可以在移动端自适应了。</li>
</ul>
<p><strong>rem布局的缺点：</strong></p>
<p>在响应式布局中，必须通过js来动态控制根元素<code>font-size</code>的大小，也就是说css样式和js代码有一定的耦合性，且必须将改变<code>font-size</code>的代码放在<code>css</code>样式之前</p>
<pre><code class="javascript">/*上述代码中将视图容器分为10份，font-size用十分之一的宽度来表示，最后在header标签中执行这段代码，就可以动态定义font-size的大小，从而1rem在不同的视觉容器中表示不同的大小，用rem固定单位可以实现不同容器内布局的自适应。*/
function refreshRem() &#123;
    var docEl = doc.documentElement;
    var width = docEl.getBoundingClientRect().width;
    var rem = width / 10;
    docEl.style.fontSize = rem + &#39;px&#39;;
    flexible.rem = win.rem = rem;
&#125;
win.addEventListener(&#39;resize&#39;, refreshRem);
</code></pre>
<p><code>REM</code>布局也是目前多屏幕适配的最佳方式。默认情况下我们html标签的<code>font-size</code>为16px,我们利用媒体查询，设置在不同设备下的字体大小。</p>
<pre><code class="css">/* pc width &gt; 1100px */
html&#123; font-size: 100%;&#125;
body &#123;
    background-color: yellow;
    font-size: 1.5rem;
&#125;
/* ipad pro */
@media screen and (max-width: 1024px) &#123;
    body &#123;
      background-color: #FF00FF;
      font-size: 1.4rem;
    &#125;
&#125;
/* ipad */
@media screen and (max-width: 768px) &#123;
    body &#123;
      background-color: green;
      font-size: 1.3rem;
    &#125;
&#125;
/* iphone6 7 8 plus */
@media screen and (max-width: 414px) &#123;
    body &#123;
      background-color: blue;
      font-size: 1.25rem;
    &#125;
&#125;
/* iphoneX */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 3) &#123;
    body &#123;
      background-color: #0FF000;
      font-size: 1.125rem;
    &#125;
&#125;
/* iphone6 7 8 */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 2) &#123;
    body &#123;
      background-color: #0FF000;
      font-size: 1rem;
    &#125;
&#125;
/* iphone5 */
@media screen and (max-width: 320px) &#123;
    body &#123;
      background-color: #0FF000;
      font-size: 0.75rem;
    &#125;
&#125;
</code></pre>
<h4 id="6-视口单位"><a href="#6-视口单位" class="headerlink" title="6.视口单位"></a>6.视口单位</h4><p><code>css3</code>中引入了一个新的单位<code>vw/vh</code>，与视图窗口有关，<code>vw</code>表示相对于视图窗口的宽度，<code>vh</code>表示相对于视图窗口高度，除了<code>vw</code>和<code>vh</code>外，还有<code>vmin</code>和<code>vmax</code>两个相关的单位。各个单位具体的含义如下：</p>
<table>
<thead>
<tr>
<th align="center">单位</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">vw</td>
<td align="center">相对于视窗的宽度，1vw 等于视口宽度的1%，即视窗宽度是100vw</td>
</tr>
<tr>
<td align="center">vh</td>
<td align="center">相对于视窗的高度，1vh 等于视口高度的1%，即视窗高度是100vh</td>
</tr>
<tr>
<td align="center">vmin</td>
<td align="center">vw和vh中的较小值</td>
</tr>
<tr>
<td align="center">vmax</td>
<td align="center">vw和vh中的较大值</td>
</tr>
</tbody></table>
<p><img src="/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/image-20221213142123454.png"></p>
<p>用视口单位度量，视口宽度为100vw，高度为100vh（左侧为竖屏情况，右侧为横屏情况）。例如，在桌面端浏览器视口尺寸为650px，那么 1vw &#x3D; 650 * 1% &#x3D; 6.5px（这是理论推算的出，如果浏览器不支持0.5px，那么实际渲染结果可能是7px）。</p>
<p>那么vw或者vh很类似百分比单位。vw和%的区别为：</p>
<table>
<thead>
<tr>
<th align="center">单位</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%</td>
<td align="center">大部分相对于祖先元素，也有相对于自身的情况比如（border-radius、translate等)</td>
</tr>
<tr>
<td align="center">vw&#x2F;vh</td>
<td align="center">相对于视窗的尺寸</td>
</tr>
</tbody></table>
<p>从对比中我们可以发现，<code>vw</code>单位与百分比类似，单确有区别，前面我们介绍了百分比单位的换算困难，这里的<code>vw</code>更像”理想的百分比单位”。任意层级元素，在使用<code>vw</code>单位的情况下，1vw都等于视图宽度的百分之一。</p>
<p>使用视口单位来实现响应式有两种做法：</p>
<h5 id="1-仅使用vw作为CSS单位"><a href="#1-仅使用vw作为CSS单位" class="headerlink" title="1.仅使用vw作为CSS单位"></a>1.仅使用vw作为CSS单位</h5><ul>
<li><p>对于设计稿的尺寸转换为为单位，我们使用<code>Sass</code>函数编译</p>
<pre><code class="css">//iPhone 6尺寸作为设计稿基准
$vm_base: 375; 
@function vw($px) &#123;
    @return ($px / 375) * 100vw;
&#125;
</code></pre>
</li>
<li><p>无论是文本还是布局宽度、间距等都使用<code>vw</code>作为单位</p>
<pre><code class="css">.mod_nav &#123;
    background-color: #fff;
    &amp;_list &#123;
        display: flex;
        padding: vm(15) vm(10) vm(10); // 内间距
        &amp;_item &#123;
            flex: 1;
            text-align: center;
            font-size: vm(10); // 字体大小
            &amp;_logo &#123;
                display: block;
                margin: 0 auto;
                width: vm(40); // 宽度
                height: vm(40); // 高度
                img &#123;
                    display: block;
                    margin: 0 auto;
                    max-width: 100%;
                &#125;
            &#125;
            &amp;_name &#123;
                margin-top: vm(2);
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
</li>
<li><p>1物理像素线（也就是普通屏幕下1px,高清屏幕下0.5px的情况）采用<code>transform</code>属性<code>scale</code>实现</p>
<pre><code class="css">.mod_grid &#123;
    position: relative;
    &amp;::after &#123;
        // 实现1物理像素的下边框线
        content: &#39;&#39;;
        position: absolute;
        z-index: 1;
        pointer-events: none;
        background-color: #ddd;
        height: 1px;
        left: 0;
        right: 0;
        top: 0;
        @media only screen and (-webkit-min-device-pixel-ratio: 2) &#123;
            -webkit-transform: scaleY(0.5);
            -webkit-transform-origin: 50% 0%;
        &#125;
    &#125;
    ...
&#125;
</code></pre>
</li>
<li><p>对于需要保持宽高比的图，应该用<code>padding-top</code>实现</p>
<pre><code class="css">.mod_banner &#123;
    position: relative;
    padding-top: percentage(100/700); // 使用padding-top
    height: 0;
    overflow: hidden;
    img &#123;
        width: 100%;
        height: auto;
        position: absolute;
        left: 0;
        top: 0; 
    &#125;
&#125;
</code></pre>
</li>
</ul>
<h5 id="2-搭配vw和rem"><a href="#2-搭配vw和rem" class="headerlink" title="2.搭配vw和rem"></a>2.搭配vw和rem</h5><p>虽然采用<code>vw</code>适配后的页面效果很好，但是它是利用视口单位实现的布局，依赖视口大小而自动缩放，无论视口过大还是过小，它也随着时候过大或者过小，失去了最大最小宽度的限制，此时我们可以结合<code>rem</code>来实现布局</p>
<ul>
<li><p>给根元素大小设置随着视口变化而变化的<code>vw</code>单位，这样就可以实现动态改变其大小</p>
</li>
<li><p>限制根元素字体大小的最大最小值，配合<code>body</code>加上最大宽度和最小宽度</p>
<pre><code class="scss">// rem 单位换算：定为 75px 只是方便运算，750px-75px、640-64px、1080px-108px，如此类推
$vm_fontsize: 75; // iPhone 6尺寸的根元素大小基准值
@function rem($px) &#123;
     @return ($px / $vm_fontsize ) * 1rem;
&#125;
// 根元素大小使用 vw 单位
$vm_design: 750;
html &#123;
    font-size: ($vm_fontsize / ($vm_design / 2)) * 100vw; 
    // 同时，通过Media Queries 限制根元素最大最小值
    @media screen and (max-width: 320px) &#123;
        font-size: 64px;
    &#125;
    @media screen and (min-width: 540px) &#123;
        font-size: 108px;
    &#125;
&#125;
// body 也增加最大最小宽度限制，避免默认100%宽度的 block 元素跟随 body 而过大过小
body &#123;
    max-width: 540px;
    min-width: 320px;
&#125;
</code></pre>
</li>
</ul>
<h4 id="7-图片响应式"><a href="#7-图片响应式" class="headerlink" title="7.图片响应式"></a>7.图片响应式</h4><p>这里的图片响应式包括两个方面，一个就是大小自适应，这样能够保证图片在不同的屏幕分辨率下出现压缩、拉伸的情况；一个就是根据不同的屏幕分辨率和设备像素比来尽可能选择高分辨率的图片，也就是当在小屏幕上不需要高清图或大图，这样我们用小图代替，就可以减少网络带宽了。</p>
<h5 id="1-使用max-width（图片自适应）"><a href="#1-使用max-width（图片自适应）" class="headerlink" title="1.使用max-width（图片自适应）:"></a>1.使用max-width（图片自适应）:</h5><p>图片自适应意思就是图片能随着容器的大小进行缩放，可以采用如下代码：</p>
<pre><code class="css">img &#123;
    display: inline-block;
    max-width: 100%;
    height: auto;
&#125;
</code></pre>
<p><code>inline-block</code> 元素相对于它周围的内容以内联形式呈现，但与内联不同的是，这种情况下我们可以设置宽度和高度。 <code>max-width</code>保证了图片能够随着容器的进行等宽扩充（即保证所有图片最大显示为其自身的 100%。此时，如果包含图片的元素比图片固有宽度小，图片会缩放占满最大可用空间），而<code>height</code>为<code>auto</code>可以保证图片进行等比缩放而不至于失真。如果是背景图片的话要灵活运用<code>background-size</code>属性。</p>
<p>那么为什么不能用<code>width：100%</code>呢？因为这条规则会导致它显示得跟它的容器一样宽。在容器比图片宽得多的情况下，图片会被无谓地拉伸。</p>
<h5 id="2-使用srcset"><a href="#2-使用srcset" class="headerlink" title="2.使用srcset"></a>2.使用srcset</h5><pre><code class="ini">&lt;img srcset=&quot;photo_w350.jpg 1x, photo_w640.jpg 2x&quot; src=&quot;photo_w350.jpg&quot; alt=&quot;&quot;&gt;
</code></pre>
<p>如果屏幕的dpi &#x3D; 1的话则加载1倍图，而dpi &#x3D; 2则加载2倍图，手机和mac基本上dpi都达到了2以上，这样子对于普通屏幕来说不会浪费流量，而对于视网膜屏来说又有高清的体验。</p>
<p>如果浏览器不支持<code>srcset</code>，则默认加载src里面的图片。</p>
<p>但是你会发现实际情况并不是如此，在Mac上的Chrome它会同时加载<code>srcset</code>里面的那张2x的，还会再去加载src里面的那张，加载两张图片。顺序是先把所有<code>srcset</code>里面的加载完了，再去加载src的。这个策略比较奇怪，它居然会加载两张图片，如果不写src，则不会加载两张，但是兼容性就没那么好。这个可能是因为浏览器认为，既然有<code>srcset</code>就不用写src了，如果写了src，用户可能是有用的。而使用<code>picture</code>就不会加载两张</p>
<h5 id="3-使用background-image"><a href="#3-使用background-image" class="headerlink" title="3.使用background-image"></a>3.使用background-image</h5><pre><code class="css">.banner&#123;
  background-image: url(/static/large.jpg);
&#125;

@media screen and (max-width: 767px)&#123;
  background-image: url(/static/small.jpg);
&#125;
</code></pre>
<h5 id="4-使用picture标签"><a href="#4-使用picture标签" class="headerlink" title="4.使用picture标签"></a>4.使用picture标签</h5><p><a href="https://link.juejin.im/?target=https://scottjehl.github.io/picturefill/">picturefill.min.js</a> ：解决IE等浏览器不支持 的问题</p>
<pre><code class="xml">&lt;picture&gt;
    &lt;source srcset=&quot;banner_w1000.jpg&quot; media=&quot;(min-width: 801px)&quot;&gt;
    &lt;source srcset=&quot;banner_w800.jpg&quot; media=&quot;(max-width: 800px)&quot;&gt;
    &lt;img src=&quot;banner_w800.jpg&quot; alt=&quot;&quot;&gt;
&lt;/picture&gt;

&lt;!-- picturefill.min.js 解决IE等浏览器不支持 &lt;picture&gt; 的问题 --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;js/vendor/picturefill.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p><code>picture</code>必须要写img标签，否则无法显示，对<code>pictur</code>e的操作最后都是在img上面，例如onload事件是在img标签触发的，<code>picture</code>和<code>source</code>是不会进行layout的，它们的宽和高都是0。</p>
<p>另外使用<code>source</code>，还可以对图片格式做一些兼容处理：</p>
<pre><code class="ini">&lt;picture&gt;
    &lt;source type=&quot;image/webp&quot; srcset=&quot;banner.webp&quot;&gt;
    &lt;img src=&quot;banner.jpg&quot; alt=&quot;&quot;&gt;
&lt;/picture&gt;
</code></pre>
<p><strong>总结</strong>：响应式布局的实现可以通过媒体查询+<code>px</code>,媒体查询+百分比，媒体查询+<code>rem</code>+<code>js</code>,<code>vm/vh</code>,<code>vm/vh</code> +<code>rem</code>这几种方式来实现。但每一种方式都是有缺点的，媒体查询需要选取主流设备宽度尺寸作为断点针对性写额外的样式进行适配，但这样做会比较麻烦，只能在选取的几个主流设备尺寸下呈现完美适配，另外用户体验也不友好，布局在响应断点范围内的分辨率下维持不变，而在响应断点切换的瞬间，布局带来断层式的切换变化，如同卡带的唱机般“咔咔咔”地一下又一下。通过百分比来适配首先是计算麻烦，第二各个属性中如果使用百分比，其相对的元素的属性并不是唯一的，这样就造成我们使用百分比单位容易使布局问题变得复杂。通过采用<code>rem</code>单位的动态计算的弹性布局，则是需要在头部内嵌一段脚本来进行监听分辨率的变化来动态改变根元素字体大小，使得<code>CSS</code>与<code>JS</code> 耦合了在一起。通过利用纯<code>css</code>视口单位实现适配的页面，是既能解决响应式断层问题，又能解决脚本依赖的问题的，但是兼容性还没有完全能结构接受。</p>
<h3 id="四、响应式布局的成型方案"><a href="#四、响应式布局的成型方案" class="headerlink" title="四、响应式布局的成型方案"></a>四、响应式布局的成型方案</h3><p>现在的css，UI框架等都已经考虑到了适配不同屏幕分辨率的问题，实际项目中我们可以直接使用这些新特性和框架来实现响应式布局。可以有以下选择方案：</p>
<ul>
<li>利用上面的方法自己来实现，比如CSS3 Media Query,rem，vw等</li>
<li>Flex弹性布局，兼容性较差</li>
<li>Grid网格布局，兼容性较差</li>
<li>Columns栅格系统，往往需要依赖某个UI库，如Bootstrap</li>
</ul>
<h3 id="五、响应式布局的要点"><a href="#五、响应式布局的要点" class="headerlink" title="五、响应式布局的要点"></a>五、响应式布局的要点</h3><p>在实际项目中，我们可能需要综合上面的方案，比如用<code>rem</code>来做字体的适配，用<code>srcset</code>来做图片的响应式，宽度可以用<code>rem</code>，<code>flex</code>，栅格系统等来实现响应式，然后可能还需要利用媒体查询来作为响应式布局的基础，因此综合上面的实现方案，项目中实现响应式布局需要注意下面几点：</p>
<ul>
<li>设置viewport</li>
<li>媒体查询</li>
<li>字体的适配（字体单位）</li>
<li>百分比布局</li>
<li>图片的适配（图片的响应式）</li>
<li>结合flex，grid，BFC，栅格系统等已经成型的方案</li>
</ul>
<h3 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h3><p>[响应式设计]: 	“<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903814332432397">https://juejin.cn/post/6844903814332432397</a> “</p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://mengfeng.github.io/2022/12/13/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag">响应式</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/12/14/chatGPT%E6%B3%A8%E5%86%8C/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            chatGPT注册
          
        </div>
      </a>
    
    
      <a href="/2022/12/09/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">如何设计一个组件</div>
      </a>
    
  </nav>

  
   
<div class="gitalk" id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.css">


<script src="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.js"></script>


<script src="https://cdn.staticfile.org/blueimp-md5/2.19.0/js/md5.min.js"></script>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '6887374e7666a97fd4dc',
    clientSecret: '09a8e143dd4a3f5d11311e1435842321e063157d',
    repo: 'mengfeng.github.io',
    owner: 'mengfeng',
    admin: ['mengfeng'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last'
  })

  gitalk.render('gitalk-container')
</script>

     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2023
        <i class="ri-heart-fill heart_icon"></i> alan_mf
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="艺术码畜"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://www.zcool.com.cn/u/21686563">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/player">播放器</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/zfb.jpeg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wx.jpeg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=22707008&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>