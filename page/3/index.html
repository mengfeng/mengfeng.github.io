<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> è‰ºæœ¯ç ç•œ</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G16F14RTRN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-G16F14RTRN');
</script>

 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?f5e6c5b5d28b6bff1c9eb1fcf7f6862b";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="è‰ºæœ¯ç ç•œ" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/mengfeng/mengfeng.github.io.git"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">è‰ºæœ¯ç ç•œ</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€', 'æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±', 'æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  
<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content">è‰ºæœ¯ç ç•œçš„ç”Ÿæ´»ç¬é—´</div>
</div>


<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-playcanvasåˆçº§"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/"
    >playcanvasåˆçº§</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/" class="article-date">
  <time datetime="2022-12-04T13:01:02.000Z" itemprop="datePublished">2022-12-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/playcanvas/">playcanvas</a> / <a class="article-category-link" href="/categories/Web3D/playcanvas/playcanvas%E5%88%9D%E7%BA%A7/">playcanvasåˆçº§</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="playcanvasåˆçº§"><a href="#playcanvasåˆçº§" class="headerlink" title="playcanvasåˆçº§"></a>playcanvasåˆçº§</h1><blockquote>
<p>æˆ‘ä»¬åœ¨å¼€å§‹æœ¬æ–‡ç« ä¹‹å‰ï¼Œæ¨èå¤§å®¶ä¸€ä¸ªå°å·¥å…·ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨æ²¹ç®¡ä¸Šçœ‹è‹±æ–‡è§†é¢‘</p>
<p>YouTubeâ„¢ åŒå­—å¹•</p>
<p>æˆ‘ä»¬é€šè¿‡YouTubeä¸Š<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=fXc-JjH2nNo&list=PLGmYIROty-5ZX-a88X8ztUeYSPeuBj7rG">Daniel Wood</a>åšä¸»çš„playcanvasè§†é¢‘æ¥æµ…å…¥ä¸€ä¸‹ï¼ˆçœ‹ç€æ–‡ç« æ¥æ¢³ç†è§†é¢‘å†…å®¹é£Ÿç”¨æ›´ä½³å“¦ï¼ï¼‰</p>
</blockquote>
<h3 id="startï¼šå·¥å…·ä¸‹è½½"><a href="#startï¼šå·¥å…·ä¸‹è½½" class="headerlink" title="startï¼šå·¥å…·ä¸‹è½½"></a>startï¼šå·¥å…·ä¸‹è½½</h3><blockquote>
<p>YouTubeâ„¢ åŒå­—å¹•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ·»åŠ åŒè¯­å­—å¹•</p>
<p>å®‰è£…æ­¥éª¤ï¼šè°·æ­Œæµè§ˆå™¨-&gt;è®¾ç½®-&gt;æ‰©å±•ç¨‹åº-&gt;æ‰“å¼€åº”ç”¨å•†åº—-&gt;æŸ¥æ‰¾-&gt;å®‰è£…</p>
</blockquote>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204161502349.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204161617072.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204161720108.png"></p>
<blockquote>
<p>ä¸‹è½½å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨æ‰©å±•ç¨‹åºå›¾æ ‡ä¸Šå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœä¸èµ·æ•ˆæœï¼Œè¯·é‡æ–°æ‰“å¼€æµè§ˆå™¨</p>
</blockquote>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204162049453.png"></p>
<h3 id="ä¸€ã€ç¬¬ä¸€è¯¾ï¼ˆGetting-started-with-PlayCanvasï¼‰"><a href="#ä¸€ã€ç¬¬ä¸€è¯¾ï¼ˆGetting-started-with-PlayCanvasï¼‰" class="headerlink" title="ä¸€ã€ç¬¬ä¸€è¯¾ï¼ˆGetting started with PlayCanvasï¼‰"></a>ä¸€ã€ç¬¬ä¸€è¯¾ï¼ˆGetting started with PlayCanvasï¼‰</h3><blockquote>
<p>æˆ‘ä»¬ç¬¬ä¸€è¯¾å…ˆæ¥ç®€å•ä½¿ç”¨ä¸€ä¸‹æˆ‘ä»¬çš„å¯è§†åŒ–å¹³å°</p>
</blockquote>
<p>ç¬¬ä¸€èŠ‚è¯¾ä¸»è¦æ˜¯ç†Ÿæ‚‰æˆ‘ä»¬çš„å¯è§†åŒ–é¢æ¿ï¼Œä¸Šä¸€ç¯‡<a href="https://mengfeng.github.io/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/">playcanvasåˆè¯†</a>æœ‰è®²è§£ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥çœ‹çœ‹æˆ‘ä»¬çš„ç¬¬ä¸€è¯¾çš„è§†é¢‘çš„</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204174020956.png"></p>
<h3 id="äºŒã€ç¬¬äºŒè¯¾ï¼ˆEntities-and-materialsï¼‰"><a href="#äºŒã€ç¬¬äºŒè¯¾ï¼ˆEntities-and-materialsï¼‰" class="headerlink" title="äºŒã€ç¬¬äºŒè¯¾ï¼ˆEntities and materialsï¼‰"></a>äºŒã€ç¬¬äºŒè¯¾ï¼ˆEntities and materialsï¼‰</h3><blockquote>
<p>å®ä½“å’Œæè´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®ä½“å°±æ˜¯æˆ‘ä»¬ç¼–è¾‘å™¨é‡Œé¢çš„æ–¹å—ã€å¹³é¢ç­‰å‡ ä½•ä½“</p>
<p>æè´¨æ˜¯æˆ‘ä»¬å®ä½“éœ€è¦ç»“åˆçš„å±æ€§</p>
</blockquote>
<p>1.å½“æˆ‘ä»¬åˆ›å»ºæè´¨èµ„æºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†æˆä¸€ä¸ªç»„ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä»¥åå»ç®¡ç†æˆ‘ä»¬çš„æè´¨</p>
<p>2.æˆ‘ä»¬çš„è´´å›¾ï¼Œé‚£äº›å±æ€§ï¼Œæˆ‘å»ºè®®å…ˆå»çœ‹çœ‹Three.jsçš„æ•™ç¨‹å§ï¼Œæˆ–è€…æœ‰ä¸‰ç»´è½¯ä»¶çš„ä½¿ç”¨åŸºç¡€ä¹Ÿæ˜¯å®¹æ˜“ç†è§£çš„ï¼Œå¦‚æœä¸å…·å¤‡è¿™äº›åŸºç¡€æ¦‚å¿µå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰çš„<a href="https://mengfeng.github.io/categories/">threejs</a>çš„æ–‡ç« </p>
<p>3.ç®€å•çš„èµ‹äºˆå®ä½“æè´¨çš„æ­¥éª¤å°±æ˜¯å¦‚ä¸‹å›¾ï¼ˆè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼‰</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204175100109.png"></p>
<p>4.è¿™èŠ‚è¯¾è§†é¢‘ä¸»è¦è®²çš„æ˜¯è´´å›¾å’Œæè´¨å’Œæˆ‘ä»¬æè´¨çš„ä¸€ç³»åˆ—å±æ€§ï¼ˆä¸æ˜¯apiï¼‰</p>
<p>5.ç‚¹å‡»æˆ‘ä»¬çš„Cameraï¼ˆæ‘„åƒæœºï¼‰è°ƒèŠ‚è§’åº¦ï¼Œç‚¹å‡»ç•Œé¢å³ä¸Šè§’çš„Launchå°±å¯ä»¥æ¸²æŸ“æˆ‘ä»¬çš„ç”»é¢äº†</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204180337214.png"></p>
<h3 id="ä¸‰ã€ç¬¬ä¸‰è¯¾ï¼ˆLightingï¼‰"><a href="#ä¸‰ã€ç¬¬ä¸‰è¯¾ï¼ˆLightingï¼‰" class="headerlink" title="ä¸‰ã€ç¬¬ä¸‰è¯¾ï¼ˆLightingï¼‰"></a>ä¸‰ã€ç¬¬ä¸‰è¯¾ï¼ˆLightingï¼‰</h3><blockquote>
<p>æˆ‘ä»¬çš„ç¯å…‰ä¹Ÿæ˜¯æœ‰3ç§ï¼Œå¹³è¡Œå…‰ã€ç‚¹å…‰æºã€èšå…‰ç¯</p>
<p>è¿™èŠ‚è¯¾é™¤äº†è®²è§£å‡ ç§ç¯å…‰çš„å±æ€§ä¹‹å¤–ï¼Œä¹Ÿæœ‰ç¯å…‰ä¸é˜´å½±çš„å…³ç³»</p>
</blockquote>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204181635026.png"></p>
<p>èšå…‰ç¯æ•ˆæœï¼Œæˆ‘ä»¬åœ¨å³è¾¹çš„å±æ€§æ ä¹Ÿå¯ä»¥å»ä¿®æ”¹æˆ‘ä»¬èšå…‰ç¯çš„å…¶ä»–å±æ€§</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204183234836.png"></p>
<p>ç‚¹å…‰æºæ•ˆæœï¼ˆå¯ä»¥çœ‹æˆä¸€ä¸ªç¯æ³¡ï¼‰</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204183435845.png"></p>
<h3 id="å››ã€ç¬¬å››è¯¾ï¼ˆSkyboxes-in-PlayCanvasï¼‰"><a href="#å››ã€ç¬¬å››è¯¾ï¼ˆSkyboxes-in-PlayCanvasï¼‰" class="headerlink" title="å››ã€ç¬¬å››è¯¾ï¼ˆSkyboxes in PlayCanvasï¼‰"></a>å››ã€ç¬¬å››è¯¾ï¼ˆSkyboxes in PlayCanvasï¼‰</h3><blockquote>
<p>ä¸»è¦å±•ç¤ºå¦‚ä½•æ·»åŠ å¤©ç©ºè´´å›¾</p>
<p>æˆ‘ä»¬çš„è´´å›¾å°±æ˜¯ä»è¿™é‡Œä¸‹è½½çš„ï¼Œå¯ä»¥å»è¯•è¯•</p>
<p>[è´´å›¾çº¹ç†]: 	â€œ<a target="_blank" rel="noopener" href="http://www.humus.name/index.php?page=Textures">http://www.humus.name/index.php?page=Textures</a> â€œ</p>
</blockquote>
<p>å…·ä½“çš„æ­¥éª¤æ€»ç»“ï¼š</p>
<p>âš ï¸æ³¨æ„ï¼šè¿˜æ˜¯çœ‹è§†é¢‘è¯¦ç»†ï¼Œè¿™åªæ˜¯æ€»ç»“ä¸€ä¸‹å“ˆå“ˆå“ˆ</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204184930487.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204185140511.png"></p>
<h3 id="äº”ã€ç¬¬äº”è¯¾ï¼ˆParticle-systems-in-PlayCanvasï¼‰"><a href="#äº”ã€ç¬¬äº”è¯¾ï¼ˆParticle-systems-in-PlayCanvasï¼‰" class="headerlink" title="äº”ã€ç¬¬äº”è¯¾ï¼ˆParticle systems in PlayCanvasï¼‰"></a>äº”ã€ç¬¬äº”è¯¾ï¼ˆParticle systems in PlayCanvasï¼‰</h3><blockquote>
<p>è¿™èŠ‚è¯¾çš„ä¸œè¥¿æˆ‘æ¯”è¾ƒå–œæ¬¢ï¼Œç²’å­ç³»ç»Ÿï¼ˆä¼šç”Ÿæˆç²’å­å’Œç²’å­åŠ¨ç”»ï¼‰</p>
</blockquote>
<p>å…·ä½“çš„æ­¥éª¤æ€»ç»“ï¼š</p>
<p>è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œåˆ°äº†åé¢ï¼Œè¿™ä¸ªä¼šç”Ÿæˆå¾ˆå¤šæƒŠè‰³çš„åŠ¨ç”»æ•ˆæœ</p>
<p>âš ï¸æ³¨æ„ï¼šè¿™ä¸ªå±æ€§æ¯”è¾ƒå¤šï¼Œè®¤çœŸçœ‹</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204185753349.png"></p>
<h3 id="å…­ã€ç¬¬å…­è¯¾ï¼ˆOverview-of-scripts-in-PlayCanvasï¼‰"><a href="#å…­ã€ç¬¬å…­è¯¾ï¼ˆOverview-of-scripts-in-PlayCanvasï¼‰" class="headerlink" title="å…­ã€ç¬¬å…­è¯¾ï¼ˆOverview of scripts in PlayCanvasï¼‰"></a>å…­ã€ç¬¬å…­è¯¾ï¼ˆOverview of scripts in PlayCanvasï¼‰</h3><blockquote>
<p>è¿™èŠ‚è¯¾æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œå°±æ˜¯è®²è§£ä¸€ä¸‹æˆ‘ä»¬scriptèµ„æºæ–‡ä»¶çš„æ„é€ ï¼ˆç»™æ²¡æœ‰javaScriptåŸºç¡€çš„åŒå­¦è®²çš„ï¼‰</p>
<p>æœ‰åŸºç¡€çš„åŒå­¦å¯ä»¥å¿«é€Ÿç•¥è¿‡äº†</p>
</blockquote>
<p>å…·ä½“çš„æ­¥éª¤æ€»ç»“ï¼š</p>
<p>ä¸»è¦æ˜¯è®²ä¸€ä¸‹scriptèµ„æºçš„æ“ä½œ</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204190611547.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204190818807.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204191338719.png"></p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204191641346.png"></p>
<h3 id="ä¸ƒã€ç¬¬ä¸ƒè¯¾ï¼ˆMake-a-3D-object-move-with-codeï¼‰"><a href="#ä¸ƒã€ç¬¬ä¸ƒè¯¾ï¼ˆMake-a-3D-object-move-with-codeï¼‰" class="headerlink" title="ä¸ƒã€ç¬¬ä¸ƒè¯¾ï¼ˆMake a 3D object move with codeï¼‰"></a>ä¸ƒã€ç¬¬ä¸ƒè¯¾ï¼ˆMake a 3D object move with codeï¼‰</h3><blockquote>
<p>è¿™èŠ‚è¯¾å¼€å§‹å°±è¦ç¼–å†™jsè„šæœ¬æ–‡ä»¶äº†</p>
<p>é€šè¿‡æˆ‘ä»¬ä¸‹é¢çš„è„šæ­¥ç¼–è¯‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¸²æŸ“å‡ºæ–¹å—æ¸è¡Œæ¸è¿œçš„åŠ¨ç”»äº†</p>
<p>å…·ä½“çš„APIæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢<a target="_blank" rel="noopener" href="https://developer.playcanvas.com/api/pc.Entity.html">æ–‡æ¡£</a>äº†</p>
</blockquote>
<pre><code class="javascript">//test.js
var Test = pc.createScript(&#39;test&#39;);
var Move = function(entity)&#123;
  this.entity = entity;
&#125;
// initialize code called once per entity
Test.prototype.initialize = function() &#123;
    
&#125;;

// update code called every frame
Test.prototype.update = function(dt) &#123;
    this.entity.translateLocal(-0.01,0,0);
&#125;;

// swap method called for script hot-reloading
// inherit your script state here
// Test.prototype.swap = function(old) &#123; &#125;;

// to learn more about script anatomy, please read:
// https://developer.playcanvas.com/en/user-manual/scripting/
</code></pre>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204192521888.png"></p>
<h3 id="å…«ã€ç¬¬å…«è¯¾ï¼ˆMoving-objects-with-keyboard-inputï¼‰"><a href="#å…«ã€ç¬¬å…«è¯¾ï¼ˆMoving-objects-with-keyboard-inputï¼‰" class="headerlink" title="å…«ã€ç¬¬å…«è¯¾ï¼ˆMoving objects with keyboard inputï¼‰"></a>å…«ã€ç¬¬å…«è¯¾ï¼ˆMoving objects with keyboard inputï¼‰</h3><blockquote>
<p>åˆ©ç”¨é”®ç›˜çš„æŒ‰é”®æ¥æ§åˆ¶æˆ‘ä»¬å®ä½“çš„ç§»åŠ¨ã€æ—‹è½¬ç­‰</p>
<p>å»ºè®®ä¸è¦è·Ÿç€è§†é¢‘çš„å†™æ³•æ¥ç»ƒä¹ ï¼Œè¦è‡ªå·±å»æŸ¥æ–‡æ¡£ï¼Œå› ä¸ºè§†é¢‘å·²ç»æœ‰ç‚¹é™ˆæ—§äº†</p>
<p>apiéƒ½æœ‰æ‰€å˜åŒ–</p>
</blockquote>
<p>æˆ‘ä»¬çš„è„šæœ¬å®ç°çš„æ˜¯åˆ©ç”¨é”®ç›˜çš„ä¸Šä¸‹å·¦å³æ¥æ§åˆ¶å®ä½“çš„ä¸Šä¸‹å·¦å³</p>
<pre><code class="javascript">//test.js
var Test = pc.createScript(&#39;test&#39;);
var keyboard = new pc.Keyboard(window);
var Move = function(entity)&#123;
  this.entity = entity;
&#125;
// initialize code called once per entity
Test.prototype.initialize = function() &#123;
    
&#125;;

// update code called every frame
Test.prototype.update = function(dt) &#123;
   if(keyboard.isPressed(pc.KEY_RIGHT))&#123;
       this.entity.translate(0.01,0,0);
   &#125;
    if(keyboard.isPressed(pc.KEY_LEFT))&#123;
       this.entity.translate(-0.01,0,0);
   &#125;
    if(keyboard.isPressed(pc.KEY_UP))&#123;
       this.entity.translate(0,0,-0.01);
   &#125;
    if(keyboard.isPressed(pc.KEY_DOWN))&#123;
       this.entity.translate(0,0,0.01);
   &#125;
&#125;;

// swap method called for script hot-reloading
// inherit your script state here
// Test.prototype.swap = function(old) &#123; &#125;;

// to learn more about script anatomy, please read:
// https://developer.playcanvas.com/en/user-manual/scripting/
</code></pre>
<h3 id="ä¹ã€ç¬¬ä¹è¯¾ï¼ˆRotating-objects-with-keyboard-inputï¼‰"><a href="#ä¹ã€ç¬¬ä¹è¯¾ï¼ˆRotating-objects-with-keyboard-inputï¼‰" class="headerlink" title="ä¹ã€ç¬¬ä¹è¯¾ï¼ˆRotating objects with keyboard inputï¼‰"></a>ä¹ã€ç¬¬ä¹è¯¾ï¼ˆRotating objects with keyboard inputï¼‰</h3><blockquote>
<p>è¿™èŠ‚è¯¾å’Œä¸ŠèŠ‚è¯¾çš„å†…å®¹å·®ä¸å¤šï¼Œå°±æ˜¯åˆ©ç”¨é”®ç›˜æŒ‰é”®å»æ§åˆ¶å®ä½“çš„å…¶ä»–å±æ€§</p>
<p>æ•™jsé›¶åŸºç¡€çš„åŒå­¦ä¸€ä¸‹å˜é‡çš„åŸºç¡€å†™æ³•ï¼ˆå¯ä»¥å¿«é€Ÿç•¥è¿‡äº†å“ˆå“ˆå“ˆï¼Œè¿˜å¾—æ‰«ä¸€çœ¼å“ˆï¼‰</p>
</blockquote>
<h3 id="åã€ç¬¬åè¯¾ï¼ˆRigid-Bodies-and-Collision-in-PlayCanvasï¼‰"><a href="#åã€ç¬¬åè¯¾ï¼ˆRigid-Bodies-and-Collision-in-PlayCanvasï¼‰" class="headerlink" title="åã€ç¬¬åè¯¾ï¼ˆRigid Bodies and Collision in PlayCanvasï¼‰"></a>åã€ç¬¬åè¯¾ï¼ˆRigid Bodies and Collision in PlayCanvasï¼‰</h3><blockquote>
<p>PlayCanvasä¸­çš„åˆšä½“å’Œç¢°æ’è¿™èŠ‚è¯¾çš„çŸ¥è¯†ç‚¹è¿˜æ˜¯å¯ä»¥çš„</p>
<p>å¤§ä½“æ˜¯è®²ç‰©ä½“ç¢°æ’çš„å±æ€§å’Œè¿åŠ¨</p>
</blockquote>
<p>æ ¹æ®æ­¥éª¤å¯ä»¥å®ç°ç¢°æ’</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204204506027.png"></p>
<h3 id="åä¸€ã€ç¬¬åä¸€è¯¾ï¼ˆAdding-sound-to-your-gameï¼‰"><a href="#åä¸€ã€ç¬¬åä¸€è¯¾ï¼ˆAdding-sound-to-your-gameï¼‰" class="headerlink" title="åä¸€ã€ç¬¬åä¸€è¯¾ï¼ˆAdding sound to your gameï¼‰"></a>åä¸€ã€ç¬¬åä¸€è¯¾ï¼ˆAdding sound to your gameï¼‰</h3><blockquote>
<p>æˆ‘ä»¬çš„æ¸¸æˆè¿›å»æ˜¯ä¸æ˜¯æœ‰èƒŒæ™¯éŸ³ä¹å‘€ï¼Œè¿™èŠ‚è¯¾å°±æ˜¯å°†èƒŒæ™¯éŸ³ä¹åŠ è½½è¿›æ¥</p>
<p>Audio Listenerå¯ä»¥ç®€å•çš„è¯´åƒè€³æœµä¸€æ ·ï¼Œå¯ä»¥å¬è§é™„è¿‘çš„å£°éŸ³</p>
</blockquote>
<p>å¤§ä½“æ­¥éª¤å¦‚ä¸‹ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘äº†ï¼ˆè¿˜æœ‰è®¸å¤šç»†èŠ‚ï¼‰</p>
<p><img src="/2022/12/04/playcanvas%E5%88%9D%E7%BA%A7/image-20221204205445304.png"></p>
<h3 id="åäºŒã€ç¬¬åäºŒè¯¾ï¼ˆControlling-audio-with-scriptsï¼‰"><a href="#åäºŒã€ç¬¬åäºŒè¯¾ï¼ˆControlling-audio-with-scriptsï¼‰" class="headerlink" title="åäºŒã€ç¬¬åäºŒè¯¾ï¼ˆControlling audio with scriptsï¼‰"></a>åäºŒã€ç¬¬åäºŒè¯¾ï¼ˆControlling audio with scriptsï¼‰</h3><blockquote>
<p>è¿™èŠ‚è¯¾å°±æ˜¯å»¶ç»­ä¸Šé¢çš„ï¼Œå¯¹äºaudioçš„å±æ€§è®²è§£å’Œè„šæœ¬ç¼–å†™äº†ï¼Œ</p>
<p>è¿™ä¸ªä»»åŠ¡äº¤ç»™ä½ ä»¬äº†ï¼Œå†™å¥½è¯„è®ºï¼Œç»™ä½ ç‚¹å¤§èµğŸ‘</p>
</blockquote>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[playcanvasåˆçº§æ•™ç¨‹]: 	â€œ<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=fXc-JjH2nNo&amp;list=PLGmYIROty-5ZX-a88X8ztUeYSPeuBj7rG">https://www.youtube.com/watch?v=fXc-JjH2nNo&amp;list=PLGmYIROty-5ZX-a88X8ztUeYSPeuBj7rG</a> â€œ<br>[playcanvaså®˜ç½‘API]: 	â€œ<a target="_blank" rel="noopener" href="https://developer.playcanvas.com/en/api/">https://developer.playcanvas.com/en/api/</a> â€œ<br>[playcanvasä¸­æ–‡]: 	â€œ<a target="_blank" rel="noopener" href="https://developer.playcanvas.com/zh/">https://developer.playcanvas.com/zh/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/playcanvas/" rel="tag">playcanvas</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-playcanvasåˆè¯†"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/"
    >playcanvasåˆè¯†</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/" class="article-date">
  <time datetime="2022-12-03T08:31:14.000Z" itemprop="datePublished">2022-12-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/playcanvas/">playcanvas</a> / <a class="article-category-link" href="/categories/Web3D/playcanvas/playcanvas%E5%88%9D%E8%AF%86/">playcanvasåˆè¯†</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="playcanvasï¼ˆåŸºäºWebGLçš„æ¸¸æˆå¼•æ“ï¼‰"><a href="#playcanvasï¼ˆåŸºäºWebGLçš„æ¸¸æˆå¼•æ“ï¼‰" class="headerlink" title="playcanvasï¼ˆåŸºäºWebGLçš„æ¸¸æˆå¼•æ“ï¼‰"></a>playcanvasï¼ˆåŸºäºWebGLçš„æ¸¸æˆå¼•æ“ï¼‰</h1><p>PlayCanvas æ˜¯ä¸€æ¬¾ä½¿ç”¨ HTML5 å’Œ WebGL æŠ€æœ¯è¿è¡Œæ¸¸æˆä»¥åŠå…¶ä»– 3D å†…å®¹çš„å¼€æºæ¸¸æˆå¼•æ“ï¼ŒPlayCanvas ä»¥å…¶ç‹¬ç‰¹çš„æ€§èƒ½å®ç°äº†åœ¨ä»»ä½•æ‰‹æœºç§»åŠ¨ç«¯å’Œæ¡Œé¢æµè§ˆå™¨ç«¯å‡å¯ä»¥æµç•…è¿è¡Œã€‚</p>
<p>PlayCanvas å¼•æ“æ˜¯ä¸€æ¬¾å¯ä»¥åŸºäºæµè§ˆå™¨çš„ç”¨äºåˆ¶ä½œæ¸¸æˆä»¥åŠ 3D å¯è§†åŒ–çš„å¼€æºå¼•æ“ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¼€å‘äº†<a target="_blank" rel="noopener" href="https://playcanvas.com/">PlayCanvas å¼€å‘å¹³å°</a>ï¼Œ ä¸ºç”¨æˆ·æä¾›äº†å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œèµ„æºç®¡ç†ï¼Œä»£ç ç¼–è¾‘ï¼Œä»£ç æ‰˜ç®¡ä»¥åŠå‘å¸ƒç­‰æœåŠ¡ã€‚</p>
<blockquote>
<p>ç›®å‰ä¸­æ–‡çš„æ•™ç¨‹å¾ˆå°‘ï¼Œæ‰€ä»¥è‹±è¯­å¥½çš„åŒå­¦å¯ä»¥å»çœ‹ä¸€ä¸‹å›½å¤–çš„é‚£äº›æ•™ç¨‹ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰<a target="_blank" rel="noopener" href="https://developer.playcanvas.com/zh/">ä¸­æ–‡æ–‡æ¡£</a>çš„ã€‚</p>
</blockquote>
<p>å¯è§†åŒ–å¹³å°æ“ä½œä¸Šå€’æ˜¯æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œå°±æ˜¯å’Œæ­£å¸¸çš„å»ºæ¨¡æ“ä½œå¤§åŒå°å¼‚ï¼Œä¸€ä¸ªå¯è§†åŒ–çš„ä¸€ä¸ªæ“ä½œå¹³å°ï¼Œå¯ä»¥è¿›ä¸€æ­¥çš„æé«˜æˆ‘ä»¬å·¥ä½œçš„æ•ˆç‡å§ã€‚</p>
<h3 id="ä¸€ã€æ³¨å†Œè´¦æˆ·"><a href="#ä¸€ã€æ³¨å†Œè´¦æˆ·" class="headerlink" title="ä¸€ã€æ³¨å†Œè´¦æˆ·"></a>ä¸€ã€æ³¨å†Œè´¦æˆ·</h3><blockquote>
<p>æ³¨å†Œè´¦æˆ·çš„æ–¹å¼å¾ˆç®€å•ï¼Œæ ¹æ®æç¤ºå»æ³¨å†Œå°±å¯ä»¥äº†</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203152809943.png"></p>
<h3 id="äºŒã€æ–°å»ºé¡¹ç›®"><a href="#äºŒã€æ–°å»ºé¡¹ç›®" class="headerlink" title="äºŒã€æ–°å»ºé¡¹ç›®"></a>äºŒã€æ–°å»ºé¡¹ç›®</h3><blockquote>
<p>1.æˆ‘ä»¬ç‚¹å‡»NEWï¼Œå³å¯åˆ›å»ºæ–°é¡¹ç›®</p>
<p>2.ç‚¹å‡»æˆ‘ä»¬çš„é¡¹ç›®å°±å¯ä»¥è¿›å…¥é¡¹ç›®ç•Œé¢</p>
<p>3.ç‚¹å‡»EDITORå°±å¯ä»¥è¿›å…¥å¯è§†åŒ–æ“ä½œå¹³å°ï¼Œå»æ“ä½œæˆ‘ä»¬çš„é¡¹ç›®</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203153658606.png"></p>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203153755107.png"></p>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203152450815.png"></p>
<h3 id="ä¸‰ã€å¯¼å‡ºé¡¹ç›®"><a href="#ä¸‰ã€å¯¼å‡ºé¡¹ç›®" class="headerlink" title="ä¸‰ã€å¯¼å‡ºé¡¹ç›®"></a>ä¸‰ã€å¯¼å‡ºé¡¹ç›®</h3><blockquote>
<p>1.å¯¼å‡ºé¡¹ç›®å‰ï¼Œæˆ‘ä»¬å¾—å…ˆpulish</p>
<p>2.ç‚¹å‡»ä¸‹è½½ .zip åŒ…</p>
<p>3.å°†åŒ…ç”¨vsCodeæ‰“å¼€ï¼Œè¿è¡Œindex.html</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203155914469.png"></p>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203160109159.png"></p>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203160208211.png"></p>
<h3 id="å››ã€å…¶ä»–ç•Œé¢èœå•"><a href="#å››ã€å…¶ä»–ç•Œé¢èœå•" class="headerlink" title="å››ã€å…¶ä»–ç•Œé¢èœå•"></a>å››ã€å…¶ä»–ç•Œé¢èœå•</h3><p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203160737778.png"></p>
<h4 id="1-å·¥å…·æ å’Œèœå•æ "><a href="#1-å·¥å…·æ å’Œèœå•æ " class="headerlink" title="1.å·¥å…·æ å’Œèœå•æ "></a>1.å·¥å…·æ å’Œèœå•æ </h4><blockquote>
<p>ç‚¹å‡» PLAYCANVAS å›¾æ ‡ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„å¯ç”¨åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›åŠŸèƒ½ç¼–è¾‘åœºæ™¯ã€‚å¦‚æœæ‰¾ä¸åˆ°æŸä¸ªæŒ‰é’®æˆ–è€…å¿«æ·é”®ï¼Œè‚¯å®šæ˜¯èƒ½åœ¨èœå•é‡Œæ‰¾åˆ°å¯¹åº”åŠŸèƒ½çš„ã€‚</p>
<p>å·¥å…·æ æä¾›å¿«æ·è®¿é—®çš„å¸¸ç”¨åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…å«æœ€é‡è¦çš„è¿è¡ŒæŒ‰é’®ã€‚è¿è¡ŒæŒ‰é’®ä¼šåœ¨ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨çª—å£ä¸­å¯åŠ¨æ¸¸æˆå¹¶ä¸”åŠ è½½å½“å‰çš„åœºæ™¯ï¼Œå¯ä»¥ç«‹å³å¼€å§‹æ¸¸æˆæµ‹è¯•ã€‚å¯ä»¥ä»å±æ€§ç¼–è¾‘æ ä¸­çœ‹åˆ°è¿è¡Œä¸­æ¸¸æˆçš„å®æ—¶å‚æ•°å˜åŒ–ã€‚</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161229021.png"></p>
<h4 id="2-å±‚çº§æ ‘"><a href="#2-å±‚çº§æ ‘" class="headerlink" title="2.å±‚çº§æ ‘"></a>2.å±‚çº§æ ‘</h4><blockquote>
<p>åœºæ™¯æ˜¯ç”±å±‚çº§ç»“æ„çš„å®ä½“ç»„æˆï¼Œåœºæ™¯å±‚çº§æ ‘æ˜¾ç¤ºäº†å½“å‰æ•´ä¸ªåœºæ™¯çš„æ ‘å½¢ç»“æ„ã€‚ä¸€ä¸ªåœºæ™¯æ°¸è¿œåŒ…å«ä¸€ä¸ªæ ¹èŠ‚ç‚¹å®ä½“ï¼Œä½äºå±‚çº§æ ‘çš„æœ€é¡¶ç«¯ã€‚æ‰€æœ‰å…¶ä»–çš„å®ä½“éƒ½æ˜¯ç”±å¼€å‘è€…é€æ­¥åŠ å…¥çš„ã€‚</p>
<p>å±‚çº§æ ‘é¢æ¿åŒ…å«äº†åœºæ™¯ä¸­çš„å…¨éƒ¨å®ä½“ï¼Œå¯ä»¥åœ¨å…¶ä¸­å¿«é€Ÿå®šä½å®ä½“ï¼Œè€Œä¸å¿…åœ¨åœºæ™¯ä¸­æœå¯»ã€‚ç‚¹å‡»å±‚çº§æ ‘ä¸Šçš„å®ä½“å°†ä¼šé€‰ä¸­å®ƒã€‚</p>
<h2 id="åˆ›å»ºå’Œåˆ é™¤å®ä½“"><a href="#åˆ›å»ºå’Œåˆ é™¤å®ä½“" class="headerlink" title="åˆ›å»ºå’Œåˆ é™¤å®ä½“"></a>åˆ›å»ºå’Œåˆ é™¤å®ä½“</h2><p>å½“åœ¨å±‚çº§æ ‘ä¸­é€‰ä¸­ä¸€ä¸ªå®ä½“æ—¶ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä½“æˆ–è€…é€‰å‡ºè¿™ä¸ªæ‰€é€‰ä¸­çš„é€‰é¡¹ã€‚æˆ–è€…ä½¿ç”¨ä½äºå±‚çº§æ ‘é¢æ¿å·¦ä¸Šè§’çš„å„ç§æŒ‰é’®ï¼Œåˆæˆ–è€…é€šè¿‡ç‚¹å‡»æ“ä½œæ‰“å¼€å†…å®¹ç›®å½•æ¥è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161304494.png"></p>
<h4 id="3-æ£€æµ‹å™¨"><a href="#3-æ£€æµ‹å™¨" class="headerlink" title="3.æ£€æµ‹å™¨"></a>3.æ£€æµ‹å™¨</h4><blockquote>
<p>æ£€æŸ¥å™¨é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰é€‰å®šå¯¹è±¡çš„å±æ€§å€¼ã€‚</p>
<p>æ ¹æ®é€‰æ‹©çš„ä¸åŒï¼Œä¼šç°å®ä¸åŒçš„æ£€æŸ¥å™¨é¢æ¿ã€‚ç›®å‰æœ‰</p>
<ul>
<li><strong>å®ä½“&#x2F;ç»„ä»¶æ£€æŸ¥å™¨</strong></li>
<li><strong>çº¹ç†æ£€æŸ¥å™¨</strong></li>
<li><strong>æè´¨æ£€æŸ¥å™¨</strong></li>
<li><strong>Cubemapæ£€æŸ¥å™¨</strong></li>
</ul>
<p>ä¿®æ”¹è¿™äº›æ•°å€¼ç”¨ä»¥ç‰¹åˆ¶åŒ–å®ä½“çš„è¡Œä¸ºã€‚è­¬å¦‚å¯ä»¥è®¾ç½® Model ç»„ä»¶æ‰€æ¸²æŸ“çš„æ¨¡å‹ï¼Œæˆ–ç¯å…‰çš„é¢œè‰²ç­‰ç¯ã€‚</p>
<p>æœ‰äº›å‚æ•°æ˜¯ç®€å•çš„æ–‡å­—æˆ–æ•°å€¼ï¼Œé€šè¿‡æ ‡å‡†çš„æ–‡å­—æ¡†å’Œæ»‘åŠ¨æ¡æ¥è¿›è¡Œä¿®æ”¹ã€‚æœ‰äº›å€¼éœ€è¦ç‰¹æ®Šçš„ç¼–è¾‘æ–¹å¼ï¼Œè­¬å¦‚ä»èµ„æºé¢æ¿ä¸­é€‰å–ä¸€ä¸ªé«˜äº®çš„èµ„æºä¹‹ç±»ï¼ˆé€‰å–çº¹ç†ç­‰ï¼‰ã€‚æœ‰äº›å€¼å¯ä»¥é€šè¿‡è§†å£è¿›è¡Œå¯è§†åŒ–ç¼–è¾‘ï¼Œè­¬å¦‚å¯ä»¥ç›´æ¥åœ¨è§†å£ä¸­ç”¨Gizmoå¹³ç§»æ—‹è½¬ç¼©æ”¾ä¸€ä¸ªå®ä½“çš„å˜æ¢å±æ€§.</p>
<p>åœ¨åº”ç”¨å’Œç¼–è¾‘å™¨åŒæ—¶è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œå¯¹å®ä½“å±æ€§çš„ä¿®æ”¹å°†ä¼šä¼ é€’åˆ°è¿è¡Œä¸­çš„åº”ç”¨ä¸­ã€‚ä¸€ä¸ªç»ä½³çš„è¿­ä»£æ–¹å¼æ˜¯åœ¨åº”ç”¨è¿è¡Œèµ·æ¥ä¹‹åï¼Œå¹¶æ’æ‰“å¼€ç¼–è¾‘å™¨å’Œåº”ç”¨çª—å£ï¼Œå®æ—¶çš„å¯¹æƒ³è¦çš„è°ƒæ•´çš„å€¼è¿›è¡Œä¿®æ­£ã€‚</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161602442.png"></p>
<h4 id="4-è§†å£"><a href="#4-è§†å£" class="headerlink" title="4.è§†å£"></a>4.è§†å£</h4><blockquote>
<p>è§†å£å±•ç¤ºäº†å½“å‰åœºæ™¯çš„å¯è§†åŒ–çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡ç§»åŠ¨æ‘„å½±æœºåœ¨åœºæ™¯ä¸­è‡ªç”±æ¼«æ¸¸ã€‚</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161643712.png"></p>
<blockquote>
<h2 id="æ‘„å½±æœº"><a href="#æ‘„å½±æœº" class="headerlink" title="æ‘„å½±æœº"></a>æ‘„å½±æœº</h2><p>åˆå§‹æƒ…å†µä¸‹ï¼Œç¼–è¾‘å™¨ä¼šé‡‡ç”¨ <strong>é€è§†</strong> æ‘„å½±æœºã€‚è¿™ç§æ‘„å½±æœºå¦‚åŒç”µå½±æ‘„å½±æœºä¸€èˆ¬æ¼‚æµ®åœ¨åœºæ™¯ä¹‹ä¸­ã€‚å¯ä»¥ä½¿ç”¨æ‘„å½±æœºé€‰æ‹©èœå•é€‰æ‹©åœºæ™¯ä¸­çš„ä¸åŒæ‘„å½±æœºã€‚ <strong>æ­£äº¤</strong> æ‘„å½±æœºåŒ…å«å‡ ä¸ªç¡®å®šçš„æœºä½ï¼šé¡¶è§†å›¾ï¼Œåº•è§†å›¾ï¼Œå‰è§†å›¾ï¼Œåè§†å›¾ï¼Œå·¦è§†å›¾ï¼Œå³è§†å›¾ã€‚é€šè¿‡è¿™äº›æœºä½å¯ä»¥æ— é€è§†çš„è§‚å¯Ÿåœºæ™¯ï¼Œç‰¹åˆ«æ–¹ä¾¿ç”¨æ¥è°ƒæ•´åœºæ™¯ä¸­çš„å®ä½“ä½ç½®ä¹‹ç±»ã€‚</p>
<p>åœ¨æ‘„å½±æœºèœå•ä¸­é€‰æ‹©æ‘„å½±æœºçš„åŒæ—¶ï¼Œåœºæ™¯ä¸­çš„æ‘„å½±æœºå®ä½“ä¼šè¢«æ˜¾ç¤ºä¸ºé«˜äº®çŠ¶æ€ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ç²¾ç¡®çš„è®¾ç½®æ‘„å½±æœºä½ç½®ã€‚</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161804927.png"></p>
<h4 id="5-èµ„æº"><a href="#5-èµ„æº" class="headerlink" title="5.èµ„æº"></a>5.èµ„æº</h4><blockquote>
<p>èµ„æºé¢æ¿ç®¡ç†äº†æ‰€æœ‰çš„é¡¹ç›®ä¸­çš„å¯ç”¨èµ„æºã€‚ä»è¿™ä¸ªé¢æ¿å¯ä»¥åˆ›å»ºï¼Œä¸Šä¼ ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹å’Œç¼–è¾‘ä»»ä½•èµ„æº</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203161917993.png"></p>
<h3 id="äº”ã€å°ç»“"><a href="#äº”ã€å°ç»“" class="headerlink" title="äº”ã€å°ç»“"></a>äº”ã€å°ç»“</h3><blockquote>
<p>three.jsè¿˜æ˜¯æ¯”PlayCanvasæ´»è·ƒçš„ï¼Œå½“ç„¶ï¼Œå¦‚æœæ„Ÿå…´è¶£å¹¶ä¸”æœ‰ç²¾åŠ›çš„è¯ï¼Œè¿˜æ˜¯å»ºè®®éƒ½äº†è§£äº†è§£</p>
<p>æ¯•ç«ŸçŸ¥è¯†æ˜¯æ— ç©·æ— å°½çš„</p>
</blockquote>
<p><img src="/2022/12/03/playcanvas%E5%88%9D%E8%AF%86/image-20221203162850169.png"></p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[playcanvas-github]: 	â€œ<a target="_blank" rel="noopener" href="https://github.com/playcanvas/engine/blob/main/README-zh.md">https://github.com/playcanvas/engine/blob/main/README-zh.md</a> â€œ<br>[playcanvasä¸­æ–‡]: 	â€œ<a target="_blank" rel="noopener" href="https://developer.playcanvas.com/zh/">https://developer.playcanvas.com/zh/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/playcanvas/" rel="tag">playcanvas</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-threejs-d-5-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/12/02/threejs-d-5-0/"
    >threejs-d-5.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/12/02/threejs-d-5-0/" class="article-date">
  <time datetime="2022-12-02T08:37:44.000Z" itemprop="datePublished">2022-12-02</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/">Three.js</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/threejs-d-5-0/">threejs-d-5.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="threejs-d-5-0"><a href="#threejs-d-5-0" class="headerlink" title="threejs-d-5.0"></a>threejs-d-5.0</h1><h3 id="ä¸€ã€ç½®æ¢ä¸ç½®æ¢è´´å›¾"><a href="#ä¸€ã€ç½®æ¢ä¸ç½®æ¢è´´å›¾" class="headerlink" title="ä¸€ã€ç½®æ¢ä¸ç½®æ¢è´´å›¾"></a>ä¸€ã€ç½®æ¢ä¸ç½®æ¢è´´å›¾</h3><blockquote>
<h3 id="displacementMap-Texture"><a href="#displacementMap-Texture" class="headerlink" title=".displacementMap : Texture"></a>.displacementMap : Texture</h3><p>ä½ç§»è´´å›¾ä¼šå½±å“ç½‘æ ¼é¡¶ç‚¹çš„ä½ç½®ï¼Œä¸ä»…å½±å“æè´¨çš„å…‰ç…§å’Œé˜´å½±çš„å…¶ä»–è´´å›¾ä¸åŒï¼Œç§»ä½çš„é¡¶ç‚¹å¯ä»¥æŠ•å°„é˜´å½±ï¼Œé˜»æŒ¡å…¶ä»–å¯¹è±¡ï¼Œ ä»¥åŠå……å½“çœŸå®çš„å‡ ä½•ä½“ã€‚ä½ç§»çº¹ç†æ˜¯æŒ‡ï¼šç½‘æ ¼çš„æ‰€æœ‰é¡¶ç‚¹è¢«æ˜ å°„ä¸ºå›¾åƒä¸­æ¯ä¸ªåƒç´ çš„å€¼ï¼ˆç™½è‰²æ˜¯æœ€é«˜çš„ï¼‰ï¼Œå¹¶ä¸”è¢«é‡å®šä½ã€‚</p>
<h3 id="displacementScale-Float"><a href="#displacementScale-Float" class="headerlink" title=".displacementScale : Float"></a>.displacementScale : Float</h3><p>ä½ç§»è´´å›¾å¯¹ç½‘æ ¼çš„å½±å“ç¨‹åº¦ï¼ˆé»‘è‰²æ˜¯æ— ä½ç§»ï¼Œç™½è‰²æ˜¯æœ€å¤§ä½ç§»ï¼‰ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ä½ç§»è´´å›¾ï¼Œåˆ™ä¸ä¼šåº”ç”¨æ­¤å€¼ã€‚é»˜è®¤å€¼ä¸º1ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_height.jpg&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.BoxGeometry( 1, 1, 1,100,100,100 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p>ç½®æ¢æ•ˆæœå›¾ï¼š</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202081128766.png"></p>
<h3 id="äºŒã€ç²—ç³™åº¦ä¸ç²—ç³™åº¦è´´å›¾"><a href="#äºŒã€ç²—ç³™åº¦ä¸ç²—ç³™åº¦è´´å›¾" class="headerlink" title="äºŒã€ç²—ç³™åº¦ä¸ç²—ç³™åº¦è´´å›¾"></a>äºŒã€ç²—ç³™åº¦ä¸ç²—ç³™åº¦è´´å›¾</h3><blockquote>
<h3 id="roughness-Float"><a href="#roughness-Float" class="headerlink" title=".roughness : Float"></a>.roughness : Float</h3><p>æè´¨çš„ç²—ç³™ç¨‹åº¦ã€‚0.0è¡¨ç¤ºå¹³æ»‘çš„é•œé¢åå°„ï¼Œ1.0è¡¨ç¤ºå®Œå…¨æ¼«åå°„ã€‚é»˜è®¤å€¼ä¸º1.0ã€‚å¦‚æœè¿˜æä¾›roughnessMapï¼Œåˆ™ä¸¤ä¸ªå€¼ç›¸ä¹˜ã€‚</p>
<h3 id="roughnessMap-Texture"><a href="#roughnessMap-Texture" class="headerlink" title=".roughnessMap : Texture"></a>.roughnessMap : Texture</h3><p>è¯¥çº¹ç†çš„ç»¿è‰²é€šé“ç”¨äºæ”¹å˜æè´¨çš„ç²—ç³™åº¦ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_height.jpg&#39;) 
const mbRoughnesstexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_roughness.jpg&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.BoxGeometry( 1, 1, 1,50,50,50 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05,
    // roughness:0,
    roughnessMap:mbRoughnesstexture

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p>ç²—ç³™åº¦ä¸º0æ•ˆæœï¼š</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202082244999.png"></p>
<p>åŠ è½½ç²—ç³™åº¦çº¹ç†ï¼š</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202082433121.png"></p>
<h3 id="ä¸‰ã€é‡‘å±åº¦ä¸é‡‘å±è´´å›¾"><a href="#ä¸‰ã€é‡‘å±åº¦ä¸é‡‘å±è´´å›¾" class="headerlink" title="ä¸‰ã€é‡‘å±åº¦ä¸é‡‘å±è´´å›¾"></a>ä¸‰ã€é‡‘å±åº¦ä¸é‡‘å±è´´å›¾</h3><blockquote>
<h3 id="metalness-Float"><a href="#metalness-Float" class="headerlink" title=".metalness : Float"></a>.metalness : Float</h3><p>æè´¨ä¸é‡‘å±çš„ç›¸ä¼¼åº¦ã€‚éé‡‘å±æè´¨ï¼Œå¦‚æœ¨ææˆ–çŸ³æï¼Œä½¿ç”¨0.0ï¼Œé‡‘å±ä½¿ç”¨1.0ï¼Œé€šå¸¸æ²¡æœ‰ä¸­é—´å€¼ã€‚ é»˜è®¤å€¼ä¸º0.0ã€‚0.0åˆ°1.0ä¹‹é—´çš„å€¼å¯ç”¨äºç”Ÿé”ˆé‡‘å±çš„å¤–è§‚ã€‚å¦‚æœè¿˜æä¾›äº†metalnessMapï¼Œåˆ™ä¸¤ä¸ªå€¼ç›¸ä¹˜ã€‚</p>
<h3 id="metalnessMap-Texture"><a href="#metalnessMap-Texture" class="headerlink" title=".metalnessMap : Texture"></a>.metalnessMap : Texture</h3><p>è¯¥çº¹ç†çš„è“è‰²é€šé“ç”¨äºæ”¹å˜æè´¨çš„é‡‘å±åº¦ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_height.jpg&#39;) 
const mbRoughnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_roughness.jpg&#39;) 
const mbMetalnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_metalness.jpg&#39;) 

mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.PlaneGeometry( 1, 1,100,100 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05,
    roughness:0.2,
    roughnessMap:mbRoughnesstexture,
    metalnessMap:mbMetalnesstexture,
    metalness:0.3

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p>æ·»åŠ é‡‘å±å’Œé‡‘å±è´´å›¾å‰ï¼š</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202091721564.png"></p>
<p>æ·»åŠ é‡‘å±å’Œé‡‘å±è´´å›¾åï¼š </p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202091744042.png"></p>
<h3 id="å››ã€æ³•çº¿å’Œæ³•çº¿è´´å›¾"><a href="#å››ã€æ³•çº¿å’Œæ³•çº¿è´´å›¾" class="headerlink" title="å››ã€æ³•çº¿å’Œæ³•çº¿è´´å›¾"></a>å››ã€æ³•çº¿å’Œæ³•çº¿è´´å›¾</h3><blockquote>
<h3 id="normalMap-Texture"><a href="#normalMap-Texture" class="headerlink" title=".normalMap : Texture"></a>.normalMap : Texture</h3><p>ç”¨äºåˆ›å»ºæ³•çº¿è´´å›¾çš„çº¹ç†ã€‚RGBå€¼ä¼šå½±å“æ¯ä¸ªåƒç´ ç‰‡æ®µçš„æ›²é¢æ³•çº¿ï¼Œå¹¶æ›´æ”¹é¢œè‰²ç…§äº®çš„æ–¹å¼ã€‚æ³•çº¿è´´å›¾ä¸ä¼šæ”¹å˜æ›²é¢çš„å®é™…å½¢çŠ¶ï¼Œåªä¼šæ”¹å˜å…‰ç…§ã€‚ In case the material has a normal map authored using the left handed convention, the y component of normalScale should be negated to compensate for the different handedness.</p>
<h3 id="normalMapType-Integer"><a href="#normalMapType-Integer" class="headerlink" title=".normalMapType : Integer"></a>.normalMapType : Integer</h3><p>æ³•çº¿è´´å›¾çš„ç±»å‹ã€‚</p>
<p>é€‰é¡¹ä¸ºTHREE.TangentSpaceNormalMapï¼ˆé»˜è®¤ï¼‰å’ŒTHREE.ObjectSpaceNormalMapã€‚</p>
<h3 id="normalScale-Vector2"><a href="#normalScale-Vector2" class="headerlink" title=".normalScale : Vector2"></a>.normalScale : Vector2</h3><p>æ³•çº¿è´´å›¾å¯¹æè´¨çš„å½±å“ç¨‹åº¦ã€‚å…¸å‹èŒƒå›´æ˜¯0-1ã€‚é»˜è®¤å€¼æ˜¯Vector2è®¾ç½®ä¸ºï¼ˆ1,1ï¼‰</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_height.jpg&#39;) 
const mbRoughnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_roughness.jpg&#39;) 
const mbMetalnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_metalness.jpg&#39;) 
const mbNormaltexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_normal.jpg&#39;) 

mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.PlaneGeometry( 1, 1,100,100 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05,
    roughness:0.2,
    roughnessMap:mbRoughnesstexture,
    metalnessMap:mbMetalnesstexture,
    metalness:0.3,
    normalMap:mbNormaltexture

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p>æ·»åŠ æ³•çº¿è´´å›¾åï¼š</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202092454739.png"></p>
<p>è´´å›¾åˆ°è¿™é‡Œå°±å·²ç»å¾ˆé€¼çœŸäº†ï¼Œå½“ç„¶ï¼Œä¸åŒçš„æè´¨æ‰€ä½¿ç”¨çš„è´´å›¾ä¹Ÿæœ‰ä¸€å®šçš„åŒºåˆ«ã€‚</p>
<h3 id="äº”ã€çº¹ç†åŠ è½½å›è°ƒ"><a href="#äº”ã€çº¹ç†åŠ è½½å›è°ƒ" class="headerlink" title="äº”ã€çº¹ç†åŠ è½½å›è°ƒ"></a>äº”ã€çº¹ç†åŠ è½½å›è°ƒ</h3><h4 id="1-çº¹ç†å›è°ƒ"><a href="#1-çº¹ç†å›è°ƒ" class="headerlink" title="1.çº¹ç†å›è°ƒ"></a>1.çº¹ç†å›è°ƒ</h4><blockquote>
<h3 id="load-url-String-onLoad-Function-onProgress-Function-onError-Function-Texture"><a href="#load-url-String-onLoad-Function-onProgress-Function-onError-Function-Texture" class="headerlink" title=".load ( url : String, onLoad : Function, onProgress : Function, onError : Function ) : Texture"></a>.load ( url : String, onLoad : Function, onProgress : Function, onError : Function ) : Texture</h3><p>url â€” æ–‡ä»¶çš„URLæˆ–è€…è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä¸º <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">Data URI</a>.<br>onLoad â€” åŠ è½½å®Œæˆæ—¶å°†è°ƒç”¨ã€‚å›è°ƒå‚æ•°ä¸ºå°†è¦åŠ è½½çš„texture.<br>onProgress â€” å°†åœ¨åŠ è½½è¿‡ç¨‹ä¸­è¿›è¡Œè°ƒç”¨ã€‚å‚æ•°ä¸ºXMLHttpRequestå®ä¾‹ï¼Œå®ä¾‹åŒ…å«totalå’Œloadedå­—èŠ‚ã€‚<br>onError â€” åœ¨åŠ è½½é”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_height.jpg&#39;) 
const mbRoughnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_roughness.jpg&#39;) 
const mbMetalnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_metalness.jpg&#39;) 
const event = &#123;&#125;;
event.onLoad = function(e)&#123;
    console.log(&#39;åŠ è½½å®Œæˆäº†&#39;)
&#125;
event.onProgress = function(e)&#123;
    console.log(e)
    console.log(&#39;æ­£åœ¨åŠ è½½&#39;)
&#125;
event.onError = function(e)&#123;
    console.log(&#39;åŠ è½½é”™è¯¯äº†&#39;)
    console.log(e)
&#125;
const mbNormaltexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_normal.jpg&#39;,
event.onLoad,//åŠ è½½å®Œæˆè°ƒç”¨
event.onProgress,//åŠ è½½è¿‡ç¨‹ä¸­è°ƒç”¨
event.onError//åŠ è½½é”™è¯¯è°ƒç”¨
) 

mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.PlaneGeometry( 1, 1,100,100 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05,
    roughness:0.2,
    roughnessMap:mbRoughnesstexture,
    metalnessMap:mbMetalnesstexture,
    metalness:0.3,
    normalMap:mbNormaltexture

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p>åŠ è½½ä¸­</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202101019627.png" alt="onProgress"></p>
<p>åŠ è½½å®Œæˆ</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202101056269.png" alt="onLoad"></p>
<p>åŠ è½½é”™è¯¯</p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202101123771.png" alt="onError"></p>
<h4 id="2-çº¹ç†åŠ è½½å™¨"><a href="#2-çº¹ç†åŠ è½½å™¨" class="headerlink" title="2.çº¹ç†åŠ è½½å™¨"></a>2.çº¹ç†åŠ è½½å™¨</h4><blockquote>
<p>å…¶åŠŸèƒ½æ˜¯å¤„ç†å¹¶è·Ÿè¸ªå·²åŠ è½½å’Œå¾…å¤„ç†çš„æ•°æ®ï¼Œç®¡ç†æˆ‘ä»¬åŠ è½½çš„çº¹ç†</p>
</blockquote>
<pre><code class="javascript">//main.js+
const event = &#123;&#125;;
event.onLoad = function(e)&#123;
    console.log(&#39;åŠ è½½å®Œæˆäº†&#39;)
&#125;
event.onProgress = function( url,itemsLoaded,itemsTotal)&#123;
    console.log(&#39;url:&#39;+ url)//å½“å‰åŠ è½½çº¹ç†è·¯å¾„
    console.log(&#39;itemsLoaded:&#39; + itemsLoaded )//åŠ è½½å½“å‰çº¹ç†ä½ç½®
    console.log(&#39;itemsTotal:&#39; + itemsTotal)//çº¹ç†æ€»æ•°
    console.log(&#39;åŠ è½½è§’åº¦:&#39; + ((itemsLoaded / itemsTotal) * 100).toFixed(2) + &#39;%&#39;)//çº¹ç†åŠ è½½è¿›åº¦
&#125;
event.onError = function(e)&#123;
    console.log(&#39;åŠ è½½é”™è¯¯äº†&#39;)
    console.log(e)
&#125;
const manager = new THREE.LoadingManager(
    event.onLoad,
    event.onProgress,
    event.onError
    );

const textureLoader = new THREE.TextureLoader(manager);//è£…è½½åŠ è½½å™¨
const mbColortexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_height.jpg&#39;) 
const mbRoughnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_roughness.jpg&#39;) 
const mbMetalnesstexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_metalness.jpg&#39;) 
const mbNormaltexture = textureLoader.load(&#39;./texture/welded_and_painted_metal_panels_26_64_normal.jpg&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.PlaneGeometry( 1, 1,100,100 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    displacementMap:mbHeighttexture,
    displacementScale:0.05,
    roughness:0.2,
    roughnessMap:mbRoughnesstexture,
    metalnessMap:mbMetalnesstexture,
    metalness:0.3,
    normalMap:mbNormaltexture

 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202102251981.png"></p>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202104213221.png"></p>
<h3 id="å…­ã€ç¯å¢ƒçº¹ç†"><a href="#å…­ã€ç¯å¢ƒçº¹ç†" class="headerlink" title="å…­ã€ç¯å¢ƒçº¹ç†"></a>å…­ã€ç¯å¢ƒçº¹ç†</h3><blockquote>
<p>åˆ›å»ºä¸€ä¸ªç”±6å¼ å›¾ç‰‡æ‰€ç»„æˆçš„çº¹ç†å¯¹è±¡ã€‚</p>
<p>ï¼ˆå‰åï¼Œä¸Šä¸‹ï¼Œå·¦å³ï¼‰ä¹Ÿå¯ä»¥æ˜¯ <a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh/%E9%AB%98%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4%E6%88%90%E5%83%8F">hdr</a>ï¼ˆä¸€å¼ å›¾ï¼‰</p>
</blockquote>
<pre><code class="javascript">const loader = new THREE.CubeTextureLoader();
loader.setPath( &#39;textures/cube/pisa/&#39; );

const textureCube = loader.load( [
    &#39;px.png&#39;, &#39;nx.png&#39;,
    &#39;py.png&#39;, &#39;ny.png&#39;,
    &#39;pz.png&#39;, &#39;nz.png&#39;
] );
const material = new THREE.MeshBasicMaterial( &#123; color: 0xffffff, envMap: textureCube &#125; );
scene.background = textureCube;
scene.environment = textureCube;//è‹¥è¯¥å€¼ä¸ä¸ºnullï¼Œåˆ™è¯¥çº¹ç†è´´å›¾å°†ä¼šè¢«è®¾ä¸ºåœºæ™¯ä¸­æ‰€æœ‰ç‰©ç†æè´¨çš„ç¯å¢ƒè´´å›¾ã€‚ ç„¶è€Œï¼Œè¯¥å±æ€§ä¸èƒ½å¤Ÿè¦†ç›–å·²å­˜åœ¨çš„ã€å·²åˆ†é…ç»™ MeshStandardMaterial.envMap çš„è´´å›¾
</code></pre>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202133340321.png"></p>
<h3 id="ä¸ƒã€HDR"><a href="#ä¸ƒã€HDR" class="headerlink" title="ä¸ƒã€HDR"></a>ä¸ƒã€HDR</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh/%E9%AB%98%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4%E6%88%90%E5%83%8F">HDR</a></p>
<p>é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿæ˜¯è¦çŸ¥é“å¦‚ä½•åŠ è½½hdr</p>
</blockquote>
<p><strong>é«˜åŠ¨æ€èŒƒå›´æˆåƒ</strong>ï¼ˆè‹±èªï¼š<strong>H</strong>igh <strong>D</strong>ynamic <strong>R</strong>ange Imagingï¼Œç®€ç§°<strong>HDRI</strong>æˆ–<strong>HDR</strong>ï¼‰ï¼Œåœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸ç”µå½±æ‘„å½±æœ¯ä¸­ï¼Œæ˜¯ç”¨æ¥å®ç°æ¯”æ™®é€šæ•°ä½å›¾åƒæŠ€æœ¯æ›´å¤§æ›å…‰åŠ¨æ€èŒƒå›´ï¼ˆå³æ›´å¤§çš„æ˜æš—å·®åˆ«ï¼‰çš„ä¸€ç»„æŠ€æœ¯ã€‚é«˜åŠ¨æ€èŒƒå›´æˆåƒçš„ç›®çš„å°±æ˜¯è¦æ­£ç¡®åœ°è¡¨ç¤ºçœŸå®ä¸–ç•Œä¸­ä»å¤ªé˜³å…‰ç›´å°„åˆ°æœ€æš—çš„é˜´å½±è¿™æ ·å¤§çš„èŒƒå›´äº®åº¦ã€‚</p>
<blockquote>
<h3 id="mapping-number"><a href="#mapping-number" class="headerlink" title=".mapping : number"></a>.mapping : number</h3><p>å›¾åƒå°†å¦‚ä½•åº”ç”¨åˆ°ç‰©ä½“ï¼ˆå¯¹è±¡ï¼‰ä¸Šã€‚é»˜è®¤å€¼æ˜¯THREE.UVMappingå¯¹è±¡ç±»å‹ï¼Œ å³UVåæ ‡å°†è¢«ç”¨äºçº¹ç†æ˜ å°„ã€‚</p>
<p>EquirectangularReflectionMapping å’Œ EquirectangularRefractionMapping ç”¨äºç­‰è·åœ†æŸ±æŠ•å½±çš„ç¯å¢ƒè´´å›¾ï¼Œä¹Ÿè¢«å«åšç»çº¬çº¿æ˜ å°„è´´å›¾ã€‚ç­‰è·åœ†æŸ±æŠ•å½±è´´å›¾è¡¨ç¤ºæ²¿ç€å…¶æ°´å¹³ä¸­çº¿360Â°çš„è§†è§’ï¼Œä»¥åŠæ²¿ç€å…¶å‚ç›´è½´å‘180Â°çš„è§†è§’ã€‚è´´å›¾é¡¶éƒ¨å’Œåº•éƒ¨çš„è¾¹ç¼˜åˆ†åˆ«å¯¹åº”äºå®ƒæ‰€æ˜ å°„çš„çƒä½“çš„åŒ—æå’Œå—æã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
import &#123; RGBELoader &#125; from &#39;three/examples/jsm/loaders/RGBELoader&#39;
const rgbeLoader = new RGBELoader();
rgbeLoader.loadAsync(&#39;./texture/ruin1.hdr&#39;).then((texture)=&gt;&#123;
    texture.mapping = THREE.EquirectangularReflectionMapping;
    scene.background = texture;
    scene.environment = texture;
&#125;)
const geometry = new THREE.SphereGeometry( 15, 100, 50 );
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    metalness:0.5,
    roughness:0.05
 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202141946012.png"></p>
<h3 id="å…«ã€ç¯å…‰ä¸é˜´å½±"><a href="#å…«ã€ç¯å…‰ä¸é˜´å½±" class="headerlink" title="å…«ã€ç¯å…‰ä¸é˜´å½±"></a>å…«ã€ç¯å…‰ä¸é˜´å½±</h3><blockquote>
<p>é˜´å½±éœ€è¦æ»¡è¶³çš„æ¡ä»¶</p>
<p>1.æè´¨åº”æ»¡è¶³å¯¹ç¯å…‰æœ‰ååº”ï¼ˆç¯å¢ƒå…‰ç”±äºæ˜¯å››é¢å…«æ–¹çš„å…‰ï¼Œæ‰€ä»¥ä¸å…·å¤‡é˜´å½±çš„æ¡ä»¶ï¼‰</p>
<p>2.æ¸²æŸ“å™¨å¼€å¯é˜´å½±è®¡ç®—ï¼šrenderer.shadowMap.enabled &#x3D; true</p>
<p>3.å…‰ç…§æŠ•å°„é˜´å½±ï¼šlight.castShadow &#x3D; true</p>
<p>4.ç‰©ä½“æŠ•å°„é˜´å½±ï¼šcube.castShadow &#x3D; trueï¼ˆæŠ•å½±ä¸»ä½“ï¼‰</p>
<p>5.ç‰©ä½“æ¥æ”¶æŠ•å°„é˜´å½±ï¼šplane.receiveShadow &#x3D; trueï¼ˆæ¥æ”¶ä¸»ä½“ï¼‰</p>
</blockquote>
<pre><code class="javascript">//main.js
import * as THREE from &#39;three&#39;
import &#123; OrbitControls &#125; from &#39;three/examples/jsm/controls/OrbitControls&#39; 
import dat from &#39;dat.gui&#39;

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
const renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
renderer.shadowMap.enabled = true;//æ¸²æŸ“å™¨å¼€å¯é˜´å½±è®¡ç®—
document.body.appendChild( renderer.domElement );

const axesHelper = new THREE.AxesHelper( 30 );//è½´çš„çº¿æ®µé•¿åº¦. é»˜è®¤ä¸º 1.
scene.add( axesHelper );//æ·»åŠ åˆ°åœºæ™¯


const geometry = new THREE.SphereGeometry( 15, 100, 50 );
const material = new THREE.MeshStandardMaterial();
const cube = new THREE.Mesh( geometry, material );
cube.castShadow = true;//ç‰©ä½“æŠ•å°„é˜´å½±
scene.add( cube );

const geometryP = new THREE.PlaneGeometry( 100,100 );
const materialP = new THREE.MeshStandardMaterial();
const plane = new THREE.Mesh( geometryP, materialP );
plane.rotation.x = -Math.PI / 2
plane.position.set(0,-15,0)
plane.receiveShadow = true//ç‰©ä½“æ¥æ”¶æŠ•å°„é˜´å½±
scene.add( plane );

const light = new THREE.PointLight( 0xffffff, 1, 100 );
light.position.set( 10, 50, 10 );
light.castShadow = true;//å…‰ç…§æŠ•å°„é˜´å½±
scene.add( light ); 

const gui = new dat.GUI();
gui.add(light.position,&#39;x&#39;)
.min(0)
.max(30)
.name(&#39;ç§»åŠ¨xåæ ‡&#39;)
.step(0.1)
gui.add(light.position,&#39;y&#39;)
.min(0)
.max(30)
.name(&#39;ç§»åŠ¨yåæ ‡&#39;)
.step(0.1)
gui.add(light.position,&#39;z&#39;)
.min(0)
.max(30)
.name(&#39;ç§»åŠ¨zåæ ‡&#39;)
.step(0.1)
const controls = new OrbitControls( camera,renderer.domElement  );
camera.position.set(0,20,100);
controls.update();
function animate() &#123;
    requestAnimationFrame( animate );
    controls.update();
    renderer.render( scene, camera );
&#125;
animate();

window.addEventListener(&#39;resize&#39;,()=&gt;&#123;
    // console.log(&#39;å±å¹•å˜åŒ–äº†&#39;)
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
&#125;)
</code></pre>
<p><img src="/2022/12/02/threejs-d-5-0/image-20221202151934429.png"></p>
<p>æ€»ç»“ï¼š</p>
<p>æˆ‘ä»¬è¿˜æœ‰ä¸€äº›ç¯å…‰ï¼Œä¾‹å¦‚ç‚¹å…‰æºå’Œèšå…‰ç¯ï¼Œå®ƒä»¬çš„å±æ€§æˆ‘ä»¬å°±ä¸ä¸€ä¸€æ¥è®²äº†ï¼Œç›¸ä¿¡æˆ‘ä»¬åˆ°äº†è¿™ï¼Œæ–‡æ¡£å·²ç»å¯ä»¥æ¯”è¾ƒç†Ÿæ‚‰çš„æŸ¥é˜…äº†ã€‚åŠ æ²¹ï¼ï¼ï¼</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<p>[HDRè®²è§£]: 	â€œ<a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh/%E9%AB%98%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4%E6%88%90%E5%83%8F&quot;">https://zh.m.wikipedia.org/zh/%E9%AB%98%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4%E6%88%90%E5%83%8F&quot;</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-threejs-d-4-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/12/01/threejs-d-4-0/"
    >threejs-d-4.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/12/01/threejs-d-4-0/" class="article-date">
  <time datetime="2022-12-01T09:59:41.000Z" itemprop="datePublished">2022-12-01</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/">Three.js</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/threejs-d-4-0/">threejs-d-4.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="threejs-d-4-0"><a href="#threejs-d-4-0" class="headerlink" title="threejs-d-4.0"></a>threejs-d-4.0</h1><h3 id="ä¸€ã€åŸºç¡€ç½‘æ ¼æè´¨"><a href="#ä¸€ã€åŸºç¡€ç½‘æ ¼æè´¨" class="headerlink" title="ä¸€ã€åŸºç¡€ç½‘æ ¼æè´¨"></a>ä¸€ã€åŸºç¡€ç½‘æ ¼æè´¨</h3><blockquote>
<p>ä¸€ä¸ªä»¥ç®€å•ç€è‰²ï¼ˆå¹³é¢æˆ–çº¿æ¡†ï¼‰æ–¹å¼æ¥ç»˜åˆ¶å‡ ä½•ä½“çš„æè´¨ã€‚</p>
<p>è¿™ç§æè´¨ä¸å—å…‰ç…§çš„å½±å“ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();//åˆå§‹åŒ–ä¸€ä¸ªåŠ è½½å™¨
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) //åŠ è½½ä¸€å¼ çº¹ç†è´´å›¾

const geometry = new THREE.BoxGeometry( 1, 1, 1 );//åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“
const material = new THREE.MeshBasicMaterial( &#123; 
    color: &#39;#ffffff&#39;,//ç»™ç«‹æ–¹ä½“æ·»åŠ é¢œè‰²
    map:mbColortexture//åŠ è½½è´´å›¾
 &#125; );
const cube = new THREE.Mesh( geometry, material );
console.log(cube)
</code></pre>
<pre><code class="css">.alphaMap : Texture 
#alphaè´´å›¾æ˜¯ä¸€å¼ ç°åº¦çº¹ç†ï¼Œç”¨äºæ§åˆ¶æ•´ä¸ªè¡¨é¢çš„ä¸é€æ˜åº¦ã€‚ï¼ˆé»‘è‰²ï¼šå®Œå…¨é€æ˜ï¼›ç™½è‰²ï¼šå®Œå…¨ä¸é€æ˜ï¼‰ã€‚ é»˜è®¤å€¼ä¸ºnullã€‚

ä»…ä½¿ç”¨çº¹ç†çš„é¢œè‰²ï¼Œå¿½ç•¥alphaé€šé“ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ å¯¹äºRGBå’ŒRGBAçº¹ç†ï¼ŒWebGLæ¸²æŸ“å™¨åœ¨é‡‡æ ·æ­¤çº¹ç†æ—¶å°†ä½¿ç”¨ç»¿è‰²é€šé“ï¼Œ å› ä¸ºåœ¨DXTå‹ç¼©å’Œæœªå‹ç¼©RGB 565æ ¼å¼ä¸­ä¸ºç»¿è‰²æä¾›äº†é¢å¤–çš„ç²¾åº¦ã€‚ Luminance-onlyä»¥åŠluminance/alphaçº¹ç†ä¹Ÿä»ç„¶æœ‰æ•ˆã€‚

.aoMap : Texture
è¯¥çº¹ç†çš„çº¢è‰²é€šé“ç”¨ä½œç¯å¢ƒé®æŒ¡è´´å›¾ã€‚é»˜è®¤å€¼ä¸ºnullã€‚aoMapéœ€è¦ç¬¬äºŒç»„UVã€‚

.aoMapIntensity : Float
ç¯å¢ƒé®æŒ¡æ•ˆæœçš„å¼ºåº¦ã€‚é»˜è®¤å€¼ä¸º1ã€‚é›¶æ˜¯ä¸é®æŒ¡æ•ˆæœã€‚

.color : Color
æè´¨çš„é¢œè‰²(Color)ï¼Œé»˜è®¤å€¼ä¸ºç™½è‰² (0xffffff)ã€‚

.combine : Integer
å¦‚ä½•å°†è¡¨é¢é¢œè‰²çš„ç»“æœä¸ç¯å¢ƒè´´å›¾ï¼ˆå¦‚æœæœ‰ï¼‰ç»“åˆèµ·æ¥ã€‚

é€‰é¡¹ä¸ºTHREE.MultiplyOperationï¼ˆé»˜è®¤å€¼ï¼‰ï¼ŒTHREE.MixOperationï¼Œ THREE.AddOperationã€‚å¦‚æœé€‰æ‹©å¤šä¸ªï¼Œåˆ™ä½¿ç”¨.reflectivityåœ¨ä¸¤ç§é¢œè‰²ä¹‹é—´è¿›è¡Œæ··åˆã€‚

.envMap : Texture
ç¯å¢ƒè´´å›¾ã€‚é»˜è®¤å€¼ä¸ºnullã€‚

.fog : Boolean
æè´¨æ˜¯å¦å—é›¾å½±å“ã€‚é»˜è®¤ä¸ºtrueã€‚

.lightMap : Texture
å…‰ç…§è´´å›¾ã€‚é»˜è®¤å€¼ä¸ºnullã€‚lightMapéœ€è¦ç¬¬äºŒç»„UVã€‚

.lightMapIntensity : Float
çƒ˜ç„™å…‰çš„å¼ºåº¦ã€‚é»˜è®¤å€¼ä¸º1ã€‚

.map : Texture
é¢œè‰²è´´å›¾ã€‚å¯ä»¥é€‰æ‹©åŒ…æ‹¬ä¸€ä¸ªalphaé€šé“ï¼Œé€šå¸¸ä¸.transparent æˆ–.alphaTestã€‚é»˜è®¤ä¸ºnullã€‚

.reflectivity : Float
ç¯å¢ƒè´´å›¾å¯¹è¡¨é¢çš„å½±å“ç¨‹åº¦; è§.combineã€‚é»˜è®¤å€¼ä¸º1ï¼Œæœ‰æ•ˆèŒƒå›´ä»‹äº0ï¼ˆæ— åå°„ï¼‰å’Œ1ï¼ˆå®Œå…¨åå°„ï¼‰ä¹‹é—´ã€‚

.refractionRatio : Float
ç©ºæ°”çš„æŠ˜å°„ç‡ï¼ˆIORï¼‰ï¼ˆçº¦ä¸º1ï¼‰é™¤ä»¥æè´¨çš„æŠ˜å°„ç‡ã€‚å®ƒä¸ç¯å¢ƒæ˜ å°„æ¨¡å¼THREE.CubeRefractionMapping å’ŒTHREE.EquirectangularRefractionMappingä¸€èµ·ä½¿ç”¨ã€‚ The index of refraction (IOR) of air (approximately 1) divided by the index of refraction of the material. It is used with environment mapping mode THREE.CubeRefractionMapping. æŠ˜å°„ç‡ä¸åº”è¶…è¿‡1ã€‚é»˜è®¤å€¼ä¸º0.98ã€‚

.specularMap : Texture
æè´¨ä½¿ç”¨çš„é«˜å…‰è´´å›¾ã€‚é»˜è®¤å€¼ä¸ºnullã€‚

.wireframe : Boolean
å°†å‡ ä½•ä½“æ¸²æŸ“ä¸ºçº¿æ¡†ã€‚é»˜è®¤å€¼ä¸ºfalseï¼ˆå³æ¸²æŸ“ä¸ºå¹³é¢å¤šè¾¹å½¢ï¼‰ã€‚

.wireframeLinecap : String
å®šä¹‰çº¿ä¸¤ç«¯çš„å¤–è§‚ã€‚å¯é€‰å€¼ä¸º &#39;butt&#39;ï¼Œ&#39;round&#39; å’Œ &#39;square&#39;ã€‚é»˜è®¤ä¸º&#39;round&#39;ã€‚

è¯¥å±æ€§å¯¹åº”2D Canvas lineJoinå±æ€§ï¼Œ å¹¶ä¸”ä¼šè¢«WebGLæ¸²æŸ“å™¨å¿½ç•¥ã€‚

.wireframeLinejoin : String
å®šä¹‰çº¿è¿æ¥èŠ‚ç‚¹çš„æ ·å¼ã€‚å¯é€‰å€¼ä¸º &#39;round&#39;, &#39;bevel&#39; å’Œ &#39;miter&#39;ã€‚é»˜è®¤å€¼ä¸º &#39;round&#39;ã€‚

è¯¥å±æ€§å¯¹åº”2D Canvas lineJoinå±æ€§ï¼Œ å¹¶ä¸”ä¼šè¢«WebGLæ¸²æŸ“å™¨å¿½ç•¥ã€‚

.wireframeLinewidth : Float
æ§åˆ¶çº¿æ¡†å®½åº¦ã€‚é»˜è®¤å€¼ä¸º1ã€‚
</code></pre>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201090956497.png"></p>
<h3 id="äºŒã€çº¹ç†å¸¸ç”¨å±æ€§"><a href="#äºŒã€çº¹ç†å¸¸ç”¨å±æ€§" class="headerlink" title="äºŒã€çº¹ç†å¸¸ç”¨å±æ€§"></a>äºŒã€çº¹ç†å¸¸ç”¨å±æ€§</h3><pre><code class="javascript">const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) 
console.log(mbColortexture)
</code></pre>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°mbColortextureçš„å±æ€§</p>
</blockquote>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201091841323.png"></p>
<h4 id="1-çº¹ç†åç§»"><a href="#1-çº¹ç†åç§»" class="headerlink" title="1.çº¹ç†åç§»"></a>1.çº¹ç†åç§»</h4><pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) 
mbColortexture.offset.set(0.2,0.2)//é»˜è®¤æ˜¯x,y,èŒƒå›´æ˜¯0.0 to 1.0
</code></pre>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201092855963.png"></p>
<h4 id="2-çº¹ç†æ—‹è½¬"><a href="#2-çº¹ç†æ—‹è½¬" class="headerlink" title="2.çº¹ç†æ—‹è½¬"></a>2.çº¹ç†æ—‹è½¬</h4><pre><code class="javascript">const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) 
mbColortexture.center.set(0.5,0.5)//è®¾ç½®ä¸­å¿ƒç‚¹ï¼Œ(0.5, 0.5)å¯¹åº”çº¹ç†çš„æ­£ä¸­å¿ƒã€‚é»˜è®¤å€¼ä¸º(0,0)ï¼Œå³å·¦ä¸‹è§’
mbColortexture.rotation = Math.PI / 4 //çº¹ç†å°†å›´ç»•ä¸­å¿ƒç‚¹æ—‹è½¬å¤šå°‘åº¦ï¼Œå•ä½ä¸ºå¼§åº¦ï¼ˆradï¼‰ã€‚æ­£å€¼ä¸ºé€†æ—¶é’ˆæ–¹å‘æ—‹è½¬ï¼Œé»˜è®¤å€¼ä¸º0ã€‚
</code></pre>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201093713067.png"></p>
<h4 id="3-çº¹ç†é‡å¤"><a href="#3-çº¹ç†é‡å¤" class="headerlink" title="3.çº¹ç†é‡å¤"></a>3.çº¹ç†é‡å¤</h4><blockquote>
<p>å½“æˆ‘ä»¬æ—‹è½¬æˆ–è€…æ”¹å˜äº†uvå±æ€§ï¼Œé‚£ä¹ˆå¯èƒ½å°±å‡ºç°äº†ä¸Šé¢é‚£ç§æƒ…å†µï¼Œæ˜¯å› ä¸º</p>
<p>.wrapS : number</p>
<p>è¿™ä¸ªå€¼å®šä¹‰äº†çº¹ç†è´´å›¾åœ¨æ°´å¹³æ–¹å‘ä¸Šå°†å¦‚ä½•åŒ…è£¹ï¼Œåœ¨UVæ˜ å°„ä¸­å¯¹åº”äº<strong>U</strong>ã€‚<br>é»˜è®¤å€¼æ˜¯THREE.ClampToEdgeWrappingï¼Œå³çº¹ç†è¾¹ç¼˜å°†è¢«æ¨åˆ°å¤–éƒ¨è¾¹ç¼˜çš„çº¹ç´ ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦ä¿®æ”¹å±æ€§ï¼Œä½¿å…¶è¾¾åˆ°åˆé€‚çš„uv</p>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping//ä½¿ç”¨RepeatWrappingï¼Œçº¹ç†å°†ç®€å•åœ°é‡å¤åˆ°æ— ç©·å¤§ã€‚
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
mbColortexture.rotation = Math.PI / 4

//ä½¿ç”¨MirroredRepeatWrappingï¼Œ çº¹ç†å°†é‡å¤åˆ°æ— ç©·å¤§ï¼Œåœ¨æ¯æ¬¡é‡å¤æ—¶å°†è¿›è¡Œé•œåƒã€‚
</code></pre>
<p>wrapSå’ŒwrapTå¯ä»¥è®¾ç½®ç›¸åŒçš„å±æ€§</p>
<p>.wrapS : number</p>
<p>è¿™ä¸ªå€¼å®šä¹‰äº†çº¹ç†è´´å›¾åœ¨æ°´å¹³æ–¹å‘ä¸Šå°†å¦‚ä½•åŒ…è£¹ï¼Œåœ¨UVæ˜ å°„ä¸­å¯¹åº”äº<strong>U</strong>ã€‚<br>é»˜è®¤å€¼æ˜¯THREE.ClampToEdgeWrappingï¼Œå³çº¹ç†è¾¹ç¼˜å°†è¢«æ¨åˆ°å¤–éƒ¨è¾¹ç¼˜çš„çº¹ç´ ã€‚ å…¶å®ƒçš„ä¸¤ä¸ªé€‰é¡¹åˆ†åˆ«æ˜¯THREE.RepeatWrappingå’ŒTHREE.MirroredRepeatWrappingã€‚ è¯·å‚é˜…texture constantsæ¥äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚</p>
<p>.wrapT : number</p>
<p>è¿™ä¸ªå€¼å®šä¹‰äº†çº¹ç†è´´å›¾åœ¨å‚ç›´æ–¹å‘ä¸Šå°†å¦‚ä½•åŒ…è£¹ï¼Œåœ¨UVæ˜ å°„ä¸­å¯¹åº”äº<strong>V</strong>ã€‚<br>å¯ä»¥ä½¿ç”¨ä¸ .wrapS : numberç›¸åŒçš„é€‰é¡¹ã€‚</p>
<p>è¯·æ³¨æ„ï¼šçº¹ç†ä¸­å›¾åƒçš„å¹³é“ºï¼Œä»…æœ‰å½“å›¾åƒå¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ä¸º2çš„å¹‚ï¼ˆ2ã€4ã€8ã€16ã€32ã€64ã€128ã€256ã€512ã€1024ã€2048ã€â€¦â€¦ï¼‰æ—¶æ‰èµ·ä½œç”¨ã€‚ å®½åº¦ã€é«˜åº¦æ— éœ€ç›¸ç­‰ï¼Œä½†æ¯ä¸ªç»´åº¦çš„é•¿åº¦å¿…é¡»éƒ½æ˜¯2çš„å¹‚ã€‚ è¿™æ˜¯WebGLä¸­çš„é™åˆ¶ï¼Œä¸æ˜¯ç”±three.jsæ‰€é™åˆ¶çš„ã€‚</p>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/mb.png&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.repeat.set(1,1)//è®¾ç½®é‡å¤çš„æ¬¡æ•°
mbColortexture.center.set(0.5,0.5)
</code></pre>
<h3 id="ä¸‰ã€çº¹ç†ç®—æ³•æ˜¾ç¤º"><a href="#ä¸‰ã€çº¹ç†ç®—æ³•æ˜¾ç¤º" class="headerlink" title="ä¸‰ã€çº¹ç†ç®—æ³•æ˜¾ç¤º"></a>ä¸‰ã€çº¹ç†ç®—æ³•æ˜¾ç¤º</h3><blockquote>
<p>è¿™é‡Œä¸»è¦æ˜¯ä¸¤ä¸ªå±æ€§.magFilterå’Œ.minFilter</p>
</blockquote>
<h4 id="magFilter-number"><a href="#magFilter-number" class="headerlink" title=".magFilter : number"></a>.magFilter : number</h4><p>å½“ä¸€ä¸ªçº¹ç´ è¦†ç›–å¤§äºä¸€ä¸ªåƒç´ æ—¶ï¼Œè´´å›¾å°†å¦‚ä½•é‡‡æ ·ã€‚é»˜è®¤å€¼ä¸ºTHREE.LinearFilterï¼Œ å®ƒå°†è·å–å››ä¸ªæœ€æ¥è¿‘çš„çº¹ç´ ï¼Œå¹¶åœ¨ä»–ä»¬ä¹‹é—´è¿›è¡ŒåŒçº¿æ€§æ’å€¼ã€‚ å¦ä¸€ä¸ªé€‰é¡¹æ˜¯THREE.NearestFilterï¼Œå®ƒå°†ä½¿ç”¨æœ€æ¥è¿‘çš„çº¹ç´ çš„å€¼ã€‚<br>è¯·å‚é˜…texture constantsé¡µé¢æ¥äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h4 id="minFilter-number"><a href="#minFilter-number" class="headerlink" title=".minFilter : number"></a>.minFilter : number</h4><p>å½“ä¸€ä¸ªçº¹ç´ è¦†ç›–å°äºä¸€ä¸ªåƒç´ æ—¶ï¼Œè´´å›¾å°†å¦‚ä½•é‡‡æ ·ã€‚é»˜è®¤å€¼ä¸ºTHREE.LinearMipmapLinearFilterï¼Œ å®ƒå°†ä½¿ç”¨mipmappingä»¥åŠä¸‰æ¬¡çº¿æ€§æ»¤é•œã€‚</p>
<p>magFilterä¸ºTHREE.NearestFilteræ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201100523546.png"></p>
<p>magFilterä¸ºTHREE.LinearFilteræ—¶æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201100924472.png"></p>
<p>.minFilter çš„ä¸€äº›å±æ€§å€¼</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201102245156.png"></p>
<h3 id="å››ã€é€æ˜æè´¨å’Œçº¹ç†"><a href="#å››ã€é€æ˜æè´¨å’Œçº¹ç†" class="headerlink" title="å››ã€é€æ˜æè´¨å’Œçº¹ç†"></a>å››ã€é€æ˜æè´¨å’Œçº¹ç†</h3><blockquote>
<p>alphaMapå’Œopacity</p>
</blockquote>
<pre><code class="javascript">//main.js
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/AHS_AlphaPack_V3_ (1).png&#39;) //åŠ è½½é¢œè‰²è´´å›¾
const mbAlphatexture = textureLoader.load(&#39;./texture/AHS_AlphaPack_V3_ (1).jpg&#39;) //åŠ è½½Alphaè´´å›¾
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.BoxGeometry( 1, 1, 1 );
const material = new THREE.MeshBasicMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    alphaMap:mbAlphatexture,//alphaè´´å›¾æ˜¯ä¸€å¼ ç°åº¦çº¹ç†ï¼Œç”¨äºæ§åˆ¶æ•´ä¸ªè¡¨é¢çš„ä¸é€æ˜åº¦ã€‚ï¼ˆé»‘è‰²ï¼šå®Œå…¨é€æ˜ï¼›ç™½è‰²ï¼šå®Œå…¨ä¸é€æ˜ï¼‰ã€‚ é»˜è®¤å€¼ä¸ºnullã€‚
    transparent:true //å®šä¹‰æ­¤æè´¨æ˜¯å¦é€æ˜ã€‚è¿™å¯¹æ¸²æŸ“æœ‰å½±å“ï¼Œå› ä¸ºé€æ˜å¯¹è±¡éœ€è¦ç‰¹æ®Šå¤„ ç†ï¼Œå¹¶åœ¨éé€æ˜å¯¹è±¡ä¹‹åæ¸²æŸ“ã€‚è®¾ç½®ä¸ºtrueæ—¶ï¼Œé€šè¿‡è®¾ç½®æè´¨çš„opacityå±æ€§æ¥æ§åˆ¶æè´¨é€æ˜çš„ç¨‹åº¦ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚
    opacity:0.5 //è®¾ç½®æè´¨çš„opacityå±æ€§æ¥æ§åˆ¶æè´¨é€æ˜çš„ç¨‹åº¦
 &#125; );
const cube = new THREE.Mesh( geometry, material ); 
scene.add( cube );
</code></pre>
<p>é€æ˜çº¹ç†æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201105806475.png"></p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201110104958.png"></p>
<h3 id="äº”ã€ç¯å¢ƒé®æŒ¡è´´å›¾ä¸å¼ºåº¦"><a href="#äº”ã€ç¯å¢ƒé®æŒ¡è´´å›¾ä¸å¼ºåº¦" class="headerlink" title="äº”ã€ç¯å¢ƒé®æŒ¡è´´å›¾ä¸å¼ºåº¦"></a>äº”ã€ç¯å¢ƒé®æŒ¡è´´å›¾ä¸å¼ºåº¦</h3><blockquote>
<h3 id="aoMap-Texture"><a href="#aoMap-Texture" class="headerlink" title=".aoMap : Texture"></a>.aoMap : Texture</h3><p>è¯¥çº¹ç†çš„çº¢è‰²é€šé“ç”¨ä½œç¯å¢ƒé®æŒ¡è´´å›¾ã€‚é»˜è®¤å€¼ä¸ºnullã€‚aoMapéœ€è¦ç¬¬äºŒç»„UVã€‚</p>
<h3 id="aoMapIntensity-Float"><a href="#aoMapIntensity-Float" class="headerlink" title=".aoMapIntensity : Float"></a>.aoMapIntensity : Float</h3><p> ç¯å¢ƒé®æŒ¡æ•ˆæœçš„å¼ºåº¦ã€‚é»˜è®¤å€¼ä¸º1ã€‚é›¶æ˜¯ä¸é®æŒ¡æ•ˆæœã€‚</p>
</blockquote>
<pre><code class="javascript">const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_height.jpg&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.BoxGeometry( 1, 1, 1 );
const material = new THREE.MeshBasicMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    aoMap:mbHeighttexture,
    aoMapIntensity:1//èŒƒå›´ 0-1
 &#125; );
const cube = new THREE.Mesh( geometry, material );
console.log(cube)
</code></pre>
<p>æ·»åŠ ç¯å¢ƒé®æŒ¡è´´å›¾å‰ï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201111821273.png"></p>
<p>æ·»åŠ ç¯å¢ƒé®æŒ¡è´´å›¾åï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201111921492.png"></p>
<h3 id="å…­ã€PBR"><a href="#å…­ã€PBR" class="headerlink" title="å…­ã€PBR"></a>å…­ã€PBR</h3><p>PBRæ˜¯Physically-Based Renderingï¼ˆåŸºäºç‰©ç†çš„æ¸²æŸ“)çš„ç®€ç§°ï¼Œè¿™ä¸ªè¯çš„å­—é¢æ„æ€å¹¶ä¸å®¹æ˜“å¼„æ‡‚ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯PBRå‘¢ï¼Ÿ</p>
<p>è®©PBRæè´¨æµåŒºåˆ«ä¸å…¶ä»–æ‰‹æ³•çš„é‡è¦ä¸€ç‚¹æ˜¯å…‰å¯¹è¡¨é¢é€ æˆçš„ç»†è…»æ•ˆæœï¼Œå®ƒæœ‰ç€æ›´ä¸ºå‡†ç¡®çš„æ¨¡æ‹Ÿï¼Œè€Œä¸”åŒæ—¶ä¸å¤±ä¸€å®šçš„è‰ºæœ¯æ„Ÿã€‚è®©æˆ‘ä»¬ä»æœ€åŸºç¡€çš„æ¦‚å¿µè¯´èµ·ï¼š</p>
<h4 id="1-æ¼«å°„ä¸åå°„"><a href="#1-æ¼«å°„ä¸åå°„" class="headerlink" title="1.æ¼«å°„ä¸åå°„"></a>1.æ¼«å°„ä¸åå°„</h4><p>è¿™æ˜¯ä¸¤ä¸ªæè´¨åˆ¶ä½œé‡Œæœ€åŸºæœ¬çš„æ¦‚å¿µï¼Œæ˜¯å…‰ä¸è¡¨é¢æœ€åŸºç¡€çš„ç›¸äº’ä½œç”¨ï¼Œå¾ˆå¤šäººéƒ½çŸ¥é“è¿™ä¸€ç‚¹ï¼Œä½†ä¸ä¸€å®šçŸ¥é“åœ¨ç‰©ç†å±‚é¢ä¸Šåˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<p>å½“ä¸€æŸå…‰ç…§å°„åˆ°ä¸€ä¸ªè¡¨é¢ï¼Œæœ‰äº›å…‰ä¼šè¢«åå°„ï¼Œå³ä»ç‰©ä½“è¡¨é¢æ²¿ç€æ³•çº¿åæ–¹å‘å¼¹å°„å›å»ã€‚è¿™ä¸€è¿‡ç¨‹å’Œä¸€ä¸ªçƒæ‰“åœ¨äº†å¢™ä¸Šæˆ–åœ°ä¸Šåå¼¹å›å»å·®ä¸å¤šã€‚åœ¨ä¸€ä¸ªå…‰æ»‘çš„è¡¨é¢ä¸Šï¼Œè¿™ä¼šäº§ç”Ÿä¸€ç§é•œé¢æ•ˆæœã€‚</p>
<p>ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å…‰éƒ½è¢«ç‰©ä½“è¡¨é¢åå¼¹å›å»ï¼Œæœ‰äº›ä¼šè¢«ç‰©ä½“è¡¨é¢å¸æ”¶ï¼Œæˆ–è€…æ•£å°„è¿›äº†ç‰©ä½“å†…éƒ¨ï¼Œæœ‰äº›æ•£å°„è¿›å»çš„å…‰åˆä¼šä»åé¢å†æ¬¡ç©¿å‡ºå»ï¼Œå†æ¬¡è¢«çœ¼ç›æˆ–ç›¸æœºæ•æ‰åˆ°ã€‚</p>
<p><img src="/2022/12/01/threejs-d-4-0/efab4-6369032157239337638822742.png"></p>
<p>- </p>
<p>å…‰çš„è¿™ç§è¢«ç‰©ä½“è¡¨é¢å¸æ”¶å’Œæ•£å°„å› å…‰çš„ä¸åŒæ³¢é•¿è€Œä¸åŒï¼Œä¹Ÿå³é¢œè‰²çš„ä¸åŒè€Œä¸åŒã€‚ç”±äºè¿™ç§æ•£å°„æä¸ºä¸è§„åˆ™ï¼Œæ‰€ä»¥çœ‹èµ·æ¥ç»™äººæ„Ÿè§‰æ˜¯æ¥è‡ªå„ä¸ªæ–¹å‘ã€‚è¿™å’Œé•œé¢æ•ˆæœå¾ˆä¸åŒï¼è¦åœ¨æè´¨é‡Œæ¨¡æ‹Ÿè¿™ç§æ•ˆæœï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªæ¼«å°„é¢œè‰²æ¥åšåˆ°ã€‚</p>
<h4 id="2-åŠé€ä¸é€æ˜"><a href="#2-åŠé€ä¸é€æ˜" class="headerlink" title="2.åŠé€ä¸é€æ˜"></a>2.åŠé€ä¸é€æ˜</h4><p>ä½†æœ‰äº›æ¼«å°„å¾ˆå¤æ‚ï¼Œæ¯”å¦‚çš®è‚¤å’Œèœ¡çƒ›çš„è¡¨é¢ï¼Œç®€å•çš„å®šä¹‰ä¸€ä¸ªæ¼«å°„é¢œè‰²æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦è€ƒè™‘æè´¨çš„åšåº¦å’Œå½¢çŠ¶ã€‚å¦‚æœç‰©ä½“æœ¬èº«å¾ˆè–„ï¼Œé‚£ä¹ˆå°±åº”è¯¥èƒ½çœ‹åˆ°é€æ˜æ•ˆæœã€‚è¿™æ—¶å°±éœ€è¦ç‰¹æ®Šæè´¨æ‰èƒ½æ¨¡æ‹Ÿäº†ã€‚</p>
<p>èƒ½é‡å®ˆæ’ï¼ˆä¸€ï¼‰<br>é€šè¿‡ä»¥ä¸Šå¯¹åå°„å’Œæ¼«å°„çš„æè¿°ï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šæ¼«å°„å’Œåå°„æ˜¯äº’æ–¥çš„ã€‚ä¸ºäº†èƒ½çœ‹åˆ°æ¼«å°„é¢œè‰²ï¼Œå…‰å¿…é¡»å…ˆç©¿è¿‡è¡¨é¢ï¼Œæˆ–è€…è¯´æ²¡èƒ½è¢«è¡¨é¢åå°„å›å»ã€‚é‚£ä¹ˆæ ¹æ®èƒ½é‡å®ˆæ’æ³•åˆ™ï¼Œå°±å‡ºç°è¿™æ ·çš„æƒ…å†µï¼šè¶Šæ˜¯åå°„å¼ºçƒˆçš„è¡¨é¢ï¼Œå…¶æ¼«å°„è¶Šæ˜¯å¼±ï¼ˆæš—ï¼‰ï¼Œå› ä¸ºæ²¡æœ‰é‚£ä¹ˆå¤šçš„å…‰ç©¿è¿‡å»ï¼Œå¤§éƒ¨åˆ†éƒ½è¢«åå°„å›å»äº†ã€‚ä¸€ä¸ªè¡¨é¢å¾ˆæ˜äº®çš„ç‰©ä½“å®ƒä¸å¯èƒ½æœ‰å¾ˆå¼ºçš„åå°„ã€‚</p>
<p><img src="/2022/12/01/threejs-d-4-0/bf8d3-6369032158373459631393348.png"></p>
<p>- </p>
<p>èƒ½é‡å®ˆæ’æ˜¯PBRæè´¨æµçš„åŸºç¡€ï¼Œè¦åšå‡ºè‡ªç„¶é€¼çœŸçš„æè´¨æ¥ï¼Œä¸å¯ä»¥æ— è§†è¿™ä¸ªè§„åˆ™ã€‚</p>
<h4 id="3-é‡‘å±"><a href="#3-é‡‘å±" class="headerlink" title="3.é‡‘å±"></a>3.é‡‘å±</h4><p>å¯¼ç”µä½“ï¼Œæ¯”å¦‚é‡‘å±æè´¨è¦ç‰¹åˆ«å•ç‹¬æ‹¿å‡ºæ¥è®²ä¸€ä¸‹ã€‚å› ä¸ºï¼š<br>é¦–å…ˆï¼Œå®ƒä»¬æ¯”ç»ç¼˜ä½“çš„è¡¨é¢æ›´åŠ å…·æœ‰åå°„æ•ˆæœï¼Œå®ƒä»¬çš„åå°„ç‡é«˜è¾¾60-90%ï¼Œè€Œç»ç¼˜ä½“åªæœ‰0-20%ã€‚é«˜åå°„ç‡è®©å…‰æ— æ³•ç©¿è¿‡è¡¨é¢è¿›å…¥ç‰©ä½“å†…éƒ¨ï¼Œä»è€Œäº§ç”Ÿäº†é—ªå…‰çš„è´¨æ„Ÿã€‚</p>
<p>å…¶æ¬¡ï¼Œé‡‘å±çš„åå°„æ•ˆæœè¿˜ä¼šéšç€å…‰è°±è€Œä¸åŒï¼Œè¿™å°±æ˜¯è¯´ï¼Œé‡‘å±çš„åå°„æ˜¯å¸¦æœ‰é¢œè‰²çš„ï¼Œè€Œä¸”å¾ˆä¸å‡åŒ€ï¼Œæ¯”å¦‚é‡‘ï¼Œé“œç­‰ã€‚è€Œç»ç¼˜ä½“çš„åå°„æ˜¯æ— è‰²çš„ã€‚</p>
<p>æœ€åï¼Œç©¿è¿‡å¯¼ç”µä½“è¡¨é¢çš„å…‰æœ€åå¤§éƒ¨åˆ†ä¹Ÿä¼šè¢«å¸æ”¶è€Œä¸æ˜¯è¢«æ•£å°„å‡ºå»ï¼Œè¿™æ—¢æ˜¯è¯´ï¼Œç†è®ºä¸Šå¯¼ç”µä½“æ˜¯æ²¡æœ‰æ¼«å°„é¢œè‰²çš„ã€‚</p>
<h4 id="4-è²æ¶…å°”"><a href="#4-è²æ¶…å°”" class="headerlink" title="4.è²æ¶…å°”"></a>4.è²æ¶…å°”</h4><p>å¥¥å¤æ–¯æ±€-è®©Â·è²æ¶…å°”ï¼Œè¿™ä¸ªäººçš„åå­—æ˜¯ç»å¯¹ä¸å¯èƒ½è¢«é—å¿˜çš„ï¼Œå› ä¸ºä»–çš„åå­—å’Œåå°„ç°è±¡ç»“åˆåˆ°äº†ä¸€èµ·å»ï¼Œä¸è¯´ä»–çš„åå­—è°ˆåå°„å‡ ä¹ä¸å¯èƒ½ã€‚</p>
<p>åœ¨CGé‡Œï¼Œè²æ¶…å°”ä»£è¡¨äº†åå°„æ•ˆæœå› è§‚å¯Ÿè§’åº¦çš„ä¸åŒè€Œä¸åŒï¼Œä¹Ÿå³æ˜¯ç‰©ä½“è¾¹ç¼˜çš„åå°„æ•ˆæœä¼šæ›´åŠ æ˜äº®ã€‚PBRæè´¨æµåœ¨è¿™ä¸ªæ•ˆæœä¸Šæœ‰å‡ ä¸ªç‰¹è‰²ï¼š</p>
<p>é¦–å…ˆï¼Œå¯¹äºæ‰€æœ‰çš„æè´¨æ¥è¯´ï¼Œåå°„æ•ˆæœåœ¨æ¥è¿‘0åº¦è§’æ—¶æœ€æ˜æ˜¾ï¼Œå°±åƒé•œé¢åå°„ä¸€æ ·ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæè´¨éƒ½æ˜¯å¦‚æ­¤ã€‚åªè¦è¶³å¤Ÿå…‰æ»‘èƒ½äº§ç”Ÿåå°„ï¼Œé‚£ä¹ˆä¸€å®šèƒ½åœ¨æŸä¸€ä¸ªè§’åº¦è§‚å¯Ÿæ—¶ï¼Œçœ‹åˆ°å®Œç¾çš„é•œé¢åå°„æ•ˆæœï¼è¿™å¬èµ·æ¥æœ‰ç‚¹ç„ä¹ï¼Œä½†è¿™å°±æ˜¯ç‰©ç†ã€‚</p>
<p>å…¶æ¬¡ï¼Œè¿™ç§åå°„æ•ˆæœçš„å˜åŒ–éšç€æè´¨çš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/27de3-6369032159485741581962421.png"></p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>è¿™ä¸ªå›¾çš„æ„æ€æ˜¯åœ¨è¯´ï¼šåœ¨æ¨¡æ‹ŸçœŸå®æè´¨æ—¶ï¼Œåå°„æ•ˆæœå¿…é¡»è¦ç¨å¾®æœ‰äº›æ”¶æ•›ï¼Œè‡³å°‘è¦åœ¨éœ€è¦å¼±çš„åœ°æ–¹å¼±ä¸‹æ¥ã€‚è¿™å¹¶ä¸éš¾åšåˆ°ï¼Œè€Œä¸”ç°åœ¨çš„æè´¨ç³»ç»Ÿéƒ½èƒ½è‡ªå¸¦è¿™ç§è²å°¼å°”æ•ˆæœäº†ã€‚PBRæè´¨æµæ˜¯å¯ä»¥å¸¦å‡ºäº›è‰ºæœ¯å¤„ç†çš„ï¼Œåœ¨åšå‡ºåŸºç¡€åå°„æ•ˆæœåï¼Œä½ å¯ä»¥å†æ·»åŠ ä¸€äº›å®Œå…¨åå°„çš„å°å±€éƒ¨åšç‚¹ç¼€ã€‚</p>
<h4 id="5-å¾®è¡¨é¢"><a href="#5-å¾®è¡¨é¢" class="headerlink" title="5.å¾®è¡¨é¢"></a>5.å¾®è¡¨é¢</h4><p>ä¸Šé¢éƒ½æ˜¯åŸºäºç‰©ä½“è¡¨é¢è¯´çš„ä¸œè¥¿ï¼Œæˆ–è€…è¯´æ˜¯ç‰©ä½“èƒ½è¢«æ¸²æŸ“å‡ºæ¥çš„æ•ˆæœã€‚ä½†ç‰©ä½“è¡¨é¢å¹¶éå®Œç¾æ— ç‘•ï¼Œå°å‡¹ç—•ï¼Œè£‚çº¹ï¼Œå‡¹å‡¸ï¼Œè¿™äº›æ— æ³•è¢«çœ¼ç›çœ‹åˆ°ï¼Œä¹Ÿæ— æ³•åœ¨æ³•çº¿è´´å›¾é‡Œè¢«ä½“ç°å‡ºæ¥çš„å¾®å°ç»†èŠ‚ï¼Œç¡®å®å·¦å³æ¼«å°„å’Œåå°„æ•ˆæœçš„çœŸæ­£å› ç´ ã€‚</p>
<p><img src="/2022/12/01/threejs-d-4-0/923ff-6369032160821103922455437.png"></p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>ä¸Šå›¾ä¸­ï¼Œå¹³è¡Œç…§å°„åˆ°ç‰©ä½“è¡¨é¢çš„ä¸‰é“å…‰çº¿è¢«åå°„åˆ°ä¸åŒçš„æ–¹å‘ä¸Šå»äº†ï¼Œå› ä¸ºå®ƒä»¬æ‰€ç…§åˆ°çš„ç‰©ä½“è¡¨é¢å…·æœ‰ä¸åŒçš„æ–¹å‘ï¼Œä½¿å¾—è¿™ç§åå°„çš„è§’åº¦å˜å¾—ä¸å¯é¢„æµ‹ï¼Œè¿™å°±äº§ç”Ÿäº†æ¨¡ç³Šåå°„æ•ˆæœã€‚</p>
<p>ä½†è¦ä»ç‰©ç†çº§åˆ«ä¸Šæ¨¡æ‹Ÿå‡ºè¿™ç§æ— è§„åˆ™çš„åå°„éœ€è¦å¤§é‡çš„å†…å­˜å’Œè®¡ç®—é‡ï¼Œåœ¨CGé‡Œåªèƒ½å¤§æ¦‚æ¨¡æ‹Ÿä¸€ä¸ªæ•´ä½“æ•ˆæœï¼Œæˆ‘ä»¬ä¸€èˆ¬å«åå°„å…‰æ³½åº¦æˆ–åå°„æ¨¡ç³Šåº¦ã€‚</p>
<p>è¿™æ˜¯æè´¨åˆ¶ä½œé‡Œä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œå› ä¸ºçœŸå®ä¸–ç•Œé‡Œåˆ°å¤„å……æ»¡äº†è¿™ç§æ¨¡ç³Šåå°„æ•ˆæœã€‚</p>
<p>èƒ½é‡å®ˆæ’ï¼ˆäºŒï¼‰<br>ç°åœ¨æ¸²æŸ“å™¨éƒ½æœ‰äº†è¿™ç§è™šæ‹Ÿçš„æ¨¡ç³Šåå°„çš„æ¨¡æ‹Ÿï¼Œæ­£ç¡®çš„å‚æ•°èƒ½è®©æ•ˆæœæ›´åŠ é€¼çœŸï¼Œæ¯”å¦‚ç²—ç³™çš„è¡¨é¢ä¼šäº§ç”Ÿæ›´å¤§æ›´æŸ”å’Œçš„é«˜å…‰åŒºï¼Œè¯·çœ‹ä¸‹å›¾ï¼š</p>
<p><img src="/2022/12/01/threejs-d-4-0/70f54-6369032161855385747450216.png" alt="05.png"></p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>å›¾ä¸­çš„å°çƒå…·æœ‰ç›¸åŒçš„åå°„å¼ºåº¦ï¼Œä½†å› ä¸ºä¸åŒçš„åå°„æ¨¡ç³Šåº¦è€Œè¡¨ç°å‡ºä¸åŒçš„è´¨æ„Ÿï¼Œé«˜å…‰éšç€å…‰æ»‘åº¦è¶Šæ¥è¶Šæ¸…æ™°æ˜äº®ã€‚è¿™åˆæ˜¯èƒ½é‡å®ˆæ’çš„æ³•åˆ™ä½“ç°ä¹‹ä¸€ã€‚</p>
<p>å¾®è¡¨é¢åå°„ä¹ŸåŒæ ·éµå®ˆè²æ¶…å°”æ•ˆæœ</p>
<p><img src="/2022/12/01/threejs-d-4-0/4232b-6369032162994187744034914.png"></p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>PBRæè´¨ä¼¼ä¹åœ¨ä¸€å¤œä¹‹é—´æ”¹å˜äº†äººä»¬å¯¹äºå¼•æ“å®æ—¶æ¸²æŸ“ç”»é¢çš„ç†è§£ã€‚åœ¨æ¸¸æˆä¸­æˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿä½“éªŒåˆ°é”ˆèš€çš„é‡‘å±ï¼Œåšé‡çš„çš®é©ï¼Œç²¾ç»†çš„çº¹ç†ï¼Œæ›´åŠ çœŸå®çš„ä¸–ç•Œä»æ­¤å±•ç°åœ¨çœ¼å‰ã€‚ä»æ­¤ï¼ŒPBRæè´¨æˆä¸ºäº†â€œæ¬¡æ—¶ä»£â€æ¸¸æˆå¿…å¤‡çš„æ ‡å‡†ã€‚</p>
<h3 id="ä¸ƒã€æ ‡å‡†ç½‘æ ¼æè´¨"><a href="#ä¸ƒã€æ ‡å‡†ç½‘æ ¼æè´¨" class="headerlink" title="ä¸ƒã€æ ‡å‡†ç½‘æ ¼æè´¨"></a>ä¸ƒã€æ ‡å‡†ç½‘æ ¼æè´¨</h3><blockquote>
<p>ä¸€ç§åŸºäºç‰©ç†çš„æ ‡å‡†æè´¨</p>
<p>åŸºäºç‰©ç†çš„æ¸²æŸ“ï¼ˆPBRï¼‰è¿™ç§æ–¹æ³•ä¸æ—§æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸ä½¿ç”¨è¿‘ä¼¼å€¼æ¥è¡¨ç¤ºå…‰ä¸è¡¨é¢çš„ç›¸äº’ä½œç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨ç‰©ç†ä¸Šæ­£ç¡®çš„æ¨¡å‹ã€‚ æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œä¸æ˜¯åœ¨ç‰¹å®šç…§æ˜ä¸‹è°ƒæ•´æè´¨ä»¥ä½¿å…¶çœ‹èµ·æ¥å¾ˆå¥½ï¼Œè€Œæ˜¯å¯ä»¥åˆ›å»ºä¸€ç§æè´¨ï¼Œèƒ½å¤Ÿâ€œæ­£ç¡®â€åœ°åº”å¯¹æ‰€æœ‰å…‰ç…§åœºæ™¯ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬PBRæè´¨æ˜¯å’Œå…‰ç›¸è¾…ç›¸æˆçš„</p>
<h4 id="1-PointLight-color-Integer-intensity-Float-distance-Number-decay-Float"><a href="#1-PointLight-color-Integer-intensity-Float-distance-Number-decay-Float" class="headerlink" title="1.PointLight( color : Integer, intensity : Float, distance : Number, decay : Float )"></a>1.PointLight( color : Integer, intensity : Float, distance : Number, decay : Float )</h4><p>color - (å¯é€‰å‚æ•°)) åå…­è¿›åˆ¶å…‰ç…§é¢œè‰²ã€‚ ç¼ºçœå€¼ 0xffffff (ç™½è‰²)ã€‚<br>intensity - (å¯é€‰å‚æ•°) å…‰ç…§å¼ºåº¦ã€‚ ç¼ºçœå€¼ 1ã€‚<br>distance - è¿™ä¸ªè·ç¦»è¡¨ç¤ºä»å…‰æºåˆ°å…‰ç…§å¼ºåº¦ä¸º0çš„ä½ç½®ã€‚ å½“è®¾ç½®ä¸º0æ—¶ï¼Œå…‰æ°¸è¿œä¸ä¼šæ¶ˆå¤±(è·ç¦»æ— ç©·å¤§)ã€‚ç¼ºçœå€¼ 0.<br>decay - æ²¿ç€å…‰ç…§è·ç¦»çš„è¡°é€€é‡ã€‚ç¼ºçœå€¼ 2</p>
<h4 id="2-AmbientLight-color-Integer-intensity-Float"><a href="#2-AmbientLight-color-Integer-intensity-Float" class="headerlink" title="2.AmbientLight( color : Integer, intensity : Float )"></a>2.AmbientLight( color : Integer, intensity : Float )</h4><p>color - (å‚æ•°å¯é€‰ï¼‰é¢œè‰²çš„rgbæ•°å€¼ã€‚ç¼ºçœå€¼ä¸º 0xffffffã€‚<br>intensity - (å‚æ•°å¯é€‰)å…‰ç…§çš„å¼ºåº¦ã€‚ç¼ºçœå€¼ä¸º 1ã€‚</p>
<pre><code class="javascript">//main.js+
const textureLoader = new THREE.TextureLoader();
const mbColortexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_diffuse.jpg&#39;) 
const mbHeighttexture = textureLoader.load(&#39;./texture/road_with_tram_rails_24_71_height.jpg&#39;) 
mbColortexture.wrapS = THREE.RepeatWrapping
mbColortexture.wrapT = THREE.RepeatWrapping
mbColortexture.center.set(0.5,0.5)
// mbColortexture.rotation = Math.PI / 4
const geometry = new THREE.BoxGeometry( 1, 1, 1 );
//å’ŒåŸºç¡€ç½‘æ ¼æè´¨ä¸€æ ·å…·å¤‡ç›¸åŒå±æ€§
const material = new THREE.MeshStandardMaterial( &#123; 
    color: &#39;#ffffff&#39;,
    map:mbColortexture,
    aoMap:mbHeighttexture,
    aoMapIntensity:1
 &#125; );
const cube = new THREE.Mesh( geometry, material );
console.log(cube)
scene.add( cube );

// const light = new THREE.AmbientLight( 0xffffff); // ç¯å¢ƒå…‰ï¼Œç›¸å½“äºå„ä¸ªæ–¹å‘å°„è¿‡æ¥çš„å…‰ï¼ˆæ²¡æœ‰æŠ•å½±ï¼‰
// scene.add( light );

const light = new THREE.PointLight( 0xffffff, 5, 100 );//ç‚¹å…‰æºï¼Œç›¸å½“äºç¯æ³¡ï¼Œç›¸å¯¹ç¯å…‰çš„ç‰©ä½“èƒŒé¢æ˜¯æ²¡å…‰çš„
light.position.set( 10, 10, 10 );
scene.add( light );
</code></pre>
<p><img src="/2022/12/01/threejs-d-4-0/image-20221201154732277.png"></p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p>[ä»€ä¹ˆæ˜¯PBR]: 	â€œ<a target="_blank" rel="noopener" href="https://tao0.date/2021/06/shenmeshipbrcaizhi/">https://tao0.date/2021/06/shenmeshipbrcaizhi/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-threejs-d-3-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/30/threejs-d-3-0/"
    >threejs-d-3.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/30/threejs-d-3-0/" class="article-date">
  <time datetime="2022-11-30T08:46:30.000Z" itemprop="datePublished">2022-11-30</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/">Three.js</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/threejs-d-3-0/">threejs-d-3.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="threejs-d-3-0"><a href="#threejs-d-3-0" class="headerlink" title="threejs-d-3.0"></a>threejs-d-3.0</h1><h3 id="ä¸€ã€é€šè¿‡Clockè·Ÿè¸ªæ—¶é—´å¤„ç†åŠ¨ç”»"><a href="#ä¸€ã€é€šè¿‡Clockè·Ÿè¸ªæ—¶é—´å¤„ç†åŠ¨ç”»" class="headerlink" title="ä¸€ã€é€šè¿‡Clockè·Ÿè¸ªæ—¶é—´å¤„ç†åŠ¨ç”»"></a>ä¸€ã€é€šè¿‡Clockè·Ÿè¸ªæ—¶é—´å¤„ç†åŠ¨ç”»</h3><blockquote>
<p>æˆ‘ä»¬é€šè¿‡æ—¶é—´å±æ€§å»æ§åˆ¶ç‰©ä½“åŠ¨ç”»ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯¹è±¡ç”¨äºè·Ÿè¸ªæ—¶é—´</p>
</blockquote>
<pre><code class="javascript">const clock = THREE.Clock();
const time = clock.getElapsedTime();//è·å–æ—¶é’Ÿè¿è¡Œçš„æ€»æ—¶é•¿
const getDelta = clock.getDelta();//è·å–ä¸¤æ¬¡æ¸²æŸ“çš„é—´éš”æ—¶é•¿
</code></pre>
<p>Clock( autoStart : Boolean )</p>
<p>autoStart â€” (å¯é€‰) æ˜¯å¦è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ .getDelta() æ—¶è‡ªåŠ¨å¼€å¯æ—¶é’Ÿã€‚é»˜è®¤å€¼æ˜¯ <strong>true</strong>ã€‚</p>
<h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><p>.autoStart : Boolean</p>
<p>å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ .getDelta() æ—¶å¼€å¯æ—¶é’Ÿã€‚é»˜è®¤å€¼æ˜¯ <strong>true</strong>ã€‚</p>
<p>.startTime : Float</p>
<p>å­˜å‚¨æ—¶é’Ÿæœ€åä¸€æ¬¡è°ƒç”¨ start æ–¹æ³•çš„æ—¶é—´ã€‚é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚</p>
<p>.oldTime : Float</p>
<p>å­˜å‚¨æ—¶é’Ÿæœ€åä¸€æ¬¡è°ƒç”¨ start, .getElapsedTime() æˆ– .getDelta() æ–¹æ³•çš„æ—¶é—´ã€‚é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚</p>
<p>.elapsedTime : Float</p>
<p>ä¿å­˜æ—¶é’Ÿè¿è¡Œçš„æ€»æ—¶é•¿ã€‚é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚</p>
<p>.running : Boolean</p>
<p>åˆ¤æ–­æ—¶é’Ÿæ˜¯å¦åœ¨è¿è¡Œã€‚é»˜è®¤å€¼æ˜¯ <strong>false</strong>ã€‚</p>
<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>.start () : undefined</p>
<p>å¯åŠ¨æ—¶é’Ÿã€‚åŒæ—¶å°† startTime å’Œ oldTime è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚ è®¾ç½® elapsedTime ä¸º <strong>0</strong>ï¼Œå¹¶ä¸”è®¾ç½® running ä¸º <strong>true</strong>.</p>
<p>.stop () : undefined</p>
<p>åœæ­¢æ—¶é’Ÿã€‚åŒæ—¶å°† oldTime è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚</p>
<p>.getElapsedTime () : Float</p>
<p>è·å–è‡ªæ—¶é’Ÿå¯åŠ¨åçš„ç§’æ•°ï¼ŒåŒæ—¶å°† .oldTime è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚<br>å¦‚æœ .autoStart è®¾ç½®ä¸º <strong>true</strong> ä¸”æ—¶é’Ÿå¹¶æœªè¿è¡Œï¼Œåˆ™è¯¥æ–¹æ³•åŒæ—¶å¯åŠ¨æ—¶é’Ÿã€‚</p>
<p>.getDelta () : Float</p>
<p>è·å–è‡ª .oldTime è®¾ç½®ååˆ°å½“å‰çš„ç§’æ•°ã€‚ åŒæ—¶å°† .oldTime è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚<br>å¦‚æœ .autoStart è®¾ç½®ä¸º <strong>true</strong> ä¸”æ—¶é’Ÿå¹¶æœªè¿è¡Œï¼Œåˆ™è¯¥æ–¹æ³•åŒæ—¶å¯åŠ¨æ—¶é’Ÿã€‚</p>
<h3 id="äºŒã€GsapåŠ¨ç”»åº“çš„åŸºæœ¬ä½¿ç”¨"><a href="#äºŒã€GsapåŠ¨ç”»åº“çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="äºŒã€GsapåŠ¨ç”»åº“çš„åŸºæœ¬ä½¿ç”¨"></a>äºŒã€GsapåŠ¨ç”»åº“çš„åŸºæœ¬ä½¿ç”¨</h3><blockquote>
<p>è¿™ä¸ªåŠ¨ç”»åº“çš„APIéƒ½æœ‰ç›¸å…³çš„åŠ¨ç”»ç¤ºä¾‹ï¼Œæ‰€ä»¥å³ä½¿çœ‹ä¸æ‡‚æ–‡æ¡£çš„åŒå­¦ä½¿ç”¨ä¹Ÿæ˜¯å¯ä»¥æ˜ç™½çš„</p>
</blockquote>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130085026756.png"></p>
<h4 id="1-å®‰è£…å¹¶ä½¿ç”¨"><a href="#1-å®‰è£…å¹¶ä½¿ç”¨" class="headerlink" title="1.å®‰è£…å¹¶ä½¿ç”¨"></a>1.å®‰è£…å¹¶ä½¿ç”¨</h4><pre><code class="ini">npm install gsap //å®‰è£…gsap
</code></pre>
<pre><code class="javascript">//main.js
import gsap from &#39;gsap&#39;
gsap.to(cube.position,&#123;x:20,duration:5&#125;)//åŠ¨ç”»å±æ€§ï¼Œæ§åˆ¶ç‰©ä½“ä½ç½®å’Œè¿åŠ¨æ—¶é—´ï¼ˆdurationï¼‰
gsap.to(cube.rotation,&#123;x:Math.PI/4,duration:5&#125;)//åŠ¨ç”»å±æ€§ï¼Œæ§åˆ¶ç‰©ä½“æ—‹è½¬å’Œè¿åŠ¨æ—¶é—´ï¼ˆdurationï¼‰
</code></pre>
<p>å½“ç„¶æˆ‘ä»¬çš„åŠ¨ç”»è¿åŠ¨è‚¯å®šä¸åªæ˜¯åŒ€é€Ÿè¿åŠ¨ï¼Œä¹Ÿæ˜¯å¯ä»¥é…ç½®æˆ‘ä»¬çš„ç¼“å†²å™¨ï¼ˆå’Œ<a target="_blank" rel="noopener" href="https://cubic-bezier.com/#.17,.67,.83,.67">è´èµ›å°”æ›²çº¿</a>å·®ä¸å¤šï¼‰</p>
<pre><code class="javascript">gsap.to(cube.position,&#123;x:20,duration:5,ease: &quot;elastic.out(1, 0.2)&quot;&#125;)
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130085456408.png"></p>
<h4 id="2-å…¶ä»–å±æ€§ä½¿ç”¨"><a href="#2-å…¶ä»–å±æ€§ä½¿ç”¨" class="headerlink" title="2.å…¶ä»–å±æ€§ä½¿ç”¨"></a>2.å…¶ä»–å±æ€§ä½¿ç”¨</h4><blockquote>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨åŠ¨ç”»å¼€å§‹ã€æ›´æ–°ã€ç»“æŸå»æ‰§è¡Œå›è°ƒ</p>
<p>æˆ‘ä»¬<a target="_blank" rel="noopener" href="https://greensock.com/docs/v3/GSAP/gsap.to()">gsap.to()</a>è¿˜æœ‰å…¶ä»–åŠ¨ç”»çš„å±æ€§ï¼Œæ¯”å¦‚å¾€è¿”è¿åŠ¨ã€å®šä¹‰å…³é”®å¸§ã€å¾ªç¯ç­‰ç­‰</p>
</blockquote>
<pre><code class="javascript">//main.js
import gsap from &#39;gsap&#39;
gsap.to(cube.position,&#123;
    x:20,
    duration:5,
    ease: &quot;elastic.out(1, 0.2)&quot;,
    onStart:()=&gt;&#123;console.log(&#39;åŠ¨ç”»å¼€å§‹&#39;)&#125;,
    onComplete:()=&gt;&#123;console.log(&#39;åŠ¨ç”»ç»“æŸ&#39;)&#125;,
    onUpdate:()=&gt;&#123;console.log(&#39;æ›´æ–°åŠ¨ç”»&#39;)&#125;
&#125;)
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130090823212.png"></p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®è¿”å›å¯¹è±¡å®ç°å¯¹åŠ¨ç”»çš„æ§åˆ¶</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;threejs&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;nav&quot;&gt;
        &lt;button id=&quot;play&quot;&gt;play()&lt;/button&gt;
        &lt;button id=&quot;pause&quot;&gt;pause()&lt;/button&gt;
        &lt;button id=&quot;resume&quot;&gt;resume()&lt;/button&gt;
        &lt;button id=&quot;reverse&quot;&gt;reverse()&lt;/button&gt;
        &lt;button id=&quot;restart&quot;&gt;restart()&lt;/button&gt;
      &lt;/div&gt;
    &lt;script src=&quot;./main.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="javascript">const tween = gsap.to(cube.position,&#123;
    x:20,
    duration:5,
    ease: &quot;elastic.out(1, 0.2)&quot;,
    onStart:()=&gt;&#123;console.log(&#39;åŠ¨ç”»å¼€å§‹&#39;)&#125;,
    onComplete:()=&gt;&#123;console.log(&#39;åŠ¨ç”»ç»“æŸ&#39;)&#125;,
    onUpdate:()=&gt;&#123;console.log(&#39;æ›´æ–°åŠ¨ç”»&#39;)&#125;
&#125;)

document.querySelector(&quot;#play&quot;).onclick = () =&gt; tween.play();//å¼€å¯åŠ¨ç”»
document.querySelector(&quot;#pause&quot;).onclick = () =&gt; tween.pause();//æš‚åœåŠ¨ç”»
document.querySelector(&quot;#resume&quot;).onclick = () =&gt; tween.resume();//ç»§ç»­æ’­æ”¾åŠ¨ç”»
document.querySelector(&quot;#reverse&quot;).onclick = () =&gt; tween.reverse();//åè½¬åŠ¨ç”»
document.querySelector(&quot;#restart&quot;).onclick = () =&gt; tween.restart();//é‡æ–°å¼€å§‹
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130092808802.png"></p>
<h3 id="ä¸‰ã€è‡ªé€‚åº”æ›´æ”¹"><a href="#ä¸‰ã€è‡ªé€‚åº”æ›´æ”¹" class="headerlink" title="ä¸‰ã€è‡ªé€‚åº”æ›´æ”¹"></a>ä¸‰ã€è‡ªé€‚åº”æ›´æ”¹</h3><blockquote>
<p>æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç”»é¢èƒ½å¤Ÿé€‚åº”æˆ‘ä»¬å±å¹•çš„æ›´æ”¹</p>
</blockquote>
<pre><code class="javascript">//main.js+
//ç›‘å¬å±å¹•å˜åŒ–
window.addEventListener(&#39;resize&#39;,()=&gt;&#123;
  //æ›´æ–°æ‘„å½±æœº
    camera.aspect = window.innerWidth/window.innerHeight;
  //æ›´æ–°æ‘„å½±æœºçš„æŠ•å½±çŸ©é˜µ
    camera.updateProjectionMatrix();
  //æ›´æ–°æ¸²æŸ“å™¨
    renderer.setSize(window.innerWidth,window.innerHeight);
  //æ›´æ–°æ¸²æŸ“å™¨çš„åƒç´ æ¯”
    renderer.setPixelRatio(window.devicePixelRatio);
&#125;)
</code></pre>
<h3 id="å››ã€å¯è§†åŒ–è°ƒèŠ‚"><a href="#å››ã€å¯è§†åŒ–è°ƒèŠ‚" class="headerlink" title="å››ã€å¯è§†åŒ–è°ƒèŠ‚"></a>å››ã€å¯è§†åŒ–è°ƒèŠ‚</h3><blockquote>
<p>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå„ç§å‚æ•°æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬éœ€è¦æ”¹ä¸€ä¸‹çœ‹ä¸€ä¸‹æ•ˆæœæ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„éœ€è¦ï¼Œè¿™æ ·æˆ‘ä»¬çš„æ•ˆç‡å°±ä¼šé™ä½ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€æ¬¾èƒ½å¿«é€Ÿè°ƒèŠ‚å‚æ•°çš„å¯è§†åŒ–å·¥å…·<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/dat.gui">dat.gui</a></p>
</blockquote>
<h4 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h4><pre><code class="ini">npm install --save dat.gui
</code></pre>
<h4 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2.ä½¿ç”¨"></a>2.ä½¿ç”¨</h4><p>ä¿®æ”¹æ•°å€¼</p>
<pre><code class="javascript">import dat from &#39;dat.gui&#39;//å¼•å…¥
const gui = new dat.GUI();//åˆå§‹åŒ–

gui.add(cube.position,&#39;x&#39;)//æ·»åŠ è¦æ§åˆ¶çš„å±æ€§
.min(0)//æœ€å°å€¼
.max(20)//æœ€å¤§å€¼
.name(&#39;ç§»åŠ¨xåæ ‡&#39;)//æ§åˆ¶å™¨åç§°
.step(0.1)//æ”¹å˜åˆ»åº¦
.onChange(value=&gt;console.log(&#39;xåæ ‡æ”¹å˜äº†ï¼š&#39;+value))//åæ ‡æ”¹å˜è§¦å‘
.onFinishChange(value=&gt;console.log(&#39;xåæ ‡åœæ­¢æ”¹å˜äº†ï¼š&#39;+value))//åæ ‡åœæ­¢æ”¹å˜è§¦å‘
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130103244105.png"></p>
<p>ä¿®æ”¹é¢œè‰²</p>
<pre><code class="javascript">const parm = &#123;
    color:&#39;#ffffff&#39;
&#125;
gui.addColor(parm,&#39;color&#39;)
.name(&#39;ç‰©ä½“é¢œè‰²&#39;)
.onChange(value=&gt;&#123;
    cube.material.color.set(value)
&#125;)
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130105101668.png"></p>
<blockquote>
<p>æˆ‘ä»¬çš„dat.guiè¿˜æœ‰è®¸å¤šAPIå¯ä»¥è°ƒç”¨ï¼Œå…·ä½“çš„æˆ‘ä»¬å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://github.com/dataarts/dat.gui/blob/master/API.md">dat.gui-api</a></p>
</blockquote>
<h3 id="äº”ã€BufferGeometryåˆ›å»ºé¡¶ç‚¹åˆ›å»ºçŸ©å½¢"><a href="#äº”ã€BufferGeometryåˆ›å»ºé¡¶ç‚¹åˆ›å»ºçŸ©å½¢" class="headerlink" title="äº”ã€BufferGeometryåˆ›å»ºé¡¶ç‚¹åˆ›å»ºçŸ©å½¢"></a>äº”ã€BufferGeometryåˆ›å»ºé¡¶ç‚¹åˆ›å»ºçŸ©å½¢</h3><blockquote>
<p>æˆ‘ä»¬æ‰€è§çš„ç«‹æ–¹ä½“ï¼Œæ˜¯ç”±é¡¶ç‚¹åæ ‡åˆ›å»ºçš„é¢å½¢æˆçš„</p>
<p>ä¹Ÿå¯ä»¥çœ‹<a href="https://mengfeng.github.io/2022/11/18/webgl/">webgl</a>é‡Œæœ‰ä¸€äº›åŸºç¡€çš„çŸ¥è¯†å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£ç‚¹ä¸é¢çš„å…³ç³»</p>
<p>å®˜æ–¹æè¿°ï¼šæ˜¯é¢ç‰‡ã€çº¿æˆ–ç‚¹å‡ ä½•ä½“çš„æœ‰æ•ˆè¡¨è¿°ã€‚åŒ…æ‹¬é¡¶ç‚¹ä½ç½®ï¼Œé¢ç‰‡ç´¢å¼•ã€æ³•ç›¸é‡ã€é¢œè‰²å€¼ã€UV åæ ‡å’Œè‡ªå®šä¹‰ç¼“å­˜å±æ€§å€¼ã€‚ä½¿ç”¨ BufferGeometry å¯ä»¥æœ‰æ•ˆå‡å°‘å‘ GPU ä¼ è¾“ä¸Šè¿°æ•°æ®æ‰€éœ€çš„å¼€é”€ã€‚</p>
</blockquote>
<pre><code class="javascript">//main.js
import * as THREE from &#39;three&#39;
import &#123; OrbitControls &#125; from &#39;three/examples/jsm/controls/OrbitControls&#39; 


const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
const renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

const axesHelper = new THREE.AxesHelper( 30 );//è½´çš„çº¿æ®µé•¿åº¦. é»˜è®¤ä¸º 1.
scene.add( axesHelper );//æ·»åŠ åˆ°åœºæ™¯

const geometry = new THREE.BufferGeometry();
// åˆ›å»ºä¸€ä¸ªç®€å•çš„çŸ©å½¢. åœ¨è¿™é‡Œæˆ‘ä»¬å·¦ä¸Šå’Œå³ä¸‹é¡¶ç‚¹è¢«å¤åˆ¶äº†ä¸¤æ¬¡ã€‚
// å› ä¸ºåœ¨ä¸¤ä¸ªä¸‰è§’é¢ç‰‡é‡Œï¼Œè¿™ä¸¤ä¸ªé¡¶ç‚¹éƒ½éœ€è¦è¢«ç”¨åˆ°ã€‚
const vertices = new Float32Array( [
    -1.0, -1.0,  1.0,
     1.0, -1.0,  1.0,
     1.0,  1.0,  1.0,

     1.0,  1.0,  1.0,
    -1.0,  1.0,  1.0,
    -1.0, -1.0,  1.0
] );
// itemSize = 3 å› ä¸ºæ¯ä¸ªé¡¶ç‚¹éƒ½æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ã€‚
geometry.setAttribute( &#39;position&#39;, new THREE.BufferAttribute( vertices, 3 ) );
const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );
const cube = new THREE.Mesh( geometry, material );
console.log(cube)

 
scene.add( cube );
const controls = new OrbitControls( camera,renderer.domElement  );
camera.position.set(0,20,100);
controls.update();
function animate() &#123;
   
    requestAnimationFrame( animate );
    controls.update();
    renderer.render( scene, camera );
&#125;
animate();

window.addEventListener(&#39;resize&#39;,()=&gt;&#123;
    // console.log(&#39;å±å¹•å˜åŒ–äº†&#39;)
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
&#125;)
</code></pre>
<p><img src="/2022/11/30/threejs-d-3-0/image-20221130162558717.png"></p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[GSAP]: 	â€œ<a target="_blank" rel="noopener" href="https://github.com/greensock/GSAP">https://github.com/greensock/GSAP</a> â€œ<br>[gsap]: 	â€œ<a target="_blank" rel="noopener" href="https://greensock.com/gsap/">https://greensock.com/gsap/</a> â€œ<br>[Cubic Bezier]: 	â€œ<a target="_blank" rel="noopener" href="https://cubic-bezier.com/#.17,.67,.83,.67">https://cubic-bezier.com/#.17,.67,.83,.67</a> â€œ<br>[dat.gui]: 	â€œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/dat.gui">https://www.npmjs.com/package/dat.gui</a> â€œ<br>[dat.gui-api]: 	â€œ<a target="_blank" rel="noopener" href="https://github.com/dataarts/dat.gui/blob/master/API.md">https://github.com/dataarts/dat.gui/blob/master/API.md</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-threejs-d-2-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/29/threejs-d-2-0/"
    >threejs-d-2.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/29/threejs-d-2-0/" class="article-date">
  <time datetime="2022-11-29T08:43:31.000Z" itemprop="datePublished">2022-11-29</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/">Three.js</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/threejs-d-2-0/">threejs-d-2.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="threejs-d-2-0"><a href="#threejs-d-2-0" class="headerlink" title="threejs-d-2.0"></a>threejs-d-2.0</h1><h3 id="ä¸€ã€åˆ›å»ºç¬¬ä¸€ä¸ªthreejsåº”ç”¨"><a href="#ä¸€ã€åˆ›å»ºç¬¬ä¸€ä¸ªthreejsåº”ç”¨" class="headerlink" title="ä¸€ã€åˆ›å»ºç¬¬ä¸€ä¸ªthreejsåº”ç”¨"></a>ä¸€ã€åˆ›å»ºç¬¬ä¸€ä¸ªthreejsåº”ç”¨</h3><p>ä»£ç æ±‡æ€»ï¼š</p>
<pre><code class="javascript">//main.js
import * as THREE from &#39;three&#39;

const scene = new THREE.Scene();//åˆ›å»ºåœºæ™¯
const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );//åˆ›å»ºé€è§†ç›¸æœºï¼ˆç›¸æœºä¸­çš„ä¸€ç§ï¼‰
const renderer = new THREE.WebGLRenderer();//åˆ›å»ºæ¸²æŸ“å™¨
renderer.setSize( window.innerWidth, window.innerHeight );//å°†è¾“å‡ºcanvasçš„å¤§å°è°ƒæ•´ä¸º(width, height)å¹¶è€ƒè™‘è®¾å¤‡åƒç´ æ¯”ï¼Œä¸”å°†è§†å£ä»(0, 0)å¼€å§‹è°ƒæ•´åˆ°é€‚åˆå¤§å°
document.body.appendChild( renderer.domElement );//å°†rendererï¼ˆæ¸²æŸ“å™¨ï¼‰çš„domå…ƒç´ ï¼ˆrenderer.domElementï¼‰æ·»åŠ åˆ°æˆ‘ä»¬çš„HTMLæ–‡æ¡£ä¸­

const geometry = new THREE.BoxGeometry( 1, 1, 1 );//åˆ›å»ºå‡ ä½•ä½“
const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );//åˆ›å»ºåŸºç¡€ç½‘æ ¼æè´¨
const cube = new THREE.Mesh( geometry, material );//ä½¿ç”¨æ„é€ å™¨
scene.add( cube );//å°†å‡ ä½•ä½“æ·»åŠ åˆ°åœºæ™¯
camera.position.z = 5;//è°ƒæ•´ç›¸æœºä½ç½®ï¼ˆé»˜è®¤0ï¼Œ0ï¼Œ0ï¼‰

//å‡ ä½•ä½“å¾ªç¯æ—‹è½¬åŠ¨ç”»
function animate() &#123;
    requestAnimationFrame( animate );
  //æ—‹è½¬åæ ‡å˜æ¢
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;
  //é‡æ–°æ¸²æŸ“å‡ ä½•ä½“
    renderer.render( scene, camera );
&#125;
animate();
</code></pre>
<h4 id="1-åˆ›å»ºåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨"><a href="#1-åˆ›å»ºåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨" class="headerlink" title="1.åˆ›å»ºåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨"></a>1.åˆ›å»ºåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨</h4><blockquote>
<p>å¦‚æœæˆ‘ä»¬æœ‰ç©è¿‡ä¸‰ç»´è½¯ä»¶çš„åŒå­¦åº”è¯¥ä¸ä¼šé™Œç”Ÿè¿™å‡ ä¸ªæ¦‚å¿µ</p>
<p>æˆ‘ä»¬ä¸‹é¢ä»¥ä¸‰ç»´è½¯ä»¶C4Dæ¥ç®€å•è®¤è¯†ä¸€ä¸‹å§</p>
</blockquote>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129085326176.png"></p>
<p>æˆ‘ä»¬èŠ±ä¸€ç‚¹ç‚¹æ—¶é—´æ¥è§£é‡Šä¸€ä¸‹è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬ç°åœ¨å»ºç«‹äº†åœºæ™¯ã€ç›¸æœºå’Œæ¸²æŸ“å™¨ã€‚</p>
<pre><code class="javascript">const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
const renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );
</code></pre>
<p>three.jsé‡Œæœ‰å‡ ç§ä¸åŒçš„ç›¸æœºï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<strong>PerspectiveCamera</strong>ï¼ˆé€è§†æ‘„åƒæœºï¼‰ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong>è§†é‡è§’åº¦ï¼ˆFOVï¼‰</strong>ã€‚è§†é‡è§’åº¦å°±æ˜¯æ— è®ºåœ¨ä»€ä¹ˆæ—¶å€™ï¼Œä½ æ‰€èƒ½åœ¨æ˜¾ç¤ºå™¨ä¸Šçœ‹åˆ°çš„åœºæ™¯çš„èŒƒå›´ï¼Œå®ƒçš„å•ä½æ˜¯è§’åº¦(ä¸å¼§åº¦åŒºåˆ†å¼€)ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>é•¿å®½æ¯”ï¼ˆaspect ratioï¼‰</strong>ã€‚ ä¹Ÿå°±æ˜¯ä½ ç”¨ä¸€ä¸ªç‰©ä½“çš„å®½é™¤ä»¥å®ƒçš„é«˜çš„å€¼ã€‚æ¯”å¦‚è¯´ï¼Œå½“ä½ åœ¨ä¸€ä¸ªå®½å±ç”µè§†ä¸Šæ’­æ”¾è€ç”µå½±æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å›¾åƒä»¿ä½›æ˜¯è¢«å‹æ‰çš„ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ä¸¤ä¸ªå‚æ•°æ˜¯<strong>è¿‘æˆªé¢</strong>ï¼ˆnearï¼‰å’Œ<strong>è¿œæˆªé¢</strong>ï¼ˆfarï¼‰ã€‚ å½“ç‰©ä½“æŸäº›éƒ¨åˆ†æ¯”æ‘„åƒæœºçš„<strong>è¿œæˆªé¢</strong>è¿œæˆ–è€…æ¯”<strong>è¿‘æˆªé¢</strong>è¿‘çš„æ—¶å€™ï¼Œè¯¥è¿™äº›éƒ¨åˆ†å°†ä¸ä¼šè¢«æ¸²æŸ“åˆ°åœºæ™¯ä¸­ã€‚æˆ–è®¸ç°åœ¨ä½ ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªå€¼çš„å½±å“ï¼Œä½†æœªæ¥ä¸ºäº†è·å¾—æ›´å¥½çš„æ¸²æŸ“æ€§èƒ½ï¼Œä½ å°†å¯ä»¥åœ¨ä½ çš„åº”ç”¨ç¨‹åºé‡Œå»è®¾ç½®å®ƒã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯æ¸²æŸ“å™¨ã€‚è¿™é‡Œæ˜¯æ–½å±•é­”æ³•çš„åœ°æ–¹ã€‚é™¤äº†æˆ‘ä»¬åœ¨è¿™é‡Œç”¨åˆ°çš„WebGLRendereræ¸²æŸ“å™¨ä¹‹å¤–ï¼ŒThree.jsåŒæ—¶æä¾›äº†å…¶ä»–å‡ ç§æ¸²æŸ“å™¨ï¼Œå½“ç”¨æˆ·æ‰€ä½¿ç”¨çš„æµè§ˆå™¨è¿‡äºè€æ—§ï¼Œæˆ–è€…ç”±äºå…¶ä»–åŸå› ä¸æ”¯æŒWebGLæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™å‡ ç§æ¸²æŸ“å™¨è¿›è¡Œé™çº§ã€‚</p>
<p>é™¤äº†åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å™¨çš„å®ä¾‹ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé‡Œè®¾ç½®ä¸€ä¸ªæ¸²æŸ“å™¨çš„å°ºå¯¸ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰€éœ€è¦çš„æ¸²æŸ“åŒºåŸŸçš„å®½é«˜ï¼Œæ¥è®©æ¸²æŸ“å™¨æ¸²æŸ“å‡ºçš„åœºæ™¯å¡«å……æ»¡æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¸²æŸ“å™¨å®½é«˜è®¾ç½®ä¸ºæµè§ˆå™¨çª—å£å®½é«˜ã€‚å¯¹äºæ€§èƒ½æ¯”è¾ƒæ•æ„Ÿçš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨<strong>setSize</strong>ä¼ å…¥ä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œä¾‹å¦‚<strong>window.innerWidth&#x2F;2</strong>å’Œ<strong>window.innerHeight&#x2F;2</strong>ï¼Œè¿™å°†ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨æ¸²æŸ“æ—¶ï¼Œä»¥ä¸€åŠçš„é•¿å®½å°ºå¯¸æ¸²æŸ“åœºæ™¯ã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ä¿æŒä½ çš„åº”ç”¨ç¨‹åºçš„å°ºå¯¸ï¼Œä½†æ˜¯ä»¥è¾ƒä½çš„åˆ†è¾¨ç‡æ¥æ¸²æŸ“ï¼Œä½ å¯ä»¥åœ¨è°ƒç”¨<strong>setSize</strong>æ—¶ï¼Œå°†<strong>updateStyle</strong>ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰è®¾ä¸ºfalseã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„<canvas> æ ‡ç­¾ç°åœ¨å·²ç»å…·æœ‰äº†100%çš„å®½å’Œé«˜ï¼Œè°ƒç”¨**setSize(window.innerWidth&#x2F;2, window.innerHeight&#x2F;2, false)**å°†ä½¿å¾—ä½ çš„åº”ç”¨ç¨‹åºä»¥ä¸€åŠçš„åˆ†è¾¨ç‡æ¥è¿›è¡Œæ¸²æŸ“ã€‚</p>
<pre><code class="javascript">document.body.appendChild( renderer.domElement );
</code></pre>
<p>æœ€åä¸€æ­¥å¾ˆé‡è¦ï¼Œæˆ‘ä»¬å°†<strong>renderer</strong>ï¼ˆæ¸²æŸ“å™¨ï¼‰çš„domå…ƒç´ ï¼ˆrenderer.domElementï¼‰æ·»åŠ åˆ°æˆ‘ä»¬çš„HTMLæ–‡æ¡£ä¸­ã€‚è¿™å°±æ˜¯æ¸²æŸ“å™¨ç”¨æ¥æ˜¾ç¤ºåœºæ™¯ç»™æˆ‘ä»¬çœ‹çš„<canvas>å…ƒç´ ã€‚</p>
<h4 id="2-åˆ›å»ºå‡ ä½•ä½“ã€æè´¨"><a href="#2-åˆ›å»ºå‡ ä½•ä½“ã€æè´¨" class="headerlink" title="2.åˆ›å»ºå‡ ä½•ä½“ã€æè´¨"></a>2.åˆ›å»ºå‡ ä½•ä½“ã€æè´¨</h4><blockquote>
<p>å¯¹äºæè´¨è¿™å—ï¼Œå°±æ˜¯ç»™ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å±æ€§çš„ç‰©ä½“æ·»åŠ å±æ€§ï¼Œç»ç’ƒã€é‡‘å±ã€ç‰ã€æœ‰é¢œè‰²çš„ç«‹æ–¹ä½“ã€‚</p>
</blockquote>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129090339038.png"></p>
<p>è¦åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>BoxGeometry</strong>ï¼ˆç«‹æ–¹ä½“ï¼‰å¯¹è±¡. è¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä¸€ä¸ªç«‹æ–¹ä½“ä¸­æ‰€æœ‰çš„é¡¶ç‚¹ï¼ˆ<strong>vertices</strong>ï¼‰å’Œé¢ï¼ˆ<strong>faces</strong>ï¼‰ã€‚æœªæ¥æˆ‘ä»¬å°†åœ¨è¿™æ–¹é¢è¿›è¡Œæ›´å¤šçš„æ¢ç´¢ã€‚</p>
<pre><code class="javascript">const geometry = new THREE.BoxGeometry( 1, 1, 1 );
const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
camera.position.z = 5;
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œå¯¹äºè¿™ä¸ªç«‹æ–¹ä½“ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒä¸€ä¸ªæè´¨ï¼Œæ¥è®©å®ƒæœ‰é¢œè‰²ã€‚Three.jsè‡ªå¸¦äº†å‡ ç§æè´¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<strong>MeshBasicMaterial</strong>ã€‚æ‰€æœ‰çš„æè´¨éƒ½å­˜æœ‰åº”ç”¨äºä»–ä»¬çš„å±æ€§çš„å¯¹è±¡ã€‚åœ¨è¿™é‡Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªè®¾ç½®ä¸€ä¸ªcolorå±æ€§ï¼Œå€¼ä¸º<strong>0x00ff00</strong>ï¼Œä¹Ÿå°±æ˜¯ç»¿è‰²ã€‚è¿™é‡Œæ‰€åšçš„äº‹æƒ…ï¼Œå’Œåœ¨CSSæˆ–è€…Photoshopä¸­ä½¿ç”¨åå…­è¿›åˆ¶(<strong>hex colors</strong>)é¢œè‰²æ ¼å¼æ¥è®¾ç½®é¢œè‰²çš„æ–¹å¼ä¸€è‡´ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>Mesh</strong>ï¼ˆç½‘æ ¼ï¼‰ã€‚ ç½‘æ ¼åŒ…å«ä¸€ä¸ªå‡ ä½•ä½“ä»¥åŠä½œç”¨åœ¨æ­¤å‡ ä½•ä½“ä¸Šçš„æè´¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†ç½‘æ ¼å¯¹è±¡æ”¾å…¥åˆ°æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œå¹¶è®©å®ƒåœ¨åœºæ™¯ä¸­è‡ªç”±ç§»åŠ¨ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬è°ƒç”¨**scene.add()<strong>çš„æ—¶å€™ï¼Œç‰©ä½“å°†ä¼šè¢«æ·»åŠ åˆ°</strong>(0,0,0)**åæ ‡ã€‚ä½†å°†ä½¿å¾—æ‘„åƒæœºå’Œç«‹æ–¹ä½“å½¼æ­¤åœ¨ä¸€èµ·ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ‘„åƒæœºç¨å¾®å‘å¤–ç§»åŠ¨ä¸€äº›å³å¯ã€‚</p>
<h4 id="3-åˆ›å»ºæ¸²æŸ“"><a href="#3-åˆ›å»ºæ¸²æŸ“" class="headerlink" title="3.åˆ›å»ºæ¸²æŸ“"></a>3.åˆ›å»ºæ¸²æŸ“</h4><blockquote>
<p>è¿™ä¸ªå°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œæ·»åŠ xï¼Œyï¼Œzæ–¹å‘çš„ä½ç½®å˜åŒ–</p>
</blockquote>
<p>ç°åœ¨ï¼Œå¦‚æœå°†ä¹‹å‰å†™å¥½çš„ä»£ç å¤åˆ¶åˆ°HTMLæ–‡ä»¶ä¸­ï¼Œä½ ä¸ä¼šåœ¨é¡µé¢ä¸­çœ‹åˆ°ä»»ä½•ä¸œè¥¿ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å¯¹å®ƒè¿›è¡ŒçœŸæ­£çš„æ¸²æŸ“ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªè¢«å«åšâ€œ<strong>æ¸²æŸ“å¾ªç¯</strong>â€ï¼ˆrender loopï¼‰æˆ–è€…â€œ<strong>åŠ¨ç”»å¾ªç¯</strong>â€ï¼ˆanimate loopï¼‰çš„ä¸œè¥¿ã€‚</p>
<pre><code class="javascript">function animate() &#123; 
requestAnimationFrame( animate ); 
renderer.render( scene, camera ); 
&#125; 
animate();
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä½¿æ¸²æŸ“å™¨èƒ½å¤Ÿåœ¨æ¯æ¬¡å±å¹•åˆ·æ–°æ—¶å¯¹åœºæ™¯è¿›è¡Œç»˜åˆ¶çš„å¾ªç¯ï¼ˆåœ¨å¤§å¤šæ•°å±å¹•ä¸Šï¼Œåˆ·æ–°ç‡ä¸€èˆ¬æ˜¯60æ¬¡&#x2F;ç§’ï¼‰ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªæµè§ˆå™¨æ¸¸æˆå¼€å‘çš„æ–°æ‰‹ï¼Œä½ æˆ–è®¸ä¼šè¯´<em>â€œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥ç”¨setIntervalæ¥å®ç°åˆ·æ–°çš„åŠŸèƒ½å‘¢ï¼Ÿâ€</em>å½“ç„¶å•¦ï¼Œæˆ‘ä»¬çš„ç¡®å¯ä»¥ç”¨setIntervalï¼Œä½†æ˜¯ï¼Œ<strong>requestAnimationFrame</strong>æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ã€‚æœ€é‡è¦çš„ä¸€ç‚¹æˆ–è®¸å°±æ˜¯å½“ç”¨æˆ·åˆ‡æ¢åˆ°å…¶å®ƒçš„æ ‡ç­¾é¡µæ—¶ï¼Œå®ƒä¼šæš‚åœï¼Œå› æ­¤ä¸ä¼šæµªè´¹ç”¨æˆ·å®è´µçš„å¤„ç†å™¨èµ„æºï¼Œä¹Ÿä¸ä¼šæŸè€—ç”µæ± çš„ä½¿ç”¨å¯¿å‘½ã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå¦‚æœä½ å·²ç»å°†ä¸Šé¢çš„ä»£ç å†™å…¥åˆ°äº†ä½ æ‰€åˆ›å»ºçš„æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„æ–¹å—ã€‚è®©æˆ‘ä»¬æ¥åšä¸€äº›æ›´åŠ æœ‰è¶£çš„äº‹ â€”â€” è®©å®ƒæ—‹è½¬èµ·æ¥ã€‚</p>
<p>å°†ä¸‹åˆ—ä»£ç æ·»åŠ åˆ°animate()å‡½æ•°ä¸­<strong>renderer.render</strong>è°ƒç”¨çš„ä¸Šæ–¹ï¼š</p>
<pre><code class="javascript">cube.rotation.x += 0.01; 
cube.rotation.y += 0.01;
</code></pre>
<p>è¿™æ®µä»£ç æ¯å¸§éƒ½ä¼šæ‰§è¡Œï¼ˆæ­£å¸¸æƒ…å†µä¸‹æ˜¯60æ¬¡&#x2F;ç§’ï¼‰ï¼Œè¿™å°±è®©ç«‹æ–¹ä½“æœ‰äº†ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆä¸é”™çš„æ—‹è½¬åŠ¨ç”»ã€‚åŸºæœ¬ä¸Šæ¥è¯´ï¼Œå½“åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå¦‚æœä½ æƒ³è¦ç§»åŠ¨æˆ–è€…æ”¹å˜ä»»ä½•åœºæ™¯ä¸­çš„ä¸œè¥¿ï¼Œéƒ½å¿…é¡»è¦ç»è¿‡è¿™ä¸ªåŠ¨ç”»å¾ªç¯ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªåŠ¨ç”»å¾ªç¯é‡Œè°ƒç”¨åˆ«çš„å‡½æ•°ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šå†™å‡ºæœ‰ä¸Šç™¾è¡Œä»£ç çš„<strong>animate</strong>å‡½æ•°ã€‚</p>
<h4 id="æ•ˆæœæ¼”ç¤ºï¼š"><a href="#æ•ˆæœæ¼”ç¤ºï¼š" class="headerlink" title="æ•ˆæœæ¼”ç¤ºï¼š"></a>æ•ˆæœæ¼”ç¤ºï¼š</h4><p><img src="/2022/11/29/threejs-d-2-0/image-20221129090831716.png"></p>
<h3 id="äºŒã€æ§åˆ¶å™¨ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰"><a href="#äºŒã€æ§åˆ¶å™¨ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰" class="headerlink" title="äºŒã€æ§åˆ¶å™¨ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰"></a>äºŒã€æ§åˆ¶å™¨ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰</h3><blockquote>
<p>æ§åˆ¶å™¨æœ‰è®¸å¤šï¼Œæˆ‘ä»¬è¿™å…ˆè¯´è¿™ä¸€ç§</p>
<p>è½¨é“æ§åˆ¶å™¨æ˜¯ä»¥ç‰©ä½“ä¸ºä¸­å¿ƒï¼Œå¯¹ç‰©ä½“åšç¯ç»•è¿åŠ¨</p>
</blockquote>
<p>ä»£ç æ±‡æ€»ï¼š</p>
<pre><code class="javascript">//main.js
import * as THREE from &#39;three&#39;
import &#123; OrbitControls &#125; from &#39;three/examples/jsm/controls/OrbitControls&#39; //å¯¼å…¥è½¨é“æ§åˆ¶å™¨

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
const renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

const geometry = new THREE.BoxGeometry( 5, 5, 5 );
const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
const controls = new OrbitControls( camera,renderer.domElement  );
camera.position.set(0,20,100);
controls.update();//æ›´æ–°æ§åˆ¶å™¨ã€‚å¿…é¡»åœ¨æ‘„åƒæœºçš„å˜æ¢å‘ç”Ÿä»»ä½•æ‰‹åŠ¨æ”¹å˜åè°ƒç”¨
function animate() &#123;
    requestAnimationFrame( animate );
    controls.update();//å¾ªç¯æ›´æ–°è½¨é“æ§åˆ¶å™¨
    renderer.render( scene, camera );
&#125;
animate();
</code></pre>
<p>OrbitControls( object : Camera, domElement : HTMLDOMElement )</p>
<p>object: ï¼ˆå¿…é¡»ï¼‰å°†è¦è¢«æ§åˆ¶çš„ç›¸æœºã€‚è¯¥ç›¸æœºä¸å…è®¸æ˜¯å…¶ä»–ä»»ä½•å¯¹è±¡çš„å­çº§ï¼Œé™¤éè¯¥å¯¹è±¡æ˜¯åœºæ™¯è‡ªèº«ã€‚</p>
<p>domElement: ç”¨äºäº‹ä»¶ç›‘å¬çš„HTMLå…ƒç´ ã€‚</p>
<p>é‚£æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ç§»åŠ¨æˆ‘ä»¬çš„ç›¸æœºæ¥è§‚å¯Ÿæˆ‘ä»¬çš„ç‰©ä½“äº†ã€‚</p>
<h3 id="ä¸‰ã€æ·»åŠ è¾…åŠ©å™¨"><a href="#ä¸‰ã€æ·»åŠ è¾…åŠ©å™¨" class="headerlink" title="ä¸‰ã€æ·»åŠ è¾…åŠ©å™¨"></a>ä¸‰ã€æ·»åŠ è¾…åŠ©å™¨</h3><blockquote>
<p>è¿™ä¸ªæ¥è‡ªä¸æˆ‘ä»¬helpé‡Œé¢çš„ä¸œè¥¿ï¼Œæ–‡æ¡£é‡ŒæŸ¥å°±å¯ä»¥äº†</p>
<p>æ·»åŠ è¾…åŠ©å™¨çš„ç”¨å¤„æ˜¯ä¸ºäº†æ›´å¥½çš„å»å¼€å‘</p>
</blockquote>
<h4 id="1-åæ ‡è¾…åŠ©å™¨"><a href="#1-åæ ‡è¾…åŠ©å™¨" class="headerlink" title="1.åæ ‡è¾…åŠ©å™¨"></a>1.åæ ‡è¾…åŠ©å™¨</h4><blockquote>
<p>ç”¨äºç®€å•æ¨¡æ‹Ÿ3ä¸ªåæ ‡è½´çš„å¯¹è±¡.<br>çº¢è‰²ä»£è¡¨ X è½´. ç»¿è‰²ä»£è¡¨ Y è½´. è“è‰²ä»£è¡¨ Z è½´.</p>
</blockquote>
<pre><code class="javascript">const axesHelper = new THREE.AxesHelper( 5 );//è½´çš„çº¿æ®µé•¿åº¦. é»˜è®¤ä¸º 1.
scene.add( axesHelper );//æ·»åŠ åˆ°åœºæ™¯
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129155031932.png"></p>
<h4 id="2-ç›¸æœºè¾…åŠ©å™¨"><a href="#2-ç›¸æœºè¾…åŠ©å™¨" class="headerlink" title="2.ç›¸æœºè¾…åŠ©å™¨"></a>2.ç›¸æœºè¾…åŠ©å™¨</h4><blockquote>
<p>ç”¨äºæ¨¡æ‹Ÿç›¸æœºè§†é”¥ä½“çš„è¾…åŠ©å¯¹è±¡.<br>å®ƒä½¿ç”¨ LineSegments æ¥æ¨¡æ‹Ÿç›¸æœºè§†é”¥ä½“.</p>
</blockquote>
<pre><code class="javascript">const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
const helper = new THREE.CameraHelper( camera );
scene.add( helper );
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129155852737.png"></p>
<p>CameraHelper( camera : Camera )</p>
<p>camera â€“ è¢«æ¨¡æ‹Ÿçš„ç›¸æœº.</p>
<p>ä¸ºæŒ‡å®šç›¸æœºåˆ›å»ºä¸€ä¸ªæ–°çš„ç›¸æœºè¾…åŠ©å¯¹è±¡ CameraHelper .</p>
<h4 id="3-å¹³é¢è¾…åŠ©å™¨"><a href="#3-å¹³é¢è¾…åŠ©å™¨" class="headerlink" title="3.å¹³é¢è¾…åŠ©å™¨"></a>3.å¹³é¢è¾…åŠ©å™¨</h4><blockquote>
<p>ç”¨äºæ¨¡æ‹Ÿå¹³é¢ Plane çš„è¾…åŠ©å¯¹è±¡.</p>
</blockquote>
<pre><code class="javascript">const plane = new THREE.Plane( new THREE.Vector3( 1, 1, 0.2 ), 3 );
const helper = new THREE.PlaneHelper( plane, 100, 0xffff00 );
scene.add( helper );
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129160213446.png"></p>
<p>PlaneHelper( plane : Plane, size : Float, hex : Color )</p>
<p>plane â€“ è¢«æ¨¡æ‹Ÿçš„å¹³é¢.<br>size â€“ (å¯é€‰çš„) è¾…åŠ©å¯¹è±¡çš„å•è¾¹é•¿åº¦. é»˜è®¤ä¸º 1.<br>color â€“ (å¯é€‰çš„) è¾…åŠ©å¯¹è±¡çš„é¢œè‰². é»˜è®¤ä¸º 0xffff00.</p>
<p>åˆ›å»ºä¸€ä¸ªçº¿æ¡†è¾…åŠ©å¯¹è±¡æ¥è¡¨ç¤ºæŒ‡å®šå¹³é¢.</p>
<h4 id="ç»ˆç»“ï¼š"><a href="#ç»ˆç»“ï¼š" class="headerlink" title="ç»ˆç»“ï¼š"></a>ç»ˆç»“ï¼š</h4><p>å…¶ä»–çš„è¾…åŠ©å™¨ï¼Œæˆ‘ä»¬å°±è‡ªå·±æŒ‰ç…§éœ€æ±‚å»åŠ å§ï¼Œè¿™ä¸ªå°±æ˜¯åšä¸€ä¸ªå‚ç…§</p>
<h3 id="å››ã€ç‰©ä½“çš„å±æ€§"><a href="#å››ã€ç‰©ä½“çš„å±æ€§" class="headerlink" title="å››ã€ç‰©ä½“çš„å±æ€§"></a>å››ã€ç‰©ä½“çš„å±æ€§</h3><blockquote>
<p>ç‰©ä½“çš„å±æ€§ï¼Œé‚£æˆ‘ä»¬è¦çœ‹ä¸€ä¸‹cubeæ˜¯ä»€ä¹ˆäº†</p>
<p>æ ¹æ®æ§åˆ¶å°æ‰“å°ï¼Œå®ƒæ˜¯ä¸ªMeshç±»ï¼Œä¸‹é¢æœ‰è®¸å¤šå±æ€§</p>
</blockquote>
<pre><code class="javascript">const geometry = new THREE.BoxGeometry( 5, 5, 5 );
const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );
const cube = new THREE.Mesh( geometry, material );
scene.add( cube );
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129160944920.png"></p>
<h4 id="1-ç‰©ä½“çš„ä½ç§»"><a href="#1-ç‰©ä½“çš„ä½ç§»" class="headerlink" title="1.ç‰©ä½“çš„ä½ç§»"></a>1.ç‰©ä½“çš„ä½ç§»</h4><blockquote>
<p>æ§åˆ¶ç‰©ä½“çš„ä½ç½®</p>
</blockquote>
<pre><code class="javascript">cube.position.set(10,0,0)//é»˜è®¤ä¸ºxï¼Œyï¼Œzæ–¹å‘
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129161420179.png"></p>
<h4 id="2-ç‰©ä½“çš„æ—‹è½¬"><a href="#2-ç‰©ä½“çš„æ—‹è½¬" class="headerlink" title="2.ç‰©ä½“çš„æ—‹è½¬"></a>2.ç‰©ä½“çš„æ—‹è½¬</h4><blockquote>
<p>æ§åˆ¶é—®é¢˜çš„æ—‹è½¬è§’åº¦</p>
<p>è¿™ä¸ªä¸æ˜¯å•çº¯çš„ä¸‰ç»´å‘é‡äº†</p>
<p>æ˜¯ä¸€ä¸ªEulerç±»</p>
</blockquote>
<pre><code class="javascript">cube.rotation.set(Math.PI/4,0,0,&#39;XYZ&#39;)//é»˜è®¤ä¸ºâ€˜xyzâ€™
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129162730828.png"></p>
<p>Euler( x : Float, y : Float, z : Float, order : String )</p>
<p>x - (optional) ç”¨å¼§åº¦è¡¨ç¤ºxè½´æ—‹è½¬é‡ã€‚ é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚<br>y - (optional) ç”¨å¼§åº¦è¡¨ç¤ºyè½´æ—‹è½¬é‡ã€‚ é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚<br>z - (optional) ç”¨å¼§åº¦è¡¨ç¤ºzè½´æ—‹è½¬é‡ã€‚ é»˜è®¤å€¼æ˜¯ <strong>0</strong>ã€‚<br>order - (optional) è¡¨ç¤ºæ—‹è½¬é¡ºåºçš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸ºâ€™XYZâ€™ï¼ˆå¿…é¡»æ˜¯å¤§å†™ï¼‰ã€‚</p>
<h4 id="3-ç‰©ä½“çš„ç¼©æ”¾"><a href="#3-ç‰©ä½“çš„ç¼©æ”¾" class="headerlink" title="3.ç‰©ä½“çš„ç¼©æ”¾"></a>3.ç‰©ä½“çš„ç¼©æ”¾</h4><blockquote>
<p>æ§åˆ¶ç‰©ä½“ç¼©æ”¾</p>
</blockquote>
<pre><code class="javascript">cube.scale.set(3,2,1)
</code></pre>
<p><img src="/2022/11/29/threejs-d-2-0/image-20221129161943968.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-electron-vue3-vite"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/28/electron-vue3-vite/"
    >electron-vue3-vite</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/28/electron-vue3-vite/" class="article-date">
  <time datetime="2022-11-28T04:04:11.000Z" itemprop="datePublished">2022-11-28</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Electron/">Electron</a> / <a class="article-category-link" href="/categories/Electron/electron-vue3-vite/">electron-vue3-vite</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Electron-Vue3-Vite"><a href="#Electron-Vue3-Vite" class="headerlink" title="Electron-Vue3-Vite"></a>Electron-Vue3-Vite</h1><blockquote>
<p>ä»Šå¤©è¿™ä¸€ç¯‡æ–‡ç« ç®—æ˜¯electronçš„ä¸€ä¸ªçŸ­æš‚çš„ç»“å°¾ï¼Œä»¥åæˆ‘ä»¬å†æ›´æ–°electron çš„çŸ¥è¯†ã€‚</p>
<p>ä»Šå¤©çš„å†…å®¹æ˜¯é¡¹ç›®çš„vue3+electroné¡¹ç›®æ­å»ºå’Œæ‰“åŒ…éƒ¨ç½²</p>
</blockquote>
<h3 id="ä¸€ã€Electron-Vue3-Viteæ­å»º"><a href="#ä¸€ã€Electron-Vue3-Viteæ­å»º" class="headerlink" title="ä¸€ã€Electron-Vue3-Viteæ­å»º"></a>ä¸€ã€Electron-Vue3-Viteæ­å»º</h3><h4 id="1-åˆ›å»ºæ¨¡æ¿"><a href="#1-åˆ›å»ºæ¨¡æ¿" class="headerlink" title="1.åˆ›å»ºæ¨¡æ¿"></a>1.åˆ›å»ºæ¨¡æ¿</h4><blockquote>
<p>ï¼ï¼ï¼å…¼å®¹æ€§æ³¨æ„</p>
<p>Vite éœ€è¦ Node.jsç‰ˆæœ¬ 14.18+ï¼Œ16+ã€‚ç„¶è€Œï¼Œæœ‰äº›æ¨¡æ¿éœ€è¦ä¾èµ–æ›´é«˜çš„ Node ç‰ˆæœ¬æ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œå½“ä½ çš„åŒ…ç®¡ç†å™¨å‘å‡ºè­¦å‘Šæ—¶ï¼Œè¯·æ³¨æ„å‡çº§ä½ çš„ Node ç‰ˆæœ¬ã€‚</p>
</blockquote>
<pre><code class="ini">//ä½¿ç”¨npm
npm create vite@latest
//ä½¿ç”¨yarn
yarn create vite
//ä½¿ç”¨pnpm
pnpm create vite
</code></pre>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š</p>
<pre><code class="ini">npm i //å®‰è£…ä¾èµ–
npm run dev //å¯åŠ¨é¡¹ç›®
</code></pre>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221127082439543.png"></p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221127082625854.png"></p>
<h4 id="2-å®‰è£…electron"><a href="#2-å®‰è£…electron" class="headerlink" title="2.å®‰è£…electron"></a>2.å®‰è£…electron</h4><pre><code class="ini">npm i electron -D 
</code></pre>
<p>ç›®å‰åšä¸»é‡åˆ°äº†ä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯ä¸‹è½½electronä¼šä¸€ç›´å¡ä½ï¼Œè¿™é‡Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å°±å¯ä»¥è§£å†³äº†ã€‚</p>
<pre><code class="ini">npm install cnpm -g --registry=https://registry.npm.taobao.org //åˆ‡æ¢å›½å†…é•œåƒæº
cnpm isntall electron --save-dev
</code></pre>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128081646599.png"></p>
<h4 id="3-åˆ›å»ºå…¥å£æ–‡ä»¶"><a href="#3-åˆ›å»ºå…¥å£æ–‡ä»¶" class="headerlink" title="3.åˆ›å»ºå…¥å£æ–‡ä»¶"></a>3.åˆ›å»ºå…¥å£æ–‡ä»¶</h4><p>æ ¹ç›®å½•ä¸‹åˆ›å»º</p>
<p>Main.jså…¥å£æ–‡ä»¶</p>
<pre><code class="javascript">//main.js
const &#123; app,BrowserWindow &#125; = require(&#39;electron&#39;)
const path = require(&#39;path&#39;)
const WinState = require(&#39;electron-win-state&#39;).default //ä¿å­˜çª—å£çŠ¶æ€çš„åŒ…ï¼ˆçª—å£å¯ä»¥ä¿å­˜ç¼©æ”¾ã€ä½ç½®çŠ¶æ€ï¼‰

const createWindow = () =&gt; &#123;
  const winState = new WinState(&#123; 
    defaultWidth: 1000,
    defaultHeight: 800,
    // other winState options, see below
  &#125;)
    const win = new BrowserWindow(&#123;
      ...winState.winOptions,
      // width: 800,
      // height: 600,
      webPreferences: &#123;
        preload: path.join(__dirname, &#39;preload.js&#39;)
      &#125;
    &#125;)
    win.loadURL(&#39;http://127.0.0.1:5173/&#39;) //åŠ è½½æœ¬åœ°ç«¯å£ï¼Œéƒ¨ç½²çš„æ—¶å€™å¯ä»¥æ¢æˆæˆ‘ä»¬çš„åŸŸå
    win.webContents.openDevTools() //æ‰“å¼€æ§åˆ¶å°è°ƒè¯•
    winState.manage(win)
  &#125;

  app.whenReady().then(() =&gt; &#123;
    createWindow()
    app.on(&#39;activate&#39;, () =&gt; &#123;
      if (BrowserWindow.getAllWindows().length === 0) createWindow()
    &#125;)
  &#125;) 

  app.on(&#39;window-all-closed&#39;, () =&gt; &#123;
    if (process.platform !== &#39;darwin&#39;) app.quit()
  &#125;)
</code></pre>
<p>Preload.jsé¢„åŠ è½½æ–‡ä»¶</p>
<pre><code class="javascript">//ç›®å‰å…ˆä¸å†™å†…å®¹ï¼Œå…ˆæ­ä¸ªæ¶å­
</code></pre>
<p>é…ç½®package.json</p>
<pre><code class="javascript">//package.json
&#123;
  &quot;name&quot;: &quot;vite-project&quot;,
  &quot;private&quot;: true,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;main&quot;: &quot;main.js&quot;,
  &quot;scripts&quot;: &#123;
    &quot;dev&quot;: &quot;vite&quot;,
    &quot;build&quot;: &quot;vite build&quot;,
    &quot;preview&quot;: &quot;vite preview&quot;,
    &quot;start&quot;: &quot;nodemon --exec electron . --watch ./ --ext .js,.html,.vue,.css&quot;,
  &#125;,
  &quot;dependencies&quot;: &#123;
    &quot;electron-win-state&quot;: &quot;^1.1.22&quot;,
    &quot;vue&quot;: &quot;^3.2.41&quot;
  &#125;,
  &quot;devDependencies&quot;: &#123;
    &quot;@vitejs/plugin-vue&quot;: &quot;^3.2.0&quot;,
    &quot;electron&quot;: &quot;^21.3.1&quot;,
    &quot;electron-builder&quot;: &quot;^23.6.0&quot;,
    &quot;nodemon&quot;: &quot;^2.0.20&quot;,
    &quot;vite&quot;: &quot;^3.2.3&quot;
  &#125;
&#125;

</code></pre>
<h4 id="4-å®‰è£…å…¶ä»–ä¾èµ–"><a href="#4-å®‰è£…å…¶ä»–ä¾èµ–" class="headerlink" title="4.å®‰è£…å…¶ä»–ä¾èµ–"></a>4.å®‰è£…å…¶ä»–ä¾èµ–</h4><pre><code class="ini">cnpm install nodemon --save-dev //å®‰è£…nodemon
cnpm install electron-win-state --save-dev //å®‰è£…electron-win-state
</code></pre>
<h4 id="5-è¿è¡Œé¡¹ç›®"><a href="#5-è¿è¡Œé¡¹ç›®" class="headerlink" title="5.è¿è¡Œé¡¹ç›®"></a>5.è¿è¡Œé¡¹ç›®</h4><pre><code class="ini">npm run dev //å¯åŠ¨vueé¡¹ç›®
npm start //å¯åŠ¨electron
</code></pre>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128085457686.png"></p>
<p>æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥å»å¼€å‘æˆ‘ä»¬çš„é¡¹ç›®äº†</p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128085520887.png"></p>
<h3 id="äºŒã€æ‰“åŒ…ä¸éƒ¨ç½²"><a href="#äºŒã€æ‰“åŒ…ä¸éƒ¨ç½²" class="headerlink" title="äºŒã€æ‰“åŒ…ä¸éƒ¨ç½²"></a>äºŒã€æ‰“åŒ…ä¸éƒ¨ç½²</h3><p>å®˜ç½‘æ¨èæˆ‘ä»¬çš„æ˜¯<a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/tutorial/forge-overview">Electron Forge</a>æ¥åˆ†å‘æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº</p>
<blockquote>
<p>electron-forge å¯ä»¥è‡ªåŠ¨æ£€æµ‹ä½ çš„ç³»ç»Ÿï¼Œç„¶åæ‰“åŒ…æˆå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>å®ƒå¯ä»¥å®ç° package æˆæœ€ç»ˆå¯ç”¨çš„ç‹¬ç«‹é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œ<br>è¿˜å¯ä»¥ make æˆèƒ½å¤Ÿå®‰è£…çš„ zip åŒ…</p>
</blockquote>
<p>ç›®å‰è¿™ä¸ªæ–¹æ³•æœ‰ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆç”¨å¦ä¸€ç§æ–¹æ³•æ¥è¿›è¡Œæ‰“åŒ…<a target="_blank" rel="noopener" href="https://www.electron.build/">electron-build</a></p>
<p>æ ¹æ®æ–‡æ¡£æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆå¿«çš„æŒæ¡è¿™ç§æ‰“åŒ…æ–¹å¼</p>
<h4 id="1-å®‰è£…ä¾èµ–"><a href="#1-å®‰è£…ä¾èµ–" class="headerlink" title="1.å®‰è£…ä¾èµ–"></a>1.å®‰è£…ä¾èµ–</h4><pre><code class="ini">cnpm i electron-builder -D //å®‰è£…ä¾èµ–
</code></pre>
<p>é…ç½®ä¸€ä¸‹package.json</p>
<pre><code class="javascript">//package.json+
&quot;scripts&quot;: &#123;
  ...
  &quot;app:dir&quot;: &quot;electron-builder --dir&quot;,
  &quot;app:dist&quot;: &quot;electron-builder&quot;
  ...
&#125;
</code></pre>
<h4 id="2-æ‰“åŒ…"><a href="#2-æ‰“åŒ…" class="headerlink" title="2.æ‰“åŒ…"></a>2.æ‰“åŒ…</h4><pre><code class="ini">cnpm run app:dist  //æ‰§è¡Œæ‰“åŒ…
</code></pre>
<p>ç›®å‰æˆ‘é‡åˆ°æ‰“åŒ…é”™è¯¯çš„é—®é¢˜</p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128115215328.png"></p>
<p>å¦‚æœæˆ‘ä»¬é‡åˆ°è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬åˆ‡æ¢ä¸€ä¸‹npmé•œåƒæºå°±å¯ä»¥äº†ï¼›</p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128115258224.png"></p>
<p>ç°åœ¨æˆ‘ä»¬æ‰“åŒ…å°±æˆåŠŸäº†</p>
<h4 id="3-è¿è¡Œå®‰è£…åŒ…"><a href="#3-è¿è¡Œå®‰è£…åŒ…" class="headerlink" title="3.è¿è¡Œå®‰è£…åŒ…"></a>3.è¿è¡Œå®‰è£…åŒ…</h4><p>æ‰¾åˆ°æˆ‘ä»¬é¡¹ç›®ç›®å½•ä¸‹çš„distæ–‡ä»¶çš„.dmgå®‰è£…åŒ…ï¼ˆæˆ‘çš„æ˜¯macï¼‰</p>
<p>åœ¨è¿è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå°†é¡¹ç›® è¿è¡Œ èµ·æ¥ï¼ˆå› ä¸ºæˆ‘ä»¬æ˜¯æœ¬åœ°é¡¹ç›®ï¼Œç­‰éƒ¨ç½²åˆ°æœåŠ¡å™¨å°±ä¸ç”¨äº†ï¼‰</p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128115702655.png"></p>
<p>ç‚¹å‡»æ‰§è¡Œå®‰è£…åŒ…</p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128115730129.png"></p>
<p><img src="/2022/11/28/electron-vue3-vite/image-20221128115827756.png"></p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„electronçš„æ­å»º-&gt;å¼€å‘-&gt;æ‰“åŒ…å°±ä¸€æ°”å‘µæˆäº†ï¼Œå½“ç„¶ï¼Œå¼€å‘é¡¹ç›®ä¸­è¿˜æœ‰è®¸å¤šå¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜å’ŒçŸ¥è¯†ç‚¹ï¼Œå°±é å„ä½èªæ˜çš„è„‘ç“œäº†ã€‚ã€‚</p>
<p><img src="/2022/11/28/electron-vue3-vite/tl.webp"></p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[Electronå®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/tutorial/forge-overview">https://www.electronjs.org/docs/latest/tutorial/forge-overview</a> â€œ<br>[Vite.jså®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://cn.vitejs.dev/">https://cn.vitejs.dev/</a> â€œ<br>[electron-builder]: 	â€œ<a target="_blank" rel="noopener" href="https://github.com/electron-userland/electron-builder">https://github.com/electron-userland/electron-builder</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/electron/" rel="tag">electron</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-threejs-d-1-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/27/threejs-d-1-0/"
    >threejs-d-1.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/27/threejs-d-1-0/" class="article-date">
  <time datetime="2022-11-27T09:51:37.000Z" itemprop="datePublished">2022-11-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web3D/">Web3D</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/">Three.js</a> / <a class="article-category-link" href="/categories/Web3D/Three-js/threejs-d-1-0/">threejs-d-1.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="threejs-d-1-0"><a href="#threejs-d-1-0" class="headerlink" title="threejs-d-1.0"></a>threejs-d-1.0</h1><blockquote>
<p>d-1.0ä¸»è¦æ˜¯å‡†å¤‡æˆ‘ä»¬å¼€å‘ç¯å¢ƒå’Œå…¶ä»–çš„ä¸€äº›å‡†å¤‡ï¼Œä¸ºäº†æˆ‘ä»¬æ›´å¥½çš„å»è¿›å…¥threeçš„ä¸–ç•Œ</p>
</blockquote>
<h3 id="ä¸€ã€æ­å»ºthree-jsæœ¬åœ°ç½‘ç«™"><a href="#ä¸€ã€æ­å»ºthree-jsæœ¬åœ°ç½‘ç«™" class="headerlink" title="ä¸€ã€æ­å»ºthree.jsæœ¬åœ°ç½‘ç«™"></a>ä¸€ã€æ­å»ºthree.jsæœ¬åœ°ç½‘ç«™</h3><blockquote>
<p>æ­å»ºæœ¬åœ°ç½‘ç«™çš„åŸå› ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è®¿é—®å®˜ç½‘çš„æ—¶å€™ï¼Œç”±äºç½‘é€Ÿé™åˆ¶ï¼Œå¯¼è‡´æˆ‘ä»¬çš„ä½“éªŒæ„Ÿä¸‹é™ï¼Œæ­å»ºæœ¬åœ°æœåŠ¡å™¨ï¼Œå¿«å¾ˆå¤šäº†ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æ‰“å¼€å®˜ç½‘<a target="_blank" rel="noopener" href="https://threejs.org/">Three.js</a>ç‚¹å‡»githubå°±è¿›å…¥äº†threejsä»“åº“äº†</p>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127171040581.png"></p>
<p>æˆ‘ä»¬ä¸‹è½½ä»“åº“çš„devå¼€å‘åŒ…</p>
<p>git clone å’Œ ä¸‹è½½å‹ç¼©åŒ…éƒ½å¯ä»¥ï¼</p>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127171152583.png"></p>
<p>æ‰§è¡Œå‘½ä»¤è¿è¡Œï¼š</p>
<pre><code class="ini">npm i //å®‰è£…ä¾èµ–
npm start //è¿è¡Œé¡¹ç›®
</code></pre>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127171346283.png"></p>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127171325067.png"></p>
<p>æˆ‘ä»¬ç°åœ¨è®¿é—®æœ¬åœ°é¡¹ç›®å°±å¿«å¤šäº†ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä»»ä½•ä¸€ä¸ªä¾‹å­ä¹Ÿå¯ä»¥æŸ¥çœ‹å…¶å…·ä½“çš„æ–‡ä»¶äº†ã€‚</p>
<h3 id="äºŒã€ä½¿ç”¨parcelæ­å»ºthreejså¼€å‘ç¯å¢ƒ"><a href="#äºŒã€ä½¿ç”¨parcelæ­å»ºthreejså¼€å‘ç¯å¢ƒ" class="headerlink" title="äºŒã€ä½¿ç”¨parcelæ­å»ºthreejså¼€å‘ç¯å¢ƒ"></a>äºŒã€ä½¿ç”¨<a target="_blank" rel="noopener" href="https://parceljs.org/">parcel</a>æ­å»ºthreejså¼€å‘ç¯å¢ƒ</h3><pre><code class="ini">npm init -y //åˆå§‹åŒ–é¡¹ç›®
npm install  parcel-bundler -D //å®‰è£…parcel
</code></pre>
<p>è®¾ç½®å…¥å£æ–‡ä»¶main.jså’Œindex.html</p>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127173957450.png"></p>
<p>é…ç½®package.json</p>
<pre><code class="javascript">//package.json
&#123;
  &quot;name&quot;: &quot;threejs&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: &#123;
    &quot;dev&quot;: &quot;parcel ./src/index.html&quot;,
    &quot;build&quot;: &quot;parcel build ./src/index.html&quot;
  &#125;,
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: &#123;
    &quot;parcel-bundler&quot;: &quot;^1.12.5&quot;
  &#125;
&#125;
</code></pre>
<p>ä¸‹è½½threejsä¾èµ–</p>
<pre><code class="ini">npm install three --save //å®‰è£…ä¾èµ–
</code></pre>
<pre><code class="javascript">//main.js
import * as THREE from &#39;three&#39;
console.log(THREE)
</code></pre>
<p>è¿è¡Œé¡¹ç›®ï¼Œæ‰“åŒ…é¡¹ç›®</p>
<pre><code class="ini">npm run dev //è¿è¡Œé¡¹ç›®
npm run build //æ‰“åŒ…é¡¹ç›®
</code></pre>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127174654769.png"></p>
<p><img src="/2022/11/27/threejs-d-1-0/image-20221127174742984.png"></p>
<p>è¿è¡ŒæˆåŠŸï¼ï¼ï¼</p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[Three.jså®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://threejs.org/">https://threejs.org/</a> â€œ<br>[Three.js-github]: 	â€œ<a target="_blank" rel="noopener" href="https://github.com/mrdoob/three.js/">https://github.com/mrdoob/three.js/</a> â€œ<br>[parcelå®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://parceljs.org/&quot;">https://parceljs.org/&quot;</a><br>[parcelä¸­æ–‡å®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://www.parceljs.cn/">https://www.parceljs.cn/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/" rel="tag">three.js</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Electron-d-3-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/26/Electron-d-3-0/"
    >Electron-d-3.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/26/Electron-d-3-0/" class="article-date">
  <time datetime="2022-11-26T02:26:43.000Z" itemprop="datePublished">2022-11-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Electron/">Electron</a> / <a class="article-category-link" href="/categories/Electron/Electron-d-3-0/">Electron-d-3.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Electron-d-3-0"><a href="#Electron-d-3-0" class="headerlink" title="Electron-d-3.0"></a>Electron-d-3.0</h1><h3 id="æ¸²æŸ“è¿›ç¨‹"><a href="#æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="æ¸²æŸ“è¿›ç¨‹"></a>æ¸²æŸ“è¿›ç¨‹</h3><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²è§£äº†ä¸»è¿›ç¨‹çš„ä¸€äº›å¸¸ç”¨APIï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬æ¥ç€æ¥è®²è§£æ¸²æŸ“è¿›ç¨‹çš„API</p>
<h3 id="1-å‰ªåˆ‡æ¿ï¼ˆclipboardï¼‰"><a href="#1-å‰ªåˆ‡æ¿ï¼ˆclipboardï¼‰" class="headerlink" title="1.å‰ªåˆ‡æ¿ï¼ˆclipboardï¼‰"></a>1.å‰ªåˆ‡æ¿ï¼ˆclipboardï¼‰</h3><blockquote>
<p>åœ¨ç³»ç»Ÿå‰ªè´´æ¿ä¸Šæ‰§è¡Œå¤åˆ¶å’Œç²˜è´´æ“ä½œã€‚</p>
<p>ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éƒ½å¯ä»¥ç”¨ã€‚</p>
</blockquote>
<p>ï¼ˆ1ï¼‰<code>clipboard.readText([type])</code></p>
<ul>
<li><code>type</code> string (optional) -å¯ä»¥æ˜¯ <code>selection</code> æˆ– <code>clipboard</code>; é»˜è®¤ä¸º â€˜clipboardâ€™. <code>selection</code> ä»…åœ¨ Linux ä¸­å¯ç”¨ã€‚</li>
</ul>
<p>è¿”å› <code>string</code> - å‰ªè´´æ¿ä¸­çš„å†…å®¹ä¸ºçº¯æ–‡æœ¬ã€‚</p>
<pre><code class="javascript">const &#123; clipboard &#125; = require(&#39;electron&#39;)

clipboard.writeText(&#39;hello i am a bit of text!&#39;)

const text = clipboard.readText()
console.log(text)
// hello i am a bit of text!&#39;
</code></pre>
<p>ï¼ˆ2ï¼‰<code>clipboard.writeText(text[, type])</code></p>
<ul>
<li><code>text</code> string</li>
<li><code>type</code> string (optional) -å¯ä»¥æ˜¯ <code>selection</code> æˆ– <code>clipboard</code>; é»˜è®¤ä¸º â€˜clipboardâ€™. <code>selection</code> ä»…åœ¨ Linux ä¸­å¯ç”¨ã€‚</li>
</ul>
<p>å°† <code>text</code> ä½œä¸ºçº¯æ–‡æœ¬å†™å…¥å‰ªè´´æ¿ã€‚</p>
<pre><code class="javascript">const &#123; clipboard &#125; = require(&#39;electron&#39;)

const text = &#39;hello i am a bit of text!&#39;
clipboard.writeText(text)
</code></pre>
<p>æˆ‘ä»¬å‰ªåˆ‡æ¿çš„APIå°±è¯´è¿™ä¸¤ä¸ªè¯»ä¸å†™ã€‚ä½†æ˜¯æˆ‘åœ¨æ¸²æŸ“è¿›ç¨‹é‡Œè¯»ä¸åˆ°clipboardã€‚</p>
<p>[clipboardæ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/clipboard">https://www.electronjs.org/zh/docs/latest/api/clipboard</a> â€œ</p>
<h3 id="2-contextBridge"><a href="#2-contextBridge" class="headerlink" title="2.contextBridge"></a>2.contextBridge</h3><p>åœ¨éš”ç¦»çš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„ã€åŒå‘çš„ã€åŒæ­¥çš„æ¡¥æ¢ã€‚</p>
<p>å¦‚ä¸‹ï¼Œæ˜¯ä¸€ä¸ªä»éš”ç¦»çš„é¢„åŠ è½½è„šæœ¬å°† API æš´éœ²ç»™æ¸²æŸ“å™¨çš„ç¤ºä¾‹ï¼šï¼ˆé€šè¿‡é¢„åŠ è½½è„šæœ¬æš´éœ²APIï¼Œæ¸²æŸ“è¿›ç¨‹å¯ä»¥è¯»å–ï¼‰</p>
<pre><code class="javascript">// Preload (Isolated World)
const &#123; contextBridge, ipcRenderer &#125; = require(&#39;electron&#39;)

contextBridge.exposeInMainWorld(
  &#39;electron&#39;,
  &#123;
    doThing: () =&gt; ipcRenderer.send(&#39;do-a-thing&#39;)
  &#125;
)
</code></pre>
<pre><code class="javascript">// Renderer (Main World)

window.electron.doThing()
</code></pre>
<p>[contextBridgeæ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/context-bridge">https://www.electronjs.org/zh/docs/latest/api/context-bridge</a> â€œ</p>
<h3 id="3-desktopCapturer"><a href="#3-desktopCapturer" class="headerlink" title="3.desktopCapturer"></a>3.desktopCapturer</h3><p>å®˜æ–¹æ–‡æ¡£ç»™çš„æ¡ˆä¾‹ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“ç†è§£ï¼Œä»£ç æœ‰ç‚¹é•¿ã€‚</p>
<blockquote>
<p>è™½ç„¶å®˜æ–¹æ–‡æ¡£çš„ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éƒ½æœ‰desktopCapturerï¼Œä½†æ˜¯æ¸²æŸ“è¿›ç¨‹æ˜¯è®¿é—®ä¸åˆ°çš„</p>
</blockquote>
<p>æˆ‘ä»¬ä¸¾ä¸€ä¸ªæŠ“å–é¡µé¢å†…å®¹çš„è”æå§ï¼</p>
<p><img src="/2022/11/26/Electron-d-3-0/image-20221126093410069.png"></p>
<pre><code class="javascript">//main.js+
 ipcMain.handle(&#39;capture-event&#39;,async (event,args)=&gt;&#123;
      return  desktopCapturer.getSources(&#123; types: [&#39;window&#39;, &#39;screen&#39;] &#125;).then( sources =&gt; &#123;
        return sources
      &#125;)
 &#125;)
//è§£é‡Šä¸€ä¸‹ï¼ŒdesktopCapturer.getSourcesè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseçš„å¯¹è±¡
</code></pre>
<pre><code class="javascript">//preload.js+

  const capture = async ()=&gt;&#123;
    let res = await ipcRenderer.invoke(&#39;capture-event&#39;)
    console.log(res)
  &#125;
  
  contextBridge.exposeInMainWorld(&#39;electronAPI&#39;, &#123;
    capture
&#125;)
</code></pre>
<pre><code class="javascript">//app.js+
const btn = document.getElementById(&#39;btn&#39;)
btn.addEventListener(&#39;click&#39;,()=&gt;&#123;
    window.electronAPI.capture()
&#125;)
</code></pre>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;&gt;
    &lt;title&gt;capture&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id=&quot;btn&quot;&gt;capture&lt;/button&gt;
    &lt;script src=&#39;./renderer/app.js&#39;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>å½“æˆ‘ä»¬ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šæ‰“å°å‡ºçª—å£ä¿¡æ¯ï¼Œç”±ä¸‹å›¾å¯ä»¥çœ‹å‡ºsourcesæ˜¯ä¸€ä¸ªæ•°ç»„</p>
<p><img src="/2022/11/26/Electron-d-3-0/image-20221126093927866.png"></p>
<p>æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥æ ¹æ®æˆ‘ä»¬è·å–åˆ°çš„ä¿¡æ¯å»å¹²ä¸€äº›äº‹æƒ…äº†ã€‚</p>
<pre><code class="javascript">//preload.js+
  const capture = async ()=&gt;&#123;
    let sources = await ipcRenderer.invoke(&#39;capture-event&#39;)
    for (const source of sources) &#123;
      if (source.name === &#39;electron&#39;) &#123;
        let str = source.thumbnail.crop(&#123;x:0,y:0,width:300,height:300&#125;)
        let imgUrl = str.toDataURL()
        return imgUrl //è¿”å›çš„æ˜¯ä¸€ä¸ªPromise
      &#125;
    &#125;
  &#125;

  contextBridge.exposeInMainWorld(&#39;electronAPI&#39;, &#123;
    handleCounter: (callback) =&gt; ipcRenderer.on(&#39;update-counter&#39;, callback),
    capture,
&#125;)
</code></pre>
<pre><code class="javascript">//app.js+
const btn = document.getElementById(&#39;btn&#39;)
btn.addEventListener(&#39;click&#39;,async ()=&gt;&#123;
   let imgUrl = await window.electronAPI.capture()
   console.log(imgUrl)
&#125;)
</code></pre>
<p><img src="/2022/11/26/Electron-d-3-0/image-20221126100006800.png"></p>
<p>æˆ‘ä»¬åœ¨æ¸²æŸ“è¿›ç¨‹è¿™å°±å·²ç»æ‹¿åˆ°äº†æˆ‘ä»¬çš„æ•°æ®</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å°†æˆ‘ä»¬çš„æ•°æ®å¡«å……åˆ°æˆ‘ä»¬çš„é¡µé¢ä¹‹ä¸­</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#39;self&#39;; script-src &#39;self&#39;;img-src * data:&quot;&gt;
    &lt;title&gt;Menu Counter&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- Current value: &lt;strong id=&quot;counter&quot;&gt;0&lt;/strong&gt; --&gt;
    &lt;button id=&quot;btn&quot;&gt;capture&lt;/button&gt;
    &lt;img src=&quot;&quot; alt=&quot;æ•è·æ•°æ®&quot; id=&quot;img&quot;&gt;
    &lt;script src=&#39;./renderer/app.js&#39;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="javascript">//app.js+
const btn = document.getElementById(&#39;btn&#39;)

btn.addEventListener(&#39;click&#39;,async ()=&gt;&#123;
   let imgUrl = await window.electronAPI.capture()
   document.getElementById(&#39;img&#39;).src = imgUrl
&#125;)
</code></pre>
<p><img src="/2022/11/26/Electron-d-3-0/image-20221126101223120.png"></p>
<p>æ­å–œä½ ï¼ï¼ï¼æˆåŠŸäº†ğŸ¥³ğŸ¥³ğŸ¥³</p>
<p>[desktopCaptureræ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/desktop-capturer&quot;">https://www.electronjs.org/zh/docs/latest/api/desktop-capturer&quot;</a></p>
<h3 id="4-nativeImage"><a href="#4-nativeImage" class="headerlink" title="4.nativeImage"></a>4.nativeImage</h3><blockquote>
<p>ä½¿ç”¨ PNG æˆ– JPG æ–‡ä»¶åˆ›å»ºæ‰˜ç›˜ã€dockå’Œåº”ç”¨ç¨‹åºå›¾æ ‡ã€‚</p>
<p>ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éƒ½å¯ä»¥ç”¨ã€‚</p>
</blockquote>
<p>åœ¨ Electron å†…, é‚£äº›éœ€è¦å›¾ç‰‡çš„ API å¯ä»¥ä¼ é€’ä¸¤ç§å‚æ•°, ä¸€ç§æ˜¯æ–‡ä»¶è·¯å¾„, ä¸€ç§æ˜¯ <code>NativeImage</code> å®ä¾‹å¯¹è±¡ã€‚ ç©ºçš„å›¾ç‰‡å¯¹è±¡å°†è¢« <code>null</code> å‚æ•°æ›¿ä»£</p>
<p>ä¾‹å¦‚, åˆ›å»ºæ‰˜ç›˜æˆ–è®¾ç½®çª—å£å›¾æ ‡æ—¶, ä½ å¯ä»¥ä¼ é€’ <code>string</code> æ ¼å¼çš„å›¾ç‰‡è·¯å¾„</p>
<pre><code class="javascript">const &#123; BrowserWindow, Tray &#125; = require(&#39;electron&#39;)

const appIcon = new Tray(&#39;/Users/somebody/images/icon.png&#39;)
const win = new BrowserWindow(&#123; icon: &#39;/Users/somebody/images/window.png&#39; &#125;)
console.log(appIcon, win)
</code></pre>
<p>æˆ–è€…ä»ç²˜è´´æ¿è¯»å–å›¾ç‰‡ï¼Œå°†è¿”å› <code>NativeImage</code> å¯¹è±¡ï¼š</p>
<pre><code class="javascript">const &#123; clipboard, Tray &#125; = require(&#39;electron&#39;)
const image = clipboard.readImage()
const appIcon = new Tray(image)
console.log(appIcon)
</code></pre>
<p>æˆ‘ä»¬æ–‡æ¡£é‡Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›å…³äºNativeImageå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å“ªé‡Œéœ€è¦å“ªé‡Œæ¬ã€‚</p>
<p>[nativeImageæ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/native-image">https://www.electronjs.org/zh/docs/latest/api/native-image</a> â€œ</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¯¹äºelectronçš„å­¦ä¹ å…ˆåˆ°è¿™ï¼Œå¦‚æœæˆ‘çš„è¿™å‡ ç¯‡æ–‡ç« éƒ½è®¤è®¤çœŸçœŸçš„çœ‹å®Œäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯¹electronæœ‰äº†è¿›ä¸€æ­¥è®¤è¯†ã€‚</p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[Electronå®˜ç½‘]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/">https://www.electronjs.org/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/electron/" rel="tag">electron</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Electron-d-2-0"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/11/25/Electron-d-2-0/"
    >Electron-d-2.0</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/11/25/Electron-d-2-0/" class="article-date">
  <time datetime="2022-11-25T09:31:05.000Z" itemprop="datePublished">2022-11-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Electron/">Electron</a> / <a class="article-category-link" href="/categories/Electron/Electron-d-2-0/">Electron-d-2.0</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Electron"><a href="#Electron" class="headerlink" title="Electron"></a>Electron</h1><p>æœ¬ç¯‡æ–‡ç« æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œè¯¦ç»†è®²è§£ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸€äº›å¸¸ç”¨çš„API</p>
<h3 id="ä¸»è¿›ç¨‹API"><a href="#ä¸»è¿›ç¨‹API" class="headerlink" title="ä¸»è¿›ç¨‹API"></a>ä¸»è¿›ç¨‹API</h3><h4 id="1-App-BrowserWindow"><a href="#1-App-BrowserWindow" class="headerlink" title="1.App+BrowserWindow"></a>1.App+BrowserWindow</h4><h5 id="Appäº‹ä»¶ï¼š"><a href="#Appäº‹ä»¶ï¼š" class="headerlink" title="Appäº‹ä»¶ï¼š"></a>Appäº‹ä»¶ï¼š</h5><h6 id="ï¼ˆ1ï¼‰Before-quit"><a href="#ï¼ˆ1ï¼‰Before-quit" class="headerlink" title="ï¼ˆ1ï¼‰Before-quit"></a>ï¼ˆ1ï¼‰Before-quit</h6><ul>
<li><code>event</code> Event #è¿”å›</li>
</ul>
<p> åœ¨ç¨‹åºå…³é—­çª—å£å‰è§¦å‘ï¼ˆmacOSä¸æ˜¯å…³é—­çª—å£è§¦å‘ï¼Œè€Œæ˜¯å…³é—­ç¨‹åºï¼‰</p>
<p>**æ³¨:**åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå› ç³»ç»Ÿå…³æœº&#x2F;é‡å¯æˆ–ç”¨æˆ·æ³¨é”€è€Œå…³é—­ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚</p>
<p>ä»£ç ä»¥åŠç¨‹åºæ¼”ç¤ºï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125085755781.png"></p>
<h6 id="ï¼ˆ2ï¼‰browser-window-blur"><a href="#ï¼ˆ2ï¼‰browser-window-blur" class="headerlink" title="ï¼ˆ2ï¼‰browser-window-blur"></a>ï¼ˆ2ï¼‰browser-window-blur</h6><ul>
<li><code>event</code> Event #è¿”å›</li>
<li><code>window</code> BrowserWindow #è¿”å›</li>
</ul>
<p>å½“ä¸€ä¸ª browserWindow ï¼ˆçª—å£ï¼‰å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ã€‚å½“æˆ‘ä»¬é¼ æ ‡ç‚¹å‡»çª—å£ä»¥å¤–çš„åœ°æ–¹å°±ä¼šå¤±ç„¦ã€‚</p>
<p>ä»£ç ä»¥åŠç¨‹åºæ¼”ç¤ºï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125090204480.png"></p>
<h6 id="ï¼ˆ3ï¼‰browser-window-focus"><a href="#ï¼ˆ3ï¼‰browser-window-focus" class="headerlink" title="ï¼ˆ3ï¼‰browser-window-focus"></a>ï¼ˆ3ï¼‰browser-window-focus</h6><ul>
<li><code>event</code> Event #è¿”å›</li>
<li><code>window</code> BrowserWindow #è¿”å›</li>
</ul>
<p>å½“ä¸€ä¸ª browserWindow è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ã€‚</p>
<p>ä»£ç ä»¥åŠç¨‹åºæ¼”ç¤ºï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125090450485.png"></p>
<h6 id="ï¼ˆ4ï¼‰quit"><a href="#ï¼ˆ4ï¼‰quit" class="headerlink" title="ï¼ˆ4ï¼‰quit"></a>ï¼ˆ4ï¼‰quit</h6><ul>
<li><code>event</code> Event #è¿”å›</li>
<li><code>exitCode</code> Integer #è¿”å›</li>
</ul>
<p>åœ¨åº”ç”¨ç¨‹åºé€€å‡ºæ—¶å‘å‡ºã€‚</p>
<p>**æ³¨:**åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå› ç³»ç»Ÿå…³æœº&#x2F;é‡å¯æˆ–ç”¨æˆ·æ³¨é”€è€Œå…³é—­ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚</p>
<p>ä»£ç ä»¥åŠç¨‹åºæ¼”ç¤ºï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125090654139.png"></p>
<h6 id="ï¼ˆ5ï¼‰window-all-closed"><a href="#ï¼ˆ5ï¼‰window-all-closed" class="headerlink" title="ï¼ˆ5ï¼‰window-all-closed"></a>ï¼ˆ5ï¼‰window-all-closed</h6><p>å½“æ‰€æœ‰çš„çª—å£éƒ½è¢«å…³é—­æ—¶è§¦å‘ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰ç›‘å¬æ­¤äº‹ä»¶å¹¶ä¸”æ‰€æœ‰çª—å£éƒ½å…³é—­äº†ï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯æ§åˆ¶é€€å‡ºç¨‹åºï¼›ä½†å¦‚æœä½ ç›‘å¬äº†æ­¤äº‹ä»¶ï¼Œä½ å¯ä»¥æ§åˆ¶æ˜¯å¦é€€å‡ºç¨‹åºã€‚ å¦‚æœç”¨æˆ·æŒ‰ä¸‹äº† <code>Cmd + Q</code>ï¼Œæˆ–è€…å¼€å‘è€…è°ƒç”¨äº† <code>app.quit()</code>ï¼ŒElectron ä¼šé¦–å…ˆå…³é—­æ‰€æœ‰çš„çª—å£ç„¶åè§¦å‘ <code>will-quit</code> äº‹ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ <code>window-all-closed</code>äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚</p>
<p>ä»£ç ä»¥åŠç¨‹åºæ¼”ç¤ºï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125090909458.png"></p>
<h5 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h5><p>ç”±äºå„ç§app.æ–¹æ³•ä½¿ç”¨é¢‘ç‡éƒ½å·®ä¸å¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬æ ¹æ®éœ€è¦çœ‹å®˜æ–¹æ–‡æ¡£å§ï¼ˆä¹Ÿæ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚ï¼‰</p>
<p>[App.æ–¹æ³• æ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/app#%E6%96%B9%E6%B3%95">https://www.electronjs.org/zh/docs/latest/api/app#æ–¹æ³•</a> â€œ</p>
<h5 id="BrowserWindowï¼š"><a href="#BrowserWindowï¼š" class="headerlink" title="BrowserWindowï¼š"></a>BrowserWindowï¼š</h5><p><code>BrowserWindow</code> ç±»æš´éœ²äº†å„ç§æ–¹æ³•æ¥ä¿®æ”¹åº”ç”¨çª—å£çš„å¤–è§‚å’Œè¡Œä¸º</p>
<h6 id="ï¼ˆ1ï¼‰ä¼˜é›…çš„æ‰“å¼€çª—å£"><a href="#ï¼ˆ1ï¼‰ä¼˜é›…çš„æ‰“å¼€çª—å£" class="headerlink" title="ï¼ˆ1ï¼‰ä¼˜é›…çš„æ‰“å¼€çª—å£"></a>ï¼ˆ1ï¼‰ä¼˜é›…çš„æ‰“å¼€çª—å£</h6><p><code>ready-to-show</code> äº‹ä»¶</p>
<p>åœ¨åŠ è½½é¡µé¢æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ç¬¬ä¸€æ¬¡å®Œæˆç»˜åˆ¶æ—¶ï¼Œå¦‚æœçª—å£è¿˜æ²¡æœ‰è¢«æ˜¾ç¤ºï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šå‘å‡º <code>ready-to-show</code> äº‹ä»¶ ã€‚ åœ¨æ­¤äº‹ä»¶åæ˜¾ç¤ºçª—å£å°†æ²¡æœ‰è§†è§‰é—ªçƒï¼šï¼ˆä¸ä¼šæœ‰ç™½å±å‡ºç°ï¼Œä½†å¦‚æœç»˜åˆ¶æ²¡æœ‰å®Œæˆï¼Œçª—å£å‡ºç°çš„æ—¶é—´ä¹Ÿä¼šå»¶é•¿ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚æ¥é€‰æ‹©æ˜¯å¦è¦é€‰æ‹©è¿™ç§ä¼˜é›…çš„æ‰“å¼€çª—å£æ–¹å¼ï¼‰</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125093133167.png"></p>
<p>è¿™ä¸ªäº‹ä»¶é€šå¸¸åœ¨ <code>did-finish-load</code> äº‹ä»¶ä¹‹åå‘å‡ºï¼Œä½†æ˜¯é¡µé¢æœ‰è®¸å¤šè¿œç¨‹èµ„æºæ—¶ï¼Œå®ƒå¯èƒ½ä¼šåœ¨ <code>did-finish-load</code>ä¹‹å‰å‘å‡ºäº‹ä»¶ã€‚</p>
<p><code>backgroundColor</code>å±æ€§</p>
<p>å¯¹äºä¸€ä¸ªå¤æ‚çš„åº”ç”¨ï¼Œ<code>ready-to-show</code> å¯èƒ½å‘å‡ºçš„å¤ªæ™šï¼Œä¼šè®©åº”ç”¨æ„Ÿè§‰ç¼“æ…¢ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®ç«‹åˆ»æ˜¾ç¤ºçª—å£ï¼Œå¹¶ä½¿ç”¨æ¥è¿‘åº”ç”¨ç¨‹åºèƒŒæ™¯çš„ <code>backgroundColor</code></p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125093813389.png"></p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125093827541.png"></p>
<p>å»ºè®® è®¾ç½® <code>backgroundColor</code>å’Œ <code>ready-to-show</code> äº‹ä»¶ä¸€èµ·ç”¨ï¼Œä»¥ä½¿åº”ç”¨æ„Ÿè§‰æ›´æ¥è¿‘åŸç”Ÿã€‚</p>
<pre><code class="javascript">//backgroundColoræœ‰æ•ˆå€¼
const win = new BrowserWindow()
win.setBackgroundColor(&#39;hsl(230, 100%, 50%)&#39;)
win.setBackgroundColor(&#39;rgb(255, 145, 145)&#39;)
win.setBackgroundColor(&#39;#ff00a3&#39;)
win.setBackgroundColor(&#39;blueviolet&#39;)
</code></pre>
<h6 id="ï¼ˆ2ï¼‰çˆ¶å­çª—å£-amp-amp-æ¨¡æ€çª—å£"><a href="#ï¼ˆ2ï¼‰çˆ¶å­çª—å£-amp-amp-æ¨¡æ€çª—å£" class="headerlink" title="ï¼ˆ2ï¼‰çˆ¶å­çª—å£&amp;&amp;æ¨¡æ€çª—å£"></a>ï¼ˆ2ï¼‰çˆ¶å­çª—å£&amp;&amp;æ¨¡æ€çª—å£</h6><p>çˆ¶å­çª—å£ï¼š</p>
<p>é€šè¿‡ä½¿ç”¨ <code>parent</code> é€‰é¡¹ï¼Œä½ å¯ä»¥åˆ›å»ºå­çª—å£ï¼š</p>
<pre><code class="javascript">const &#123; BrowserWindow &#125; = require(&#39;electron&#39;)

const top = new BrowserWindow()
const child = new BrowserWindow(&#123; parent: top &#125;)
child.show()
top.show()
</code></pre>
<p><code>child</code> çª—å£å°†æ€»æ˜¯æ˜¾ç¤ºåœ¨ <code>top</code> çª—å£çš„é¡¶éƒ¨.</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125094829288.png"></p>
<p>æ¨¡æ€çª—å£</p>
<p>æ¨¡æ€çª—å£æ˜¯ç¦ç”¨çˆ¶çª—å£çš„å­çª—å£ï¼Œåˆ›å»ºæ¨¡æ€çª—å£å¿…é¡»è®¾ç½® <code>parent</code> å’Œ <code>modal</code> é€‰é¡¹ï¼š</p>
<pre><code class="javascript">const &#123; BrowserWindow &#125; = require(&#39;electron&#39;)

const child = new BrowserWindow(&#123; parent: top, modal: true, show: false &#125;)
child.loadURL(&#39;https://github.com&#39;)
child.once(&#39;ready-to-show&#39;, () =&gt; &#123;
  child.show()
&#125;)
</code></pre>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125095057232.png"></p>
<h6 id="ï¼ˆ3ï¼‰BrowserWindowå±æ€§"><a href="#ï¼ˆ3ï¼‰BrowserWindowå±æ€§" class="headerlink" title="ï¼ˆ3ï¼‰BrowserWindowå±æ€§"></a>ï¼ˆ3ï¼‰BrowserWindowå±æ€§</h6><p>è¿™ä¸ªBrowserWindowå±æ€§ æ¯”è¾ƒå¤šï¼Œè€Œä¸”éƒ½æ˜¯è®¾ç½®çª—å£çš„ä¸€äº›å±æ€§ï¼Œä¹Ÿæ˜¯ä¸éš¾ç†è§£ï¼Œæˆ‘ä»¬å°±å¯¹ç…§æˆ‘ä»¬çš„å®˜æ–¹æ–‡æ¡£æ¥å­¦ä¹ å§ï¼</p>
<p>[BrowserWindowå±æ€§]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/browser-window#new-browserwindowoptions">https://www.electronjs.org/zh/docs/latest/api/browser-window#new-browserwindowoptions</a> â€œ</p>
<h6 id="ï¼ˆ4ï¼‰webContents"><a href="#ï¼ˆ4ï¼‰webContents" class="headerlink" title="ï¼ˆ4ï¼‰webContents"></a>ï¼ˆ4ï¼‰webContents</h6><p><code>did-finish-load</code> äº‹ä»¶</p>
<p>å¯¼èˆªå®Œæˆæ—¶è§¦å‘ï¼Œå³é€‰é¡¹å¡çš„æ—‹è½¬å™¨å°†åœæ­¢æ—‹è½¬ï¼Œå¹¶æŒ‡æ´¾<code>onload</code>äº‹ä»¶åã€‚</p>
<p>[webContentsç±»å®ä¾‹äº‹ä»¶]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/web-contents#%E7%B1%BB-webcontents">https://www.electronjs.org/zh/docs/latest/api/web-contents#ç±»-webcontents</a> â€œ</p>
<h6 id="ï¼ˆ5ï¼‰ä¿å­˜çª—å£çŠ¶æ€"><a href="#ï¼ˆ5ï¼‰ä¿å­˜çª—å£çŠ¶æ€" class="headerlink" title="ï¼ˆ5ï¼‰ä¿å­˜çª—å£çŠ¶æ€"></a>ï¼ˆ5ï¼‰ä¿å­˜çª—å£çŠ¶æ€</h6><p>å½“æˆ‘ä»¬ä½¿ç”¨æ¡Œé¢ç¨‹åºçš„æ—¶å€™ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰æ—¶å€™å¸Œæœ›æˆ‘ä»¬å…³é—­ç¨‹åºå†æ¬¡æ‰“å¼€ç¨‹åºçš„æ—¶å€™ï¼Œç¨‹åºçš„ç•Œé¢å’ŒçŠ¶æ€èƒ½å¤Ÿæ˜¯æˆ‘ä»¬å…³é—­å‰çš„æ ·å­ï¼Œä¸å¸Œæœ›å†å»é‡æ–°è®¾ç½®ã€‚é‚£æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªåŒ…<code>electron-win-state</code> </p>
<p>å®‰è£…è¿™ä¸ªåŒ…</p>
<pre><code class="ini">npm i electron-win-state -S
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥åœ¨npmjså®˜ç½‘ä¸Šæ‰¾åˆ°è¿™ä¸ªåŒ…ï¼Œå»çœ‹å®ƒçš„è¯´æ˜æ–‡æ¡£</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125101014250.png"></p>
<p>æ ¹æ®ä½¿ç”¨è¯´æ˜ï¼Œæˆ‘ä»¬ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125101245297.png"></p>
<p>æˆ‘ä»¬å‘ç°æŠ¥é”™äº†ï¼ŒWinState is not a constructor</p>
<p>å½“æˆ‘ä»¬æ‰“å°ä¸€ä¸‹WinStateçœ‹çœ‹ä»€ä¹ˆæƒ…å†µ</p>
<pre><code class="javascript">const WinState = require(&#39;electron-win-state&#39;)
console.log(WinState)
</code></pre>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125101446532.png"></p>
<p>å‘ç°æ²¡æœ‰ç›´æ¥å¼•å…¥WinStateï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹</p>
<pre><code class="javascript">const WinState = require(&#39;electron-win-state&#39;).default 
</code></pre>
<p>ç°åœ¨å°±æ²¡æŠ¥é”™äº†ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œè™½ç„¶å®‰è£…äº†è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬ç¨‹åºçš„çŠ¶æ€è¿˜æ˜¯æ²¡æœ‰æ”¹å˜ï¼Œè¿™å°±å¾ˆå¥‡æ€ªäº†ï¼Œå…¶å®ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å·²ç»ç»™çª—å£è®¾ç½®äº†è‡ªå®šä¹‰å®½é«˜ï¼Œè¦†ç›–äº†ã€‚æˆ‘ä»¬ä¹Ÿç¼ºäº†ä¸€å¥ä»£ç ï¼›</p>
<pre><code class="javascript"> winState.manage(win)
</code></pre>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125102737449.png"></p>
<p>ç°åœ¨æˆ‘ä»¬çš„çŠ¶æ€ä¿å­˜å°±æ²¡é—®é¢˜äº†ã€‚å½“æˆ‘ä»¬å…³é—­çª—å£å†æ¬¡æ‰“å¼€çš„æ—¶å€™å°±æ˜¯å…³é—­ä¹‹å‰çš„æ ·å­äº†ã€‚</p>
<h4 id="2-dialog"><a href="#2-dialog" class="headerlink" title="2.dialog"></a>2.dialog</h4><p>è¿™äº›å…·ä½“å‚æ•°è¯·çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹é¢å‡ ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡</p>
<h6 id="ï¼ˆ1ï¼‰dialog-showOpenDialog-browserWindow-options"><a href="#ï¼ˆ1ï¼‰dialog-showOpenDialog-browserWindow-options" class="headerlink" title="ï¼ˆ1ï¼‰dialog.showOpenDialog([browserWindow, ]options)"></a>ï¼ˆ1ï¼‰<code>dialog.showOpenDialog([browserWindow, ]options)</code></h6><h6 id="ï¼ˆ2ï¼‰dialog-showSaveDialog-browserWindow-options"><a href="#ï¼ˆ2ï¼‰dialog-showSaveDialog-browserWindow-options" class="headerlink" title="ï¼ˆ2ï¼‰dialog.showSaveDialog([browserWindow, ]options)"></a>ï¼ˆ2ï¼‰<code>dialog.showSaveDialog([browserWindow, ]options)</code></h6><h6 id="ï¼ˆ3ï¼‰dialog-showMessageBox-browserWindow-options"><a href="#ï¼ˆ3ï¼‰dialog-showMessageBox-browserWindow-options" class="headerlink" title="ï¼ˆ3ï¼‰dialog.showMessageBox([browserWindow, ]options)"></a>ï¼ˆ3ï¼‰<code>dialog.showMessageBox([browserWindow, ]options)</code></h6><p>[dialogæ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/dialog#dialogshowopendialogsyncbrowserwindow-options">https://www.electronjs.org/zh/docs/latest/api/dialog#dialogshowopendialogsyncbrowserwindow-options</a> â€œ</p>
<h4 id="3-å¿«æ·é”®ï¼ˆglobalShortcutï¼‰"><a href="#3-å¿«æ·é”®ï¼ˆglobalShortcutï¼‰" class="headerlink" title="3.å¿«æ·é”®ï¼ˆglobalShortcutï¼‰"></a>3.å¿«æ·é”®ï¼ˆglobalShortcutï¼‰</h4><blockquote>
<p>åœ¨åº”ç”¨ç¨‹åºæ²¡æœ‰é”®ç›˜ç„¦ç‚¹æ—¶ï¼Œç›‘å¬é”®ç›˜äº‹ä»¶ã€‚</p>
</blockquote>
<p><code>globalShortcut</code> æ¨¡å—å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ³¨å†Œ&#x2F;æ³¨é”€å…¨å±€å¿«æ·é”®, ä»¥ä¾¿å¯ä»¥ä¸ºæ“ä½œå®šåˆ¶å„ç§å¿«æ·é”®ã€‚</p>
<p><strong>æ³¨æ„:</strong> å¿«æ·æ–¹å¼æ˜¯å…¨å±€çš„; å³ä½¿åº”ç”¨ç¨‹åºæ²¡æœ‰é”®ç›˜ç„¦ç‚¹, å®ƒä¹Ÿä»ç„¶åœ¨æŒç»­ç›‘å¬é”®ç›˜äº‹ä»¶ã€‚ åœ¨ app æ¨¡å—çš„ <code>ready</code> äº‹ä»¶å°±ç»ªä¹‹å‰ï¼Œè¿™ä¸ªæ¨¡å—ä¸èƒ½ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">const &#123; app, globalShortcut &#125; = require(&#39;electron&#39;)

app.whenReady().then(() =&gt; &#123;
  // æ³¨å†Œä¸€ä¸ª&#39;CommandOrControl+X&#39; å¿«æ·é”®ç›‘å¬å™¨
  const ret = globalShortcut.register(&#39;CommandOrControl+X&#39;, () =&gt; &#123;
    console.log(&#39;CommandOrControl+X is pressed&#39;)
  &#125;)

  if (!ret) &#123;
    console.log(&#39;registration failed&#39;)
  &#125;

  // æ£€æŸ¥å¿«æ·é”®æ˜¯å¦æ³¨å†ŒæˆåŠŸ
  console.log(globalShortcut.isRegistered(&#39;CommandOrControl+X&#39;))
&#125;)

app.on(&#39;will-quit&#39;, () =&gt; &#123;
  // æ³¨é”€å¿«æ·é”®
  globalShortcut.unregister(&#39;CommandOrControl+X&#39;)

  // æ³¨é”€æ‰€æœ‰å¿«æ·é”®
  globalShortcut.unregisterAll()
&#125;)
</code></pre>
<p>æ–¹æ³•</p>
<p><code>globalShortcut</code> æ¨¡å—å…·æœ‰ä»¥ä¸‹æ–¹æ³•:</p>
<h6 id="ï¼ˆ1ï¼‰globalShortcut-register-accelerator-callback"><a href="#ï¼ˆ1ï¼‰globalShortcut-register-accelerator-callback" class="headerlink" title="ï¼ˆ1ï¼‰globalShortcut.register(accelerator, callback)"></a>ï¼ˆ1ï¼‰<code>globalShortcut.register(accelerator, callback)</code></h6><ul>
<li><code>accelerator</code> Accelerator</li>
<li><code>callback</code> Function</li>
</ul>
<p>è¿”å›<code>boolean</code> - å¿«æ·é”®æ³¨å†Œæ˜¯å¦æˆåŠŸ</p>
<p>æ³¨å†Œ <code>accelerator</code> çš„å…¨å±€å¿«æ·é”®ã€‚ å½“ç”¨æˆ·æŒ‰ä¸‹æ³¨å†Œå¿«æ·é”®æ—¶ï¼Œ <code>callback</code> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>å¦‚æœæŒ‡å®šçš„å¿«æ·é”®å·²ç»è¢«å…¶ä»–åº”ç”¨ç¨‹åºæ³¨å†Œæ‰, è°ƒç”¨ä¼šé»˜é»˜å¤±è´¥ã€‚ è¯¥ç‰¹æ€§ç”±æ“ä½œç³»ç»Ÿå®šä¹‰ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¸å¸Œæœ›å¤šä¸ªç¨‹åºçš„å…¨å±€å¿«æ·é”®äº’ç›¸å†²çªã€‚</p>
<p>åœ¨ macOS 10.14 Mojave ä¸‹é¢ï¼Œå¦‚æœ app æ²¡æœ‰è¢«æˆæƒä¸ºå¯ä¿¡ä»»ä½¿ç”¨çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆä¸‹åˆ—å¿«æ·é”®ä¼šæ³¨å†Œå¤±è´¥ï¼š</p>
<ul>
<li>â€œMedia Play&#x2F;Pauseâ€</li>
<li>â€œMedia Next Trackâ€</li>
<li>â€œMedia Previous Trackâ€</li>
<li>â€œMedia Stopâ€</li>
</ul>
<h6 id="ï¼ˆ2ï¼‰globalShortcut-registerAll-accelerators-callback"><a href="#ï¼ˆ2ï¼‰globalShortcut-registerAll-accelerators-callback" class="headerlink" title="ï¼ˆ2ï¼‰globalShortcut.registerAll(accelerators, callback)"></a>ï¼ˆ2ï¼‰<code>globalShortcut.registerAll(accelerators, callback)</code></h6><ul>
<li><code>accelerators</code> string[] - an array of Accelerators.</li>
<li><code>callback</code> Function</li>
</ul>
<p>æ³¨å†Œå¤šä¸ªå…¨å±€å¿«æ·é”®ã€‚ å½“ç”¨æˆ·æŒ‰ä¸‹æ³¨å†Œå¿«æ·é”®æ—¶ï¼Œ <code>callback</code> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>å¦‚æœå®šä¹‰çš„å¿«æ·é”®å·²ç»è¢«å…¶ä»–åº”ç”¨å ç”¨ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šå¤±æ•ˆã€‚ è¯¥ç‰¹æ€§ç”±æ“ä½œç³»ç»Ÿå®šä¹‰ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¸å¸Œæœ›å¤šä¸ªç¨‹åºçš„å…¨å±€å¿«æ·é”®äº’ç›¸å†²çªã€‚</p>
<p>åœ¨ macOS 10.14 Mojave ä¸‹é¢ï¼Œå¦‚æœ app æ²¡æœ‰è¢«æˆæƒä¸ºå¯ä¿¡ä»»ä½¿ç”¨çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆä¸‹åˆ—å¿«æ·é”®ä¼šæ³¨å†Œå¤±è´¥ï¼š</p>
<ul>
<li>â€œMedia Play&#x2F;Pauseâ€</li>
<li>â€œMedia Next Trackâ€</li>
<li>â€œMedia Previous Trackâ€</li>
<li>â€œMedia Stopâ€</li>
</ul>
<h6 id="ï¼ˆ3ï¼‰globalShortcut-isRegistered-accelerator"><a href="#ï¼ˆ3ï¼‰globalShortcut-isRegistered-accelerator" class="headerlink" title="ï¼ˆ3ï¼‰globalShortcut.isRegistered(accelerator)"></a>ï¼ˆ3ï¼‰<code>globalShortcut.isRegistered(accelerator)</code></h6><ul>
<li><code>accelerator</code> Accelerator</li>
</ul>
<p>Returns <code>boolean</code> - è¡¨ç¤º <code>accelerator</code> å…¨å±€å¿«æ·é”®æ˜¯å¦æ³¨å†ŒæˆåŠŸ</p>
<p>å½“å¿«æ·é”®å·²ç»è¢«å…¶ä»–åº”ç”¨ç¨‹åºæ³¨å†Œæ—¶, æ­¤è°ƒç”¨ä¾ç„¶å°†è¿”å› <code>false</code>ã€‚ è¯¥ç‰¹æ€§ç”±æ“ä½œç³»ç»Ÿå®šä¹‰ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¸å¸Œæœ›å¤šä¸ªç¨‹åºçš„å…¨å±€å¿«æ·é”®äº’ç›¸å†²çªã€‚</p>
<h6 id="ï¼ˆ4ï¼‰globalShortcut-unregister-accelerator"><a href="#ï¼ˆ4ï¼‰globalShortcut-unregister-accelerator" class="headerlink" title="ï¼ˆ4ï¼‰globalShortcut.unregister(accelerator)"></a>ï¼ˆ4ï¼‰<code>globalShortcut.unregister(accelerator)</code></h6><ul>
<li><code>accelerator</code> Accelerator</li>
</ul>
<p>æ³¨é”€ <code>accelerator</code> çš„å…¨å±€å¿«æ·é”®ã€‚</p>
<h6 id="ï¼ˆ5ï¼‰globalShortcut-unregisterAll"><a href="#ï¼ˆ5ï¼‰globalShortcut-unregisterAll" class="headerlink" title="ï¼ˆ5ï¼‰globalShortcut.unregisterAll()"></a>ï¼ˆ5ï¼‰<code>globalShortcut.unregisterAll()</code></h6><p>æ³¨é”€æ‰€æœ‰çš„å…¨å±€å¿«æ·é”®ï¼ˆæ¸…ç©ºè¯¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å…¨å±€å¿«æ·é”®ï¼‰ã€‚</p>
<h4 id="4-èœå•ï¼ˆMenuï¼‰"><a href="#4-èœå•ï¼ˆMenuï¼‰" class="headerlink" title="4.èœå•ï¼ˆMenuï¼‰"></a>4.èœå•ï¼ˆMenuï¼‰</h4><p>æˆ‘ä»¬è¿™ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="javascript">//ä¸€ä¸ªç®€å•çš„èœå•æ¨¡æ¿
const &#123; app, Menu &#125; = require(&#39;electron&#39;)

const isMac = process.platform === &#39;darwin&#39;//åˆ¤æ–­æ˜¯ä¸æ˜¯macOS
//roleï¼šèœå•é€‰é¡¹
const template = [
  // &#123; role: &#39;appMenu&#39; &#125;
  ...(isMac ? [&#123;
    label: app.name,//æˆ‘ä»¬ç¨‹åºåç§°
    submenu: [
      &#123; role: &#39;about&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;services&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;hide&#39; &#125;,
      &#123; role: &#39;hideOthers&#39; &#125;,
      &#123; role: &#39;unhide&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;quit&#39; &#125;
    ]
  &#125;] : []),
  // &#123; role: &#39;fileMenu&#39; &#125;
  &#123;
    label: &#39;File&#39;,
    submenu: [
      isMac ? &#123; role: &#39;close&#39; &#125; : &#123; role: &#39;quit&#39; &#125;
    ]
  &#125;,
  // &#123; role: &#39;editMenu&#39; &#125;
  &#123;
    label: &#39;Edit&#39;,
    submenu: [
      &#123; role: &#39;undo&#39; &#125;,
      &#123; role: &#39;redo&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;cut&#39; &#125;,
      &#123; role: &#39;copy&#39; &#125;,
      &#123; role: &#39;paste&#39; &#125;,
      ...(isMac ? [
        &#123; role: &#39;pasteAndMatchStyle&#39; &#125;,
        &#123; role: &#39;delete&#39; &#125;,
        &#123; role: &#39;selectAll&#39; &#125;,
        &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
        &#123;
          label: &#39;Speech&#39;,
          submenu: [
            &#123; role: &#39;startSpeaking&#39; &#125;,
            &#123; role: &#39;stopSpeaking&#39; &#125;
          ]
        &#125;
      ] : [
        &#123; role: &#39;delete&#39; &#125;,
        &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
        &#123; role: &#39;selectAll&#39; &#125;
      ])
    ]
  &#125;,
  // &#123; role: &#39;viewMenu&#39; &#125;
  &#123;
    label: &#39;View&#39;,
    submenu: [
      &#123; role: &#39;reload&#39; &#125;,
      &#123; role: &#39;forceReload&#39; &#125;,
      &#123; role: &#39;toggleDevTools&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;resetZoom&#39; &#125;,
      &#123; role: &#39;zoomIn&#39; &#125;,
      &#123; role: &#39;zoomOut&#39; &#125;,
      &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
      &#123; role: &#39;togglefullscreen&#39; &#125;
    ]
  &#125;,
  // &#123; role: &#39;windowMenu&#39; &#125;
  &#123;
    label: &#39;Window&#39;,
    submenu: [
      &#123; role: &#39;minimize&#39; &#125;,
      &#123; role: &#39;zoom&#39; &#125;,
      ...(isMac ? [
        &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
        &#123; role: &#39;front&#39; &#125;,
        &#123; type: &#39;separator&#39; &#125;,//åˆ†å‰²çº¿
        &#123; role: &#39;window&#39; &#125;
      ] : [
        &#123; role: &#39;close&#39; &#125;
      ])
    ]
  &#125;,
  &#123;
    role: &#39;help&#39;,
    submenu: [
      &#123;
        label: &#39;Learn More&#39;,
        click: async () =&gt; &#123;
          //å®šä¹‰è‡ªå·±çš„èœå•æ–¹æ³•
          const &#123; shell &#125; = require(&#39;electron&#39;)
          await shell.openExternal(&#39;https://electronjs.org&#39;)
        &#125;
      &#125;,
      &#123;
        label:&#39;alanmf&#39;,
          click:()=&gt;&#123;console.log(&#39;shift+G&#39;)&#125;,
          accelerator:&#39;shift+G&#39;//å®šä¹‰å¿«æ·é”®
      &#125;
    ]
  &#125;
]

const menu = Menu.buildFromTemplate(template)//ä¸€èˆ¬æ¥è¯´ï¼Œ templateæ˜¯ä¸€ä¸ªoptionsç±»å‹çš„æ•°ç»„ï¼Œç”¨äºæ„å»ºMenuItemã€‚ ä½¿ç”¨æ–¹æ³•å¯å‚è€ƒå‰æ–‡ã€‚è¿˜å¯ä»¥å°†å…¶ä»–å­—æ®µé™„åŠ åˆ°templateï¼Œå®ƒä»¬å°†æˆä¸ºèœå•é¡¹çš„å±æ€§ã€‚
Menu.setApplicationMenu(menu)//åœ¨macOSä¸Šå°† menuè®¾ç½®æˆåº”ç”¨å†…èœå• åœ¨windowså’ŒLinuxä¸Šï¼Œmenu å°†ä¼šè¢«è®¾ç½®æˆçª—å£é¡¶éƒ¨èœå•åœ¨Windowså’ŒLinuxä¸­
</code></pre>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125155603331.png"></p>
<p>[Menuèœå•æ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/menu">https://www.electronjs.org/zh/docs/latest/api/menu</a> â€œ<br>[roleçš„å±æ€§å€¼]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/menu-item#%E8%A7%92%E8%89%B2">https://www.electronjs.org/zh/docs/latest/api/menu-item#è§’è‰²</a> â€œ</p>
<h4 id="5-ç³»ç»Ÿæ‰˜ç›˜ï¼ˆTrayï¼‰"><a href="#5-ç³»ç»Ÿæ‰˜ç›˜ï¼ˆTrayï¼‰" class="headerlink" title="5.ç³»ç»Ÿæ‰˜ç›˜ï¼ˆTrayï¼‰"></a>5.ç³»ç»Ÿæ‰˜ç›˜ï¼ˆTrayï¼‰</h4><blockquote>
<p>æ·»åŠ å›¾æ ‡å’Œä¸Šä¸‹æ–‡èœå•åˆ°ç³»ç»Ÿé€šçŸ¥åŒº</p>
</blockquote>
<pre><code class="javascript">const &#123; app, Menu, Tray &#125; = require(&#39;electron&#39;)

let tray = null
app.whenReady().then(() =&gt; &#123;
  tray = new Tray(&#39;/path/to/my/icon&#39;) //å®šä¹‰iconçš„è·¯å¾„
  const contextMenu = Menu.buildFromTemplate([
    &#123; label: &#39;Item1&#39;, type: &#39;radio&#39; &#125;,
    &#123; label: &#39;Item2&#39;, type: &#39;radio&#39; &#125;,
    &#123; label: &#39;Item3&#39;, type: &#39;radio&#39;, checked: true &#125;,
    &#123; label: &#39;Item4&#39;, type: &#39;radio&#39; &#125;
  ])
  tray.setToolTip(&#39;This is my application.&#39;)//è®¾ç½®é¼ æ ‡æŒ‡é’ˆåœ¨æ‰˜ç›˜å›¾æ ‡ä¸Šæ‚¬åœæ—¶æ˜¾ç¤ºçš„æ–‡æœ¬
  tray.setContextMenu(contextMenu)//è®¾ç½®ä¸Šä¸‹æ–‡èœå•åˆ°æ‰˜ç›˜
&#125;)
</code></pre>
<p>å…¶å®è¿™ä¸ªTrayè·ŸMenuæ˜¯å¸ƒå±€å·®ä¸å¤ªå¤šçš„ï¼Œæ‰€ä»¥å­¦ä¹ èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆéš¾ç†è§£äº†ã€‚å…·ä½“äº‹ä»¶å’Œæ–¹æ³•ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤šï¼Œæˆ‘ä»¬å°±ç›´æ¥çœ‹å®˜æ–¹APIæ–‡æ¡£å§ï¼</p>
<p>[Trayæ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/tray">https://www.electronjs.org/zh/docs/latest/api/tray</a> â€œ</p>
<h4 id="6-è§¦æ§æ¿ï¼ˆTouchBarï¼‰"><a href="#6-è§¦æ§æ¿ï¼ˆTouchBarï¼‰" class="headerlink" title="6.è§¦æ§æ¿ï¼ˆTouchBarï¼‰"></a>6.è§¦æ§æ¿ï¼ˆTouchBarï¼‰</h4><p><strong>æ³¨æ„:</strong> TouchBar APIç›®å‰ä¸ºå®éªŒæ€§è´¨ï¼Œå¯èƒ½ä¼šæ›´æ”¹æˆ–åˆ é™¤ã€‚</p>
<p>å¦‚æœå®˜ç½‘æ¨èçš„TouchBaræ¨¡æ‹Ÿå™¨ä¸‹è½½å¤±è´¥ï¼Œè‡ªå·±æœç´¢ä¸€ä¸‹å³å¯ã€‚ï¼ˆå¦‚æœä¸‹è½½çš„æ‰“ä¸å¼€ï¼Œé‚£å°±åœ¨åº”ç”¨ç¨‹åº-&gt;å³é”®æ˜¾ç¤ºåŒ…å†…å®¹-&gt;å¦‚ä¸‹ï¼‰æ‰§è¡Œå°±å¯ä»¥äº†</p>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125172856290.png"></p>
<pre><code class="javascript">//touchbar.js
const &#123; app, BrowserWindow, TouchBar &#125; = require(&#39;electron&#39;)

const &#123; TouchBarLabel, TouchBarButton, TouchBarSpacer &#125; = TouchBar

let spinning = false

// ç±»ä¼¼è€è™æœºçš„æ»šè½´æ ‡ç­¾
const reel1 = new TouchBarLabel()
const reel2 = new TouchBarLabel()
const reel3 = new TouchBarLabel()

// æ—‹è½¬ç»“æœæ ‡ç­¾
const result = new TouchBarLabel()

// æ—‹è½¬æŒ‰é’®
const spin = new TouchBarButton(&#123;
  label: &#39;ğŸ° Spin&#39;,
  backgroundColor: &#39;#7851A9&#39;,
  click: () =&gt; &#123;
    // Ignore clicks if already spinning
    if (spinning) &#123;
      return
    &#125;

    spinning = true
    result.label = &#39;&#39;

    let timeout = 10
    const spinLength = 4 * 1000 // 4 seconds
    const startTime = Date.now()

    const spinReels = () =&gt; &#123;
      updateReels()

      if ((Date.now() - startTime) &gt;= spinLength) &#123;
        finishSpin()
      &#125; else &#123;
        // Slow down a bit on each spin
        timeout *= 1.1
        setTimeout(spinReels, timeout)
      &#125;
    &#125;

    spinReels()
  &#125;
&#125;)

const getRandomValue = () =&gt; &#123;
  const values = [&#39;ğŸ’&#39;, &#39;ğŸ’&#39;, &#39;7ï¸âƒ£&#39;, &#39;ğŸŠ&#39;, &#39;ğŸ””&#39;, &#39;â­&#39;, &#39;ğŸ‡&#39;, &#39;ğŸ€&#39;]
  return values[Math.floor(Math.random() * values.length)]
&#125;

const updateReels = () =&gt; &#123;
  reel1.label = getRandomValue()
  reel2.label = getRandomValue()
  reel3.label = getRandomValue()
&#125;

const finishSpin = () =&gt; &#123;
  const uniqueValues = new Set([reel1.label, reel2.label, reel3.label]).size
  if (uniqueValues === 1) &#123;
    // All 3 values are the same
    result.label = &#39;ğŸ’° Jackpot!&#39;
    result.textColor = &#39;#FDFF00&#39;
  &#125; else if (uniqueValues === 2) &#123;
    // 2ä¸ªå€¼ç›¸åŒ
    result.label = &#39;ğŸ˜ Winner!&#39;
    result.textColor = &#39;#FDFF00&#39;
  &#125; else &#123;
    // æ²¡æœ‰å€¼ç›¸åŒ
    result.label = &#39;ğŸ™ Spin Again&#39;
    result.textColor = null
  &#125;
  spinning = false
&#125;

const touchBar = new TouchBar(&#123;
  items: [
    spin,
    new TouchBarSpacer(&#123; size: &#39;large&#39; &#125;),
    reel1,
    new TouchBarSpacer(&#123; size: &#39;small&#39; &#125;),
    reel2,
    new TouchBarSpacer(&#123; size: &#39;small&#39; &#125;),
    reel3,
    new TouchBarSpacer(&#123; size: &#39;large&#39; &#125;),
    result
  ]
&#125;)

let window

app.whenReady().then(() =&gt; &#123;
  window = new BrowserWindow(&#123;
    frame: false,
    titleBarStyle: &#39;hiddenInset&#39;,
    width: 200,
    height: 200,
    backgroundColor: &#39;#000&#39;
  &#125;)
  window.loadURL(&#39;about:blank&#39;)
  window.setTouchBar(touchBar)
&#125;)
</code></pre>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="ini">./node_modules/.bin/electron touchbar.js
</code></pre>
<p><img src="/2022/11/25/Electron-d-2-0/image-20221125172447369.png"></p>
<p>[TouchBaræ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/touch-bar&quot;">https://www.electronjs.org/zh/docs/latest/api/touch-bar&quot;</a></p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p>[Electronå®˜æ–¹æ–‡æ¡£]: 	â€œ<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/app">https://www.electronjs.org/zh/docs/latest/api/app</a> â€œ<br>[npmjs]: 	â€œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com/</a> â€œ</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/electron/" rel="tag">electron</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2023
        <i class="ri-heart-fill heart_icon"></i> alan_mf
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="è‰ºæœ¯ç ç•œ"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">æ—…è¡Œ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://www.zcool.com.cn/u/21686563">æ‘„å½±</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">å‹é“¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/player">æ’­æ”¾å™¨</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/zfb.jpeg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wx.jpeg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=22707008&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>